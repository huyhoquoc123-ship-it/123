//15.154.4-es2019 2025-11-20T17:54:11.402Z (07f601a1d4aaf)
var CS_CONF={"collectionEnabled":true,"projectId":144172,"status":1,"hostnames":["anaconda.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":15,"validationRate":10,"lastTrackingDraw":1737731633,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"heapEnvironment":{"env_id":"758475466","heap_tag_status":"heap_sideloads_cs"},"implementations":[{"template":{"name":"BlockAllowListForSr","args":{"type":"allow","urls":"www.anaconda.com,www.anaconda.com/products,www.anaconda.com/products/data-science-ai-workbench,www.anaconda.com/download,www.anaconda.com/products/cloud-suite,www.anaconda.com/products/excel-toolbox,www.anaconda.com/products/package-security-manager,www.anaconda.com/products/dashboards,www.anaconda.com/products/application-deployment,www.anaconda.com/products/ai-launcher,www.anaconda.com/products/data-and-models,www.anaconda.com/products/high-performance-python,www.anaconda.com/products/notebooks,learning.anaconda.com/collections"}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural","artificial"]}}]}],"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com","startMode":1};
(()=>{var qu=Object.defineProperty;var Wu=(s,r,t)=>r in s?qu(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var be=(s,r,t)=>Wu(s,typeof r!="symbol"?r+"":r,t);var ye={};ye.d=(s,r)=>{for(var t in r)ye.o(r,t)&&!ye.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};ye.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ye.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);ye.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var go={};ye.r(go);ye.d(go,{getRequestParameters:()=>zg});function Ns(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var ft=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function _t(s){return X(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function bs(s){return s===parseInt(s,10)}function b(s){return X(s)&&(typeof s=="string"||s instanceof csString)}function Sr(s){return typeof s=="boolean"}function Rs(s){return typeof s=="object"}function X(s){return typeof s!="undefined"}function yt(s){return X(s)&&s!==null}function Y(s){return typeof s=="object"&&s!==null}function Yu(s,r,t){return bs(s)&&s>=r&&s<=t}function Ln(s){for(let r in s)return!1;return!0}function Ee(s){return typeof s=="function"}function ke(s){return s instanceof Element}function Le(s){return s instanceof Error}function mo(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var tn={[ft.debug]:0,[ft.warn]:1,[ft.implementation]:1,[ft.error]:2,[ft.critical]:3},ot={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Xu(s){ot=s}var N=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return ls(n,o.bind(this))(...c)}}};function ls(s,r){return function(...t){try{let e=r.apply(this,t);return X(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>ot.error(Le(i)?i:new Error(i),s)):e}catch(e){try{ot.error(Le(e)?e:new Error(e),s)}catch{}}}}function tt(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function yo(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function _a(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function $c(s){let r=self.atob(s);return yo(r)}function xn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function wa(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){ot.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?$c(e[1]):yo(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var zc=typeof performance!="undefined"&&!!performance.now,Aa=zc?()=>performance.now():()=>csDate.now(),Ku=(()=>{var s,r;return zc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),Eo=34164e6,D={now(){return Math.round(Aa()+Ku)},elapsed(){return Aa()}};function Ta(){return Math.floor(D.now()/1e3)}function qc(){return typeof window.Promise=="function"}function Ju(){var s;return typeof crypto!="undefined"&&Ee((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function ba(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Rt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ii(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Qu=Number.MAX_SAFE_INTEGER||9007199254740991,Cs={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Qu){return Math.floor(Math.random()*s)}},ki=typeof window=="undefined";function Zu(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ye.g!="undefined"?ye.g:typeof process!="undefined"?process:Function("return this")()}var it=Zu();function Js(s,r){let t,e,i,n,o,c=null,l=f=>{let u=D.elapsed();if(!f&&c!==null){let y=r-(u-c);if(y>=1){i=it.csSetTimeout(l,y);return}}let m=u-n;i=null,c=null,n=null,o=s.apply(t,[m,...e])},h=function(){if(t=this,e=arguments,n){c=D.elapsed();return}return n=D.elapsed(),i=it.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(it.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(it.csClearTimeout(i),i=null)},h}function td(s=0){return(r,t,e)=>{e.value=Js(e.value,s)}}var Is=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=`${t===""?"":`${t}.`}${this.name}`,o=csArray.prototype.map.call(i,c=>({name:n,parameter:c,value:Math.round(e[c])}));return s.globalService.push(o),this.reset(),o.length>0}}return s.globalService=null,tt([N()],s.prototype,"flush",null),s})(),Mt=(()=>{class s extends Is{constructor(t,e=100){super(t),this.LE=e,this.values={},e&&(this.debouncedFlush=Js(()=>this.flush(),this.LE))}count(t,e=1){Is.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),Ra=(()=>{class s extends Is{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){return this.count===0?!1:super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Bs=(()=>{class s extends Is{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,f;let u=m=>this.values[`${t}.${m}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[f=`${t}.total`])!==null&&n!==void 0||(h[f]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=u("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=u("total")/u("count")}}return s})(),ed=(()=>{class s extends Is{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;Is.globalService&&((i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),$={counters:{commandsFromIntegrations:new Mt("commands-from-integrations"),commandsFromCSTC:new Mt("commands-from-cstc"),commandsFromIframe:new Mt("commands-from-iframe"),commandApplied:new Mt("command-applied"),commandError:new Mt("command-error"),commandMisuse:new Mt("command-misuse"),CSTCSnippetUsed:new Mt("cstc-snippet-used"),redactedPII:new Mt("redacted-pii"),pageAnonymisation:new Mt("page-anonymisation"),patchedNativeFunctions:new Mt("patched-native-functions"),pureWindowState:new Mt("pure-window-state"),sensitiveElements:new Mt("sensitive-elements"),cspErrors:new Mt("csp-errors"),networkRequests:new Mt("network-requests"),webVitalsErrors:new Mt("web-vitals-errors"),trackedFeatures:new Mt("tracked-features"),longTasks:new Ra("long-tasks"),errors:new Mt("errors"),methodPerformance:new Bs("perf"),downloadTime:new Bs("download-time",["max","average"]),transferSize:new Bs("transfer-size",["max","average"]),evalTime:new Bs("eval-time",["max","average"]),blockingTime:new Ra("blocking-time"),inpContribution:new Bs("inp-contribution"),tasks:new Bs("tasks"),availableFeatures:new ed("available-features")},setService(s){Is.setGlobalService(s)}},Li=(()=>{class s{constructor(){this.ra=0}get length(){return this.ra}get isEmpty(){return!this.Zs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ra++,this.Sn?this.Sn=this.Sn[1]=[t,void 0]:this.Sn=this.Zs=[t,void 0]}pop(){if(!this.Zs)return null;this.ra--;let t=this.Zs[0];return this.Zs=this.Zs[1],this.Zs||(this.Sn=void 0),t}forEach(t){let e=this.Zs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ra=0,this.Zs=this.Sn=void 0}}return s})(),Vn=0,So=s=>{Vn++,csQueueMicrotask(()=>Ds(()=>{try{s()}finally{Vn--}},[Se.MicroTask,"queueMicrotask"]))},vr=new Li,_r=new Li;function qt(s,r="high"){vr.isEmpty&&_r.isEmpty&&Wc(sd),r==="high"?_r.push(Ca(s)):vr.push(Ca(s))}function Wc(s,r=10){r===0?So(s):csQueueMicrotask(()=>Wc(s,r-1))}function sd(){for(;!_r.isEmpty;)_r.pop()();for(;!vr.isEmpty;)vr.pop()()}async function Yc(s=1){for(let r=0;r<s;r++)await new Promise(t=>qt(t))}function Ca(s){return function(){try{s.apply(window,arguments)}catch(r){ot.critical(r)}}}var mr="null",is=null,Xc=[],id=()=>{var s;return ki||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!ki&&id()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],is=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Un({type:"UXA_EVENT",event:s.detail})}),is.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===mr)return;mr=s.data.sessionId,csArray.prototype.forEach.call(Xc,r=>r()),is==null||is.postMessage({type:"CONNECTED",sessionId:mr})}}));function rd(s){ki||(mr!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Xc,s)))}function Un(s){is==null||is.postMessage(s)}function Qs(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Me(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function nd(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function vo(s,r){let t=[];return nd(s,r,e=>csArray.prototype.push.call(t,e)),t}function K(s,r){if(od(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function od(s){return s.length>=0}function Ms(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function wr(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function _o(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function Ii(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function ad(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function Ia(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function hs(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function cd(s){return csArray.isArray(s)&&s.length>0}var xi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Re=(()=>{class s extends xi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Pa=(()=>{class s extends xi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Ce=(()=>{class s extends xi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=D.elapsed();t(),this.count++;let i=D.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=D.elapsed();return()=>{this.count++;let e=D.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),ld=(()=>{class s extends xi{constructor(){super("INP","Value: {value}")}getData(){return{value:St.tasks.eventListener.max}}}return s})(),St={general:{category:"General",nbEvents:new Re("Nb of Events"),pendingTasks:new Re("Pending Tasks"),pendingEvents:new Re("Pending Tasks"),nbOfMutationObservers:new Pa("Nb of Mutation Observers"),inp:new ld},mutations:{category:"Mutations",initialDOM:new Ce("Initial DOM"),pendingMutations:new Re("Nb of Mutations scheduled"),serializedMutations:new Ce("Serialized Mutations"),count:new Re("Mutation Count"),elementMutationObserved:new Pa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Ce("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Re("Nb of Hidden Elements "),nbElements:new Re("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Re("Tasks"),errors:new Re("Errors"),timer:new Ce("Timers"),microtask:new Ce("Microtasks"),mutationObserver:new Ce("MutationObserver"),monkeyPatch:new Ce("MonkeyPatch"),eventListener:new Ce("EventListener"),intersectionObserver:new Ce("Intersection")}};function hd(){let s=null;rd(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(St),n=>St[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof xi));Un({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ds(()=>{let n=vo(Me(e,o=>Me(o,c=>c.getData())),o=>o);Un({type:"UXA_PERFORMANCE_COUNTER",event:n})},[Se.Timer,"performance-counter-interval"])},1e3))})}var Se=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),zt=null,ud=["click","tap","keyup","keydown","pointerup","pointerdown"];async function Ds(s,r,t=null){if(zt&&r[0]!==Se.MicroTask)return s();t&&(zt=t),zt||(zt={type:r[0],elapsed:0},St.tasks.tasks.increase());try{zt.elapsed+=dd(s)}catch(e){St.tasks.errors.increase(),ot.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{Vn<=0&&(St.tasks[zt.type].elapsed(zt.elapsed),zt.elapsed>50&&($.counters.longTasks.push(zt.elapsed),$.counters.blockingTime.push(zt.elapsed-50)),$.counters.tasks.add(r[0],zt.elapsed),csArray.prototype.includes.call(ud,r[1])&&$.counters.inpContribution.add(r[1],zt.elapsed),zt=null)}}function dd(s){let r=D.elapsed();return s(),D.elapsed()-r}var en,fd="cs-native-frame";var Ye={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function Kc(s,r){let t=Ns(window,s);return function(e,i){return t(()=>Ds(e,[r,s]),i)}}window.csSetTimeout=Kc("setTimeout",Se.Timer);window.csSetInterval=Kc("setInterval",Se.Timer);window.csQueueMicrotask=(en=Ns(window,"queueMicrotask"))!==null&&en!==void 0?en:setTimeout;window.csClearTimeout=Ns(window,"clearTimeout");window.csClearInterval=Ns(window,"clearInterval");window.csFileReader=Ns(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function pd(){let s=document.createElement("iframe");s.id=fd,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function gd(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function md(s,r,t){let e=gd(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Jc(s){var r,t;Object.keys(Ye.constructors).forEach(i=>{window[Ye.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Sd(s);let e=s.MutationObserver;("Prototype"in window||Ed())&&(e=(t=(r=Ns(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=Oa(window.IntersectionObserver,Se.IntersectionObserver),window.csMutationObserver=Oa(e,Se.MutationObserver),Fs("csNode",Ye.nodeProperties,s.Node.prototype,"get"),Fs("csElement",Ye.elementProperties,s.Element.prototype,"get"),Fs("csElement",Ye.elementPropertiesValues,s.Element.prototype,"value",!1),Fs("csHTMLImageElement",Ye.imageProperties,s.HTMLImageElement.prototype,"set"),Fs("csEvent",Ye.eventProperties,s.Event.prototype,"get"),Fs("csNavigator",Ye.navigatorProperties,s.navigator,"value")}function Fs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=md(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function wo(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function yd(){try{let s=pd();return s?(window.CSPureWindow=s,Jc(window.CSPureWindow),!0):!1}catch(s){return wo("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!yd())try{Jc(it)}catch(s){wo("Critical",`failed to copy references from window: ${s.message}`)}function Ed(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Sd(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function Oa(s,r){try{let t=function(e,i){return new s((o,c)=>{Ds(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return wo("Warning",`failed to extends ${s.name}`),s}}var lt=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function jn(s){return lt.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function vd(s){let r=s.getAttribute("id");return r&&lt.escapeInvalidCharacters(r)}function dt(s){return csNodenodeType.apply(s)===1}function Ar(s){return csNodenodeType.apply(s)===3}function _d(s){return csNodenodeType.apply(s)===8}function Qc(s){return dt(s)&&s.localName==="link"}function wd(s){return dt(s)&&s.localName==="source"}function Zc(s){return dt(s)&&s.localName==="a"}function Ao(s){return Qc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Ad(s){return dt(s)&&s.localName==="img"}function Dr(s){return dt(s)&&s.localName==="style"}function kr(s){return dt(s)&&s.localName==="input"}function To(s){return dt(s)&&s.localName==="textarea"}function Lr(s){return dt(s)&&s.localName==="script"}function Td(s){return dt(s)&&s.localName==="button"}function ri(s){return dt(s)&&"ownerSVGElement"in s}function bo(s){return dt(s)&&s.localName==="select"}function bd(s){return dt(s)&&s.localName==="details"}function Rd(s){return dt(s)&&s.localName==="summary"}function Cd(s){return ri(s)&&s.localName==="image"}function Id(s){return ri(s)&&s.localName==="use"}function Pd(s){return ri(s)&&s.localName==="feImage"}function Od(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function Nd(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function Tr(s){return csNodenodeType.apply(s)===9}function Pi(s){return Od(s)&&"host"in s&&"mode"in s}function tl(s){return dt(s)&&!!csElementshadowRoot.apply(s)&&Pi(csElementshadowRoot.apply(s))}var Md=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Dd(s){return dt(s)&&yt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Md,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Vi="detached";function el(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return br(r)&&csArray.prototype.push.call(t,Vi),{ancestors:t,selectionRoot:r}}function kd(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Zc(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return br(r)&&csArray.prototype.push.call(t,Vi),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function br(s){return De.isValidElement(s)}var Ss=(()=>{var s,r;return(r=(s=it.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Jt=Ss.matches||Ss.matchesSelector||Ss.mozMatchesSelector||Ss.msMatchesSelector||Ss.oMatchesSelector||Ss.webkitMatchesSelector,Na=Ss.closest,sl=9;function Ld(s,r){return r?csArray.prototype.some.call(r,t=>Jt.call(s,t)):!1}function xd(s,r,t){if(s===Vi||csNodenodeType.apply(s)===sl)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=jn(r),o=0,c=r.previousElementSibling;for(;c;)(jn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Ld(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Vd(s,r,t){if(s===Vi||csNodenodeType.apply(s)===sl)return 0;let e=0,i=r.previousElementSibling;for(;i;)Jt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Ud=[/\d{4}/,/^ember\d+$/],jd="@",Ro="data-cs-override-id",Hd="data-cs-dynamic-id";function il(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=jn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${jd}`)),Gd(s,t)){let m=Co(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Ro}="${m}"]`}}let c=Kd(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Bd(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=vd(s);if(zd(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let f=Fd(s,e);if(f){let m=Vd(r,s,f);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${f}](${m})`}}let u=xd(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${u})`}}function Bd(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Jt.call(s,e)&&Xd(e,r))return e}}function Fd(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Jt.call(s,t))return t}}function Gd(s,r){let t=Co(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Io(Ro,t,r)}function $d(s){return Co(s)!==null}function Co(s){return s.getAttribute(Ro)}function zd(s,r,t,e){return r&&!$d(s)&&!qd(s,r,e)&&Yd(r,t)}function qd(s,r,t){return s.hasAttribute(Hd)||Wd(r,t)}function Wd(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Ud,e=>e.test(s))||t)}function Yd(s,r){return s&&Io("id",s,r)}function Io(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Xd(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Kd(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Io(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Hn=11;function Rr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Ma(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=il(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Ma(h,t)}${o}`}let l=Rr(s,r,t);return`${l?`${l}>`:""}${o}`}function Ma(s,r){if(s===Vi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=el(s.host);return`${Rr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===Hn?"|fragment|":""}var rl=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Jd=(()=>{class s extends rl{constructor(){super(...arguments),this.na=!1,this.oa=!1,this.Jc=!1}xE(t,e){return this.na&&!(e===null&&br(t))&&csNodenodeType.apply(t)!==Hn&&!t.host}VE(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.xE(t,e))return;let o=!1;e===null&&br(t)&&(o=!0,this.done=!0);let c=this.oa&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Jc=!0,this.na=!1,this.oa=!1),!l&&e===null&&csNodenodeType.apply(t)===Hn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.VE(t))return;let h=e!=null?e:"detached",{elementSelector:f,hasUniqueIdentifier:u}=il(t,h,i,this.options);u&&(this.oa=!0,this.na=!this.options.fullPath);let m=`${o?`|detached|${c}`:""}${this.na&&!u?"":f}`,S=!u&&this.oa&&!this.options.fullPath?"":this.path&&!this.Jc?">":"";this.Jc=!1,this.path=`${m}${S}${this.path}`}}return s})(),bt=(()=>{let s;return function(r){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let u=window.csScreen.width;return bs(u)&&u>0?u:window.screen.width}r.screenWidth=o;function c(){let u=window.csScreen.height;return bs(u)&&u>0?u:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function f(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=f}(s||(s={})),s})();function ne(s,r=jt.SHOW_ALL){let t=r|jt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Da(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Da(c);if(r&jt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(rn[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){rn[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((rn[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function Da(s){return s&&tl(s)?s.shadowRoot:null}var sn=(()=>{var s;return(s=it.Node)!==null&&s!==void 0?s:{}})(),jt=(()=>{var s;return(s=it.NodeFilter)!==null&&s!==void 0?s:{}})(),rn={2:jt.SHOW_ATTRIBUTE,4:jt.SHOW_CDATA_SECTION,8:jt.SHOW_COMMENT,11:jt.SHOW_DOCUMENT_FRAGMENT,9:jt.SHOW_DOCUMENT,10:jt.SHOW_DOCUMENT_TYPE,1:jt.SHOW_ELEMENT,[sn.ENTITY_NODE]:jt.SHOW_ENTITY,[sn.ENTITY_REFERENCE_NODE]:jt.SHOW_ENTITY_REFERENCE,[sn.NOTATION_NODE]:jt.SHOW_NOTATION,7:jt.SHOW_PROCESSING_INSTRUCTION,3:jt.SHOW_TEXT},nl=!1,Bn=5,or=50;function Qd(s=5){nl=ot.isPerfLoggingActive(),Bn=s}function ks(s,r){return function(){if(!nl)return s.apply(this,arguments);let t=D.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=D.elapsed()-t;i>=Bn&&$.counters.methodPerformance.add(r,i),i>or&&$.counters.blockingTime.push(i-or)});else{let i=D.elapsed()-t;i>=Bn&&$.counters.methodPerformance.add(r,i),i>or&&$.counters.blockingTime.push(i-or)}return e}}var It=function(s){return function(r,t,e){let i=e.value;e.value=ks(i,s)}},As=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&tl(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return ne(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=ks(i,"getAllShadowHosts")}(s||(s={})),s})(),nn=(()=>{var s;return(s=it.Node)!==null&&s!==void 0?s:Object})(),nt=(()=>{let s;return function(r){let t="isConnected"in nn.prototype?_=>_.isConnected:_=>!_.ownerDocument||!(_.ownerDocument.compareDocumentPosition(_)&_.DOCUMENT_POSITION_DISCONNECTED);function e(_,V){for(let U=_;U;U=csNodenextSibling.apply(U))V(_)}r.forEachChild=e;function i(_){return t(_)}r.isConnected=i;function n(_,V){let U=[];for(let G of l(_,V))csArray.prototype.push.call(U,G);return U}r.getAncestors=n;let o=(_,V)=>{var U;return(U=csNodeparentNode.apply(_))!==null&&U!==void 0?U:V&&Pi(_)?_.host:null};function c(_,V,U=!1){let G=_;for(;G;){if(V(G))return G;let pt=o(G,U);if(pt&&pt!==G)G=pt;else break}return null}r.findAncestor=c;function*l(_,V=!1){let U=_;for(;U;){yield U;let G=o(U,V);if(G&&G!==U)U=G;else break}}r.walkUp=l;function h(_,V){if(_===V||V.contains(_))return!0;let U=r.getParentElement(_);return U&&U!==_?h(U,V):!1}r.isDescendantOf=h;function f(_){var V;return _.parentElement?_.parentElement:r.getRootNode(_)?(V=r.getRootNode(_))===null||V===void 0?void 0:V.host:null}r.getParentElement=f;function u(_,V=document){let U=Qs(window.csquerySelectorAll[V.nodeType].call(V,_)),G=As.getAllShadowHosts(V);for(let pt of G){let Pt=As.getShadowRoot(pt);if(!Pt)continue;let Te=Qs(window.csquerySelectorAll[Pt.nodeType].call(Pt,_));csArray.prototype.push.call(U,...Te)}return U}r.findAllElements=u,r.getRootNode=(()=>{if("getRootNode"in nn.prototype)return(U,G)=>U.getRootNode(G);function _(U){let G=V(U);return Pi(G)?_(G.host):G}function V(U){return csNodeparentNode.apply(U)!=null?V(csNodeparentNode.apply(U)):U}return(U,G)=>typeof G=="object"&&!!G.composed?_(U):V(U)})();function m(_){return _==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(_)}function y(_){let V=_.getBoundingClientRect();return V.right+bt.windowOffsetX()<0||V.bottom+bt.windowOffsetY()<0}function S(_){var V,U;if(((V=_.checkVisibility)===null||V===void 0?void 0:V.call(_,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!_.offsetParent){if(!_.getBoundingClientRect)return ot.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${_ instanceof nn} Ctor: ${(U=_==null?void 0:_.constructor)===null||U===void 0?void 0:U.name}`),!1;let Pt=_.getBoundingClientRect();if(Pt.width===0&&Pt.height===0)return!0}let G=window.getComputedStyle(_);return G?G.display==="none"||G.visibility==="hidden"||G.visibility==="collapse"||G.opacity==="0"||G.filter==="opacity(0)"||G.width==="0px"&&G.height==="0px"||m(G.color):!0}r.isHiddenByCSS=S;function C(_){if(S(_))return!0;let U=f(_);return U!=null&&C(U)}r.areAncestorsHiddenByCSS=C;function O(_){let V=null,U=_;do if(S(U))V=U;else break;while(U=f(U));return V}r.getTopAncestorHiddenByCSS=O;function v(_){let V=w(_);return V!==null&&!_.contains(V)&&!V.contains(_)}function w(_){let V=_.getBoundingClientRect(),U=V.left+.5*V.width,G=V.top+.5*V.height;return M(document,U,G)}r.getTopElement=w;function P(_){if(!_.getBoundingClientRect)return null;let V=_.getBoundingClientRect(),U=V.x+V.width/2,G=V.y+V.height/2;return r.getTopElementFromPoint(document,U,G)}r.getElementOnTop=P;function M(_,V,U){let G=_.elementFromPoint(V,U);if(!G)return null;let pt=As.getShadowRoot(G);return pt&&pt!==r.getRootNode(document.body)&&pt!==_?M(pt,V,U):G}r.getTopElementFromPoint=M;function T(_){return!y(_)&&!S(_)&&!v(_)}r.isVisibleInDocument=T;function B(_){return S(_)?!1:et(_)}r.isVisibleInViewportInForeground=B;function et(_){let V=w(_);return V===null?!1:_===V?!0:Ft(_)?_.textContent!==""&&V.contains(_):_.contains(V)}r.isInViewPort=et;function at(_,V,U){let G=_.getAttributeNS(V,U);return G===""?_.hasAttributeNS(V,U)?G:null:G}r.getAttributeNS=at;function Bt(_){return!!(_.hasAttribute("tabIndex")||_.getAttribute("contentEditable")==="true"||Zc(_)&&_.hasAttribute("href")||(bo(_)||To(_)||kr(_)||Td(_))&&!_.hasAttribute("disabled")||bd(_)||Rd(_))}r.isElementFocusable=Bt;function Ft(_){return _.localName==="span"||_.localName==="a"||_.localName==="b"||_.localName==="i"||_.localName==="button"||_.localName==="input"||_.localName==="label"||_.localName==="cite"||_.localName==="small"||_.localName==="strong"||_.localName==="code"||_.localName==="abbr"||_.localName==="em"||_.localName==="dfn"||_.localName==="time"||_.localName==="output"||_.localName==="object"||_.localName==="sub"}r.isInlineElement=Ft;function Gt(_){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>_(),{once:!0}):csSetTimeout(_)}r.onDocumentLoaded=Gt}(s||(s={})),s})(),Zd=(()=>{class s{constructor(t){this.UE=t}run(t){let e=[...this.UE],i=nt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.jE(e,o,c,n),this.HE(e),e.length===0)break;i.length===0&&o.host&&(i=nt.getAncestors(o.host,!1),n=i[i.length-1])}}jE(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}HE(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),tf=(()=>{class s extends rl{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.BE(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}BE(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.FE(t.id),t.classList&&(e+=this.GE(csArray.from(t.classList))),t.attributes&&(e+=this.$E(t)),e}FE(t){return t?`#${t};`:""}GE(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}zE(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||ri(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||kr(t)&&e==="value"}qE(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}WE(t){let e={};for(let i of csArray.from(t.attributes))this.zE(t,i.name)||(e[i.name]=i.value);return e}$E(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.WE(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.qE(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),De=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let f=o(c);if(f===document)return{path:"",hierarchy:""};if(!t(f))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let u=new Jd(h),m=new tf(l);return new Zd([u,m]).run(f),{path:u.getPath(),hierarchy:m.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:f,selectionRoot:u}=el(h);return Rr(f,u,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:f,ancestors:u,selectionRoot:m}=kd(h);return{path:Rr(u,m,l),firstAnchorParent:f}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||De;var ol=["t.contentsquare.net","clicktale"],ef=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(ol,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,H.critical(t)}};window.addEventListener("error",ef);var H=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(ol,t)}static setStrategy(t){s.ur=t}static computeIsActive(t){s.$e=Cs.boolean(t),s.$e?s.Qc=Cs.boolean(10):s.Qc=!1}static isLoggingActive(){return s.$e}static getStrategy(){return s.ur}static debug(t,e=""){s.$e&&this.ur.send(t,e,ft.debug)}static warn(t,e=!0,i=""){var n;$.counters.errors.count("warning"),s.$e&&e&&this.ur.send(t,i,ft.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){$.counters.errors.count("implementation"),s.$e&&this.ur.send(t,e,ft.implementation)}static error(t,e=""){var i;$.counters.errors.count("error"),s.$e&&this.ur.send(t,e,ft.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){$.counters.errors.count("critical"),this.ur.send(t,e,ft.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return X(it.Promise)&&n instanceof it.Promise?n.then(o=>o,o=>s.error(Le(o)?o:new Error(o),t)):n}catch(n){try{s.error(Le(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.Qc}}return s.$e=!1,s.Qc=!1,s})();function se(s){return Rt(s,"data:")}function sf(s){return Rt(s,"#")}function rf(s){return!!s&&(ii(s,".css")||Rt(s,"https://fonts.googleapis.com/css"))}var nf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Po=s=>{let r=new Set(nf);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},of=["svg","slot"],af=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(of,s)>-1,al={href:new Set(["a"]),src:new Set(["iframe"])},cf=s=>al.hasOwnProperty(s),lf=(s,r,t)=>{var e;return((e=al[r])===null||e===void 0?void 0:e.has(s))&&!se(t)},hf=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function on(s){return s?uf(s):null}function uf(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var df=/^\d+\.\d+(?:\.\d+)?$/,ff=s=>{if(!df.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},pf=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,gf=(s,r)=>pf(s,r)>=0,mf=1,yf="f553e78fb58e051e51fe8074c4c6e73e",Fn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Cr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),Ef=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,f,u,m,y,S,C,O,v;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||Eo,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(f=t.customErrorsEnabled)!==null&&f!==void 0?f:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=on(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=on(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=on(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(u=t.recordingUrlRules)!==null&&u!==void 0?u:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((m=t.uxaDomain)===null||m===void 0?void 0:m.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(C=t.collectTargetText)!==null&&C!==void 0?C:Fn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(O=t.quotas)!==null&&O!==void 0?O:null,this.startMode=(v=t.startMode)!==null&&v!==void 0?v:Cr.Automatic,this.customEnhancerConfig=t.customEnhancerConfig||null}getTrackerUri(){return`${this.As()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.As()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${yf}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.As()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.As()}://${this.loggerDomain}`}getMetricsUri(){return`${this.As()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.As()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.As()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.As()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.As()}://${this.paProxyDomainUri}`}As(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===mf}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.YE(n,o)}})}YE(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&bs(e)&&csArray.prototype.includes.call(Object.values(Cr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.sf()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.sf())return!0;let t=ff(this.getHeapVersion()||"");if(t&&t.major===4&&gf(t,{major:4,minor:23,patch:5}))return!0}return!1}sf(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Fn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Sf=(()=>{class s{constructor(t,e){this.aa=t,this.rf=e}init(){this.nf=this.aa!==this.aa.top,this.of=this.rf.isWebView&&this.aa===this.aa.top,this.rf.iframesTracking&&this.nf||this.of?this.af=!1:this.af=!0}isInIframeContext(){return this.nf}isTopWindowTracker(){return this.af}isInWebViewContext(){return this.of}}return s})();function ka(){}function Ir(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function vf(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var an=csSymbol("cachedJson");function _f(s){if(s[an])return s[an];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Ps(s[0]);for(let t=1;t<s.length;t++)r+=","+Ps(s[t]);return r+="]"}return s[an]=csJSON.stringify(s)}var Ps=typeof window.Symbol!="undefined"?_f:csJSON.stringify;function cl(s,r){return csArray.prototype.reduce.call(Object.keys(s),(t,e)=>(r(s[e])||(t[e]=s[e]),t),{})}var Oi=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),ll=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Zs=(()=>{class s extends ll{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.Zc(t);let e=Oi.toQuery(t);this.XE(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}XE(t){let e=new window.Image(1,1);e.onload=ka,e.onerror=ka,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}Zc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var wf=(()=>{class s{constructor(t,e){this.Ts=t,this.KE=e}init(){this.bs=new Zs(this.Ts.getLoggerUri()),this.bs.setRequestParametersProviders(this,this.KE)}send(t){this.ca=t,this.bs.send()}getRequestParameters(){return{a:this.ca.app,l:this.ca.level,m:this.ca.message,s:this.ca.stacktrace}}}return s})(),Af=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Tf=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,bf="CS_ANONYMIZED_EMAIL",cn="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Rf=new csRegExp(`(ey${cn}\\.ey${cn}\\.${cn})`,"g"),Cf="CS_ANONYMIZED_JWT",If=/[0-9]{4}/,Pf=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Of="CS_ANONYMIZED_PII",Nf="\u2022",Mf=/\d/g,Df=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,kf=/(?:\d{1,3}\.){3}\d{1,3}/,Lf=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Xe=(()=>{let s;return function(r){function t(f){return csString.prototype.replace.call(f,Af,bf)}r.replaceEmail=t;function e(f){return csString.prototype.replace.call(f,Rf,Cf)}r.replaceJWT=e;function i(f,u){return csString.prototype.replace.call(f,Pf,u)}r.replaceCreditCardNumber=i;function n(f){return csString.prototype.replace.call(f,Mf,Nf)}r.replaceDigits=n;function o(f){return kf.test(f)||Lf.test(f)}r.mayHaveIPAddress=o;function c(f){return Df.test(f)}r.mayHaveNumberSequence=c;function l(f){return If.test(f)}r.mayHaveCreditCardNumber=l;function h(f){return Tf.test(f)}r.mayHaveEmail=h}(s||(s={})),s})(),ni=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.JE(this.tl(t));return e===!0?i=this.QE(i):e===!1&&(i=this.ZE(i)),i}anonymizePII(t){return this.tl(t)}anonymizeJwt(t){return Xe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.tl(t[i])}),t}tl(t){if(Xe.mayHaveEmail(t)){let e=Xe.replaceEmail(t);return e!==t&&$.counters.redactedPII.count("email"),e}return t}QE(t){return Xe.replaceDigits(t)}ZE(t){return Xe.mayHaveNumberSequence(t)?Xe.replaceDigits(t):t}JE(t){return Xe.mayHaveCreditCardNumber(t)?Xe.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.tS(h))return e;$.counters.redactedPII.count("cc")}else $.counters.redactedPII.count("cc-partial");return`${i}${Of}${c}`}):t}tS(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),hl="15.154.4";function Oo(){return{v:hl}}var xf=(()=>{class s{constructor(t,e){this.E=t,this.M=e}getRequestParameters(){return{d:`${D.now()}`,p:this.M.anonymizePII(window.location.href),...this.E.getRequestParameters(),...Oo()}}}return s})(),Vf="uxa",La=5,Uf="No stacktrace",ul="snippet-",dl="implementation-snippet-",xa=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),jf=(()=>{class s{constructor(t,e,i){this.Rs=e,this.M=new ni,this.cf=tn[ft.warn],this.cf=tn[t.minLogLevel||ft.warn],this.bs=i||new wf(t,new xf(t,this.M)),this.lf={[ft.debug]:[],[ft.warn]:[],[ft.implementation]:[],[ft.error]:[],[ft.critical]:[]},this.ha={implementation:{},dynamic:{}},this.bs.init()}send(t,e="",i=ft.warn){if(!this.eS(i,e))return;csArray.prototype.push.call(this.lf[i],e||"");let n={message:this.sS(t,e),stacktrace:this.iS(t),app:Vf,level:i};this.bs.send(n)}sS(t,e){let i=Le(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}iS(t){return Le(t)?`${t.stack||Uf} ${this._n()}`:this._n()}_n(){let t=this.Rs.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.Rs.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}eS(t,e){if(tn[t]<this.cf)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,dl,0))===0)return this.hf(e,xa.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,ul,0))===0)return this.hf(e,xa.DYNAMIC);let i=this.lf[t];return i.length>=La?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}hf(t,e){return t in this.ha[e]?this.ha[e][t]>=La?!1:(this.ha[e][t]+=1,!0):(this.ha[e][t]=1,!0)}}return s})(),kt=!ki&&document.createElement("a"),Hf=/(:443|:80)$/;function he(s){return kt?(kt.href=s,kt.href):""}function Bf(s,r){return new csURL(s,r).href}function Ff(s,r){return csArray.prototype.some.call(r,t=>ii(s,`.${t}`)||s===t||t==="")}function Gf(s){return s[0]==="/"?s:`/${s}`}function Va(s){return csString.prototype.replace.call(s,Hf,"")}function fl(s){return!kt||!Rt(s,"http://")&&!Rt(s,"https://")?null:(kt.href=s,{hash:kt.hash,host:Va(kt.host),hostname:kt.hostname,href:kt.href,origin:kt.origin?kt.origin:Va(`${kt.protocol}//${kt.host}`),pathname:Gf(kt.pathname),port:kt.port,protocol:kt.protocol,search:kt.search})}var Dt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var $f=(()=>{class s{setContext(t,e){this.N=t,this.R=e}getVisitorService(){return this.N}getSessionService(){return this.R}}return s})(),Gn=!1;function zf(){Gn=!0}function ut(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Gn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Gn||e.call(this,i,n)}}}}function qf(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function j(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Wf(){let s=new MutationObserver(r=>{r.forEach(t=>{K(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&($.counters.pureWindowState.count("iframe-deletion"),ot.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Ua(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Yf(){(!Ua(MutationObserver)||!Ua(MutationObserver.prototype.observe))&&$.counters.patchedNativeFunctions.count("MutationObserver")}function Xf(){try{window.CSPureWindow&&Wf(),Yf()}catch{}}var vt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let f=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return f?decodeURIComponent(f[2]):null}r.get=t;function e(l,h,f,u,m,y){let S=encodeURIComponent(`${h}`),C=f===r.CURRENT_DOMAIN?void 0:f,O=i(u),v=O?`;expires=${O.toUTCString()}`:"",w=";path=/",P=yt(C)?`;domain=${C}`:"",M=`${l}=${S}${v}${w}${P}`;return X(m)&&m!==rs.NotSet&&(M=`${M};SameSite=${m}`),X(y)&&y===ge.Yes&&(M=`${M};Secure`),document.cookie=M,!0}r.set=e;function i(l){return _t(l)?new csDate(D.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),rs.None,ge.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let f="_cs_root-domain",u=t(f);if(u!==null&&u!=="1")return u;let m=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(m);for(;m.length&&(u===null||u==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(m),y],"."),e(f,y,y,void 0,l,h),u=t(f);return n(f,y),y}r.getRootDomain=c}(s||(s={})),s})(),Kf=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),rs=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ge=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),xr=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.Oi=i,this.sl=!1,this.uf=rs.NotSet,this.il=ge.No}getSameSiteFlag(){return this.uf}getSecureFlag(){return this.il}getDomain(){return this.rl}getRootDomain(){return this.df}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.rS(),e=this.nS();this.sl=this.oS(t,e),this.sl?(this.uf=t,this.il=e):this.E.secureCookiesEnabled&&this.C.getUrlProtocol()==="https:"&&(this.il=ge.Yes),this.df=this.aS(),this.rl=this.cS(this.df)}oS(t,e){return Kf.browserIsSafariV12()?!1:(vt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),vt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(vt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}rS(){return this.C.getUrlProtocol()==="http:"?rs.Lax:this.Oi.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?rs.None:rs.Lax}nS(){return this.C.getUrlProtocol()==="http:"?ge.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Oi.isSameSiteNoneSecureNeeded()?ge.Yes:ge.No}isSameSiteSupported(){return this.sl}set(t,e,i,n){let o=vt.toExpireDate(i),c=n?ge.Yes:this.getSecureFlag();vt.set(t,e,this.rl,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.rl;vt.remove(t,i)}aS(){let t=this.Oi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?rs.None:void 0,i=t?ge.Yes:void 0;return vt.getRootDomain(e,i)}cS(t){return this.E.allowSubdomains?t:vt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Gs="_cs_t",ja="1",Jf=(()=>{class s{constructor(t,e){this.Rt=t,this.E=e,this.ua=!1,this.da=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.Rt.isTopWindowTracker()&&"cookie"in document){if(!this.Rt.isInIframeContext()&&vt.isCookiePresent()){this.ua=!0,this.da=!1;return}if(vt.set(Gs,ja,vt.CURRENT_DOMAIN),vt.get(Gs)!==null){this.ua=!0,this.da=!1,vt.remove(Gs,vt.CURRENT_DOMAIN);return}vt.set(Gs,ja,vt.CURRENT_DOMAIN,void 0,rs.None,ge.Yes),vt.get(Gs)!==null&&(this.ua=!0,this.da=!0,vt.remove(Gs,vt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.ua}isSameSiteNoneSecureNeeded(){return this.da}}return s})();function Qf(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Zf=(()=>{class s{constructor(t,e){this.E=t,this.Oi=e}canTrack(){return this.E.isProjectActive()&&this.lS()&&this.ff()&&this.hS()}canTrackInChild(){return this.E.isProjectActive()&&this.uS()&&(this.ff()||this.dS())}hS(){return this.E.cookielessTrackingEnabled?Qf():this.Oi.areCookiesEnabled()}ff(){return Ff(window.location.hostname,this.E.hostnames)}lS(){return!this.pf()&&this.fS()}uS(){return!this.pf()&&this.pS()}dS(){return window.location.protocol==="about:"&&window.location.hostname===""}pf(){return"visibilityState"in document&&document.visibilityState==="prerender"}fS(){return this.gf()&&this.gS()}pS(){return this.gf()}gS(){try{return!!window.localStorage}catch{return!1}}gf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),pl=":";function Ha(s){let r=[],t=tp(s),e=csString.prototype.split.call(t,"/");for(let i of e)Rt(i,pl)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function tp(s){let r=s;return Rt(s,"/")&&(r=csString.prototype.substring.call(r,1)),ii(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var ep=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,sp="$1CS_ANONYMIZED_NAME",ip=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.M.anonymizePII(t);if(o=this.M.anonymizeJwt(o),e.maskNames){let h=o;o=this.wn(o),o!==h&&($.counters.redactedPII.count("name"),$.counters.redactedPII.count("name-in-url"))}let c=this.mS(o,i);if(c!==o)return $.counters.redactedPII.count("url"),c;let l=this.yS(o,n);return l!==o&&$.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.nl(t);return i!==""?`${e}?`:e}nl(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}mS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.nl(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.ES(o,c);if(l!==null)return`${l}${n}`}return t}ES(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.mf(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}yS(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.nl(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.SS(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}SS(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],f=e[n].key;if(this.mf(f)&&l>=c){let u=e[n].value;csArray.prototype.push.call(i,h.length>0?u:""),n++,n===e.length&&(n=0);continue}if(h===f){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let u=0;u<n;u++){let m=l-n+u;i[m]=t[m]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}mf(t){return Rt(t,pl)}wn(t){return csString.prototype.replace.call(t,ep,sp)}}return s})(),rp="spki",Ba="RSA-OAEP",np="SHA-256",Fa="AES-CTR",op="SHA-1",Ga=190,_i=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=it.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function f(){var M,T;return((T=(M=it.self.crypto)===null||M===void 0?void 0:M.subtle)===null||T===void 0?void 0:T.encrypt)!=null&&it.self.CryptoKey!=null}r.isSupported=f;async function u(M){n=r.crypto.importKey(rp,$c(M),{name:Ba,hash:np},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||ot.warn(`Fail to import public key '${M}'`)}r.importKey=u;async function m(M){if(!f()||e)return null;await n;let T=yo(M);T.byteLength>Ga&&(T=T.slice(0,Ga));try{let B=await r.crypto.encrypt({name:Ba},i,T);return _a(B)}catch{return null}}r.asymmetricEncrypt=m;async function y(M,T){if(!f()||e)return null;let B={counter:T.initializationVector,name:Fa,length:64},et=o.encode(M);try{let at=await r.crypto.encrypt(B,T.cryptoKey,et);return _a(at)}catch{return null}}r.symmetricEncrypt=y;async function S(M){let T=await C(M);if(!T)throw new Error("Export secret failed");let B=await m(T);if(!B)throw new Error("Encrypt secret failed");return B}r.encryptSecret=S;async function C(M){var T;if(!f())return null;try{return(T=(await r.crypto.exportKey("jwk",M)).k)!==null&&T!==void 0?T:null}catch{return null}}async function O(){if(!f()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:Fa,length:128},!0,["encrypt","decrypt"]),initializationVector:it.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=O;function v(M){c=M}r.setDigestSalt=v;async function w(M){M=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(M)),c&&(M=`${M}:${c}`);let T=o.encode(M);try{let B=await r.crypto.digest(op,T);return xn(B)}catch{return null}}r.digest=w;function P(){return it.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=P}(s||(s={})),s})(),Ie=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ke=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),ys=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),No=(()=>{class s{constructor(){this.ol=[]}setRegexRules(t){this.ol=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.vS(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.ol,e=>this.yf(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.ol,e=>this.yf(t,e)),e=>e.ruleInput)}yf(t,e){var i,n;let o=this._S(t,e);return!this.wS(e)||!this.AS(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}wS(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}AS(t){let e=t.samplingRate!==100,i=e&&Cs.boolean(t.samplingRate);return!e||i}fa(t){return!Rt(t,"http://")&&!Rt(t,"https://")?`https://${t}`:t}_S(t,e){let i=fl(this.fa(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}pa(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}vS(t){let e=null,i=!1;switch(t.operator){case Ke.NOT_START:case Ie.NOT_START:i=!0;case Ke.START:case Ie.START:e=new csRegExp(`^${t.value}`,this.pa(t));break;case Ke.NOT_END:case Ie.NOT_END:i=!0;case Ke.END:case Ie.END:e=new csRegExp(`${t.value}$`,this.pa(t));break;case Ke.NOT_CONTAIN:case Ie.NOT_CONTAIN:i=!0;case Ke.CONTAIN:case Ie.CONTAIN:case Ie.REGEX:e=new csRegExp(`${t.value}`,this.pa(t));break;case Ke.NOT_EXACT:case Ie.NOT_EXACT:i=!0;case Ke.EXACT:case Ie.EXACT:e=new csRegExp(`^${t.value}$`,this.pa(t));break;default:ot.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Ef(t.startDate):void 0,o=t.endDate?this.Ef(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}Ef(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),Mo=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),wi="|iframe|",ap=(()=>{class s extends Mo{constructor(t,e,i,n){super(),this.TS=t,this.bS=e,this.RS=i,this.CS=n}emitIframeEvent(t,e,i){if(this.IS(e)&&t===null){H.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Dt.ChildLogMessage:this.PS(i);break;case Dt.AnalysisEvent:{let n=i,o=this.TS.transformEvent(t,n);o.isUserEvent?this.OS(o.event):this.NS(o.event);break}case Dt.RecordingEvent:{let n=i,o=this.CS.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.MS(o.events):this.DS(o.events);break}case Dt.JavascriptError:this.kS(i);break;case Dt.ApiError:this.LS(i);break;case Dt.DetailedApiError:this.xS(i);break;case Dt.CustomError:this.VS(i);break;case Dt.EmerchandisingMessage:{let n=this.RS.transformEvent(t,i);this.US(n);break}case Dt.Commands:{let n=this.bS.transformEvent(t,i);this.jS(n);break}case Dt.IntegrationCallback:this.HS(i);break;case Dt.StaticResource:this.BS(i);break;case Dt.TrackingContextRequestMessage:this.FS(i);break;default:H.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}IS(t){let e=[Dt.AnalysisEvent,Dt.RecordingEvent,Dt.EmerchandisingMessage,Dt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}PS(t){let{message:e,errorCode:i,level:n}=t;switch(n){case ft.debug:H.debug(e,i);break;case ft.warn:H.warn(e,!0,i);break;case ft.implementation:H.implementation(e,i);break;case ft.error:H.error(e,i);break;case ft.critical:H.critical(e,i);break}}OS(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}NS(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}MS(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}DS(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}kS(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}LS(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}xS(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}US(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}jS(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}HS(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}BS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}FS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}VS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),q=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),ln=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),ns=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function cp(s){return s.tgtHM!==void 0}function gl(s){return s.tgt!==void 0}function lp(s){return s.tgtLk!==void 0}function hp(s){return s.x!==void 0&&s.y!==void 0}function up(s){return s===ln.SUCCESS||s===ln.FAILURE||s===ln.ATTEMPT}function dp(s){return s===ns.APPCUES||s===ns.CHAMELEON||s===ns.CONTENTSQUARE||s===ns.SEGMENT||s===ns.WEB}var fp=Math.pow(2,31);function pp(s,r=0){let l=r>>>0,h=s.length;for(let y=0;y<h-3;y+=4){let S=(csString.prototype.charCodeAt.call(s,y)&255|(csString.prototype.charCodeAt.call(s,y+1)&255)<<8|(csString.prototype.charCodeAt.call(s,y+2)&255)<<16|(csString.prototype.charCodeAt.call(s,y+3)&255)<<24)>>>0;S=Math.imul(S,3432918353),S=S<<15|S>>>17,S=Math.imul(S,461845907),l^=S,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let f=0,u=h&3,m=h-u;switch(u){case 3:f^=(csString.prototype.charCodeAt.call(s,m+2)&255)<<16;case 2:f^=(csString.prototype.charCodeAt.call(s,m+1)&255)<<8;case 1:f^=csString.prototype.charCodeAt.call(s,m)&255,f=Math.imul(f,3432918353),f=f<<15|f>>>17,f=Math.imul(f,461845907),l^=f}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function ml(s){return pp(s)+fp>>>0}var gp=(()=>{class s{constructor(t,e,i){this.Q=t,this.Sf=e,this.vf=i}transformEvent(t,e){this.GS(t,e.event);let i=this.Q.getElementPath(t);return this.$S(i,e.event),this.zS(e.event),e}GS(t,e){if(hp(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+bt.windowOffsetX()),e.y=Math.round(i.top+e.y+bt.windowOffsetY())}}$S(t,e){gl(e)&&(e.tgt=`${t}${wi}${e.tgt}`),cp(e)&&(e.tgtHM=`${t}${wi}${e.tgtHM}`,this.Sf||(e.tgtHMH=ml(e.tgtHM))),lp(e)&&(e.tgtLk=`${t}${wi}${e.tgtLk}`)}zS(t){!this.Sf&&this.vf&&this.vf.enhanceAnalysisEvent(null,t)}}return s})(),mp=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){let i=this.Q.getElementPath(t);return{iframePath:e.iframePath?`${i}${wi}${e.iframePath}`:i,commands:e.commands}}}return s})(),yp=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Q.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${wi}${o.targetPath}`}));return{...e,products:n}}}return s})(),Ep=1,$a=csSymbol("nodeIdentifier");function z(s){let r=s[$a];return r!=null?r:s[$a]=Ep++}var x=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var gi=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Sp=(()=>{class s{constructor(){this.qS={clientX:2,clientY:3},this.WS={clientX:1,clientY:2},this.YS=[x.POINTER_DOWN,x.POINTER_MOVE,x.POINTER_UP],this.XS=[x.TOUCH_START,x.TOUCH_MOVE,x.TOUCH_END]}transformEvents(t,e){if(!nt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==x.VISIBILITY_CHANGE),e.events.length===0||(H.warn(`IframeRecordingEventsTransformer received event ${Dt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=z(t),n=null;csArray.prototype.some.call(e.events,c=>this._f(c)||this.wf(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this._f(c)?this.KS(n,c):this.wf(c)&&this.JS(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}JS(t,e){this.Af(this.WS,t,e)}KS(t,e){this.Af(this.qS,t,e)}Af(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}_f(t){return csArray.prototype.indexOf.call(this.YS,t.type)!==-1}wf(t){return csArray.prototype.indexOf.call(this.XS,t.type)!==-1}}return s})(),vp=(()=>{class s{constructor(t,e){this.S=t,this.mt=e}init(){this.mt.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})(),Lt=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})();var Ut=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),_p=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),wp=(()=>{class s extends Ut{constructor(t){super(),this.al=t,this.cs={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return $.counters.commandApplied.count(n),l}catch(l){l instanceof Lt?($.counters.commandMisuse.count(n),H.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Le(l)?l.stack:l}`)):($.counters.commandError.count(n),H.error(`Command Error - ${n}: ${Le(l)?l.stack:l}`))}};this.cs[n]={callback:o,configuration:i},this.cs}}onStart(){this.QS(),this.ZS()}onStop(){for(let t of this.al)window[t]=[]}applyFromIntegration(t,e,i){this.Tf(t,e,`Commands.apply.from.integration: ${i}`),$.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Tf(t,e,`Commands.apply.from.implementation: ${i}`),$.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.sv(e.name,e.params,t.iframePath),$.counters.commandsFromIframe.count(e.name)}Tf(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}H.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}sv(t,e,i){H.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}QS(){for(let t of this.al)window[t].forEach(([e,...i])=>this.bf(e,i,!1))}ZS(){for(let t of this.al)window[t]={push:([e,...i])=>this.bf(e,i,!0)}}bf(t,e,i){var n,o;if(this.cs[t]){if(((n=this.cs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.cs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){H.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Ap=(()=>{class s extends Mo{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:q.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function Tp(s){return csNodenodeType.apply(s)===1}function Ct(s){let r=csEventtarget.apply(s);return r&&Tp(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function bp(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Rp(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(Ct(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Cp=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Ip=1024,Pp=1024,hn;function xt(s){if(hn||(hn=document.createElement("div")),!(!!s&&b(s)))return ot.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Jt.call(hn,s),!0}catch{return ot.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function ti(s,r){if(Na)return Na.call(s,r);let t=s;do{if(Jt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function Ys(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=Ys(s[t]);return r}default:return s}}function yl(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function El(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?Ys(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=El(n,o);h!==void 0&&(t[i]=h)}else t[i]=Ys(o)}return yl(t)?t:void 0}function Sl(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Sl(n,o):t[e]=o}return t}function Op(s){let r=null;return t=>t?r=t:r||(r=s())}var Np=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function Mp(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Np.has(s)}var $s=Op(()=>new WeakMap),Ai=(()=>{let s;return function(r){function t(c){return $s().get(c)}r.getAll=t;function e(c,l){var h;return(h=$s().get(c))===null||h===void 0?void 0:h[l]}r.get=e;function i(c,l,h){let f=$s().get(c);f||$s().set(c,f={}),f[l]=h}r.set=i;function n(c,l){let h=$s().get(c);h&&delete h[l]}r.remove=n;function o(){$s(new WeakMap)}r.reset=o}(s||(s={})),s})(),rt=(()=>{let s;return function(r){function t(l,h,f){var u;if(typeof Node!="undefined"&&l instanceof Node)Ai.set(l,h,f);else{let m=l;(u=m.props)!==null&&u!==void 0||(m.props={}),m.props[h]=f}}r.setProperty=t;function e(l,h){var f;return typeof Node!="undefined"&&l instanceof Node?Ai.get(l,h):(f=l.props)===null||f===void 0?void 0:f[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?Ai.getAll(l):l.props}r.getProperties=i;function n(l,h){let f=null;return o(l,(u,m,y)=>h(u)&&(f=u)&&!!y()),f}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,f){let u=!1;if(f(l,h,()=>u=!0),u)return;let y=l.shadowRoot;y&&c(y,l,f);let S=l.children;if(S!=null&&S.length){for(let C of S)if(C&&(c(C,l,f),u))break}}}(s||(s={})),s})(),L=(()=>{let s;return function(r){let t;(function(v){v[v.NotMasked=0]="NotMasked",v[v.Parent=1]="Parent",v[v.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(v){return Rs(v)&&"Attributes"in v&&"PIISelectors"in v?v.Attributes instanceof Array&&v.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(v){if(!Rs(v)||v===null)throw new Lt("setPIISelectors");return"Attributes"in v||(v.Attributes=[]),"PIISelectors"in v||(v.PIISelectors=[]),v}r.sanitizeSelectorUserInput=i;function n(v){var w,P,M;return"nodeType"in v?(w=rt.getProperty(v,r.maskedProp))!==null&&w!==void 0?w:{state:t.NotMasked}:(M=(P=v.metadata)===null||P===void 0?void 0:P[r.maskedProp])!==null&&M!==void 0?M:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(v){var w,P,M;return"nodeType"in v?(w=rt.getProperty(v,r.maskedAttributeProp))!==null&&w!==void 0?w:{attributes:[]}:(M=(P=v.metadata)===null||P===void 0?void 0:P[r.maskedAttributeProp])!==null&&M!==void 0?M:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(v){let w=rt.getProperty(v,r.maskedProp);return(w==null?void 0:w.state)===t.Parent}r.isMaskedElement=c;function l(v){let w=rt.getProperty(v,r.maskedProp);return(w==null?void 0:w.state)===t.Child}r.isMaskedElementChild=l;function h(v,w){let P=rt.getProperty(v,r.maskedAttributeProp);return((P==null?void 0:P.attributes)==null?void 0:csArray.prototype.indexOf.call(P==null?void 0:P.attributes,w))>-1}r.isMaskedAttribute=h;function f(v,w){rt.setProperty(v,r.maskedProp,w)}r.setMaskedElementProperty=f;function u(v){rt.setProperty(v,r.maskedProp,void 0)}r.unsetMaskedElementProperty=u;function m(v,w){rt.setProperty(v,r.maskedAttributeProp,w)}r.setMaskedAttributeProperty=m;function y(v,w){let P=csArray.prototype.filter.call(v.PIISelectors,B=>xt(B));w.elementSelector.length>0&&csArray.prototype.push.call(P,...csString.prototype.split.call(w.elementSelector,","));let M=O([...P]),T={elementSelector:csArray.prototype.join.call(M,","),attrSelector:w.attrSelector,attrSelectors:w.attrSelectors};return csArray.prototype.forEach.call(v.Attributes,B=>{B!=null&&B.attrName&&(B!=null&&B.selector)&&xt(B.selector)&&!S(T.attrSelectors,B)&&csArray.prototype.push.call(T.attrSelectors,B)}),T.attrSelector=C(T.attrSelectors),T}r.getComputedSelectorSettings=y;function S(v,w){return csArray.prototype.some.call(v,P=>P.selector===w.selector&&P.attrName===w.attrName)}function C(v){let w="";return csArray.prototype.forEach.call(v,P=>{let M=csString.prototype.split.call(P.selector,",");csArray.prototype.forEach.call(M,T=>{xt(T)&&(w&&(w+=","),w+=T)})}),w}function O(v){if(v.length<=1)return v;let w=[];for(let P of v){let M=csString.prototype.split.call(P,",");for(let T of M)csArray.prototype.indexOf.call(w,T)===-1&&csArray.prototype.push.call(w,T)}return w}}(s||(s={})),s})(),Dp=(()=>{class s{constructor(t,e){this.yt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=Ct(t),n={isNodeSensitive(o){return L.isMaskedElement(o)||L.isMaskedElementChild(o)},isAttributeSensitive(o,c){return L.isMaskedAttribute(o,c)},allWhitelistedAttributes:Po(this.E.whitelistedAttributes),attributeIgnoreTokens:Cp,useAnonymization:e,attrMaxLength:Pp,hierarchyMaxLength:Ip};return this.yt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=Ct(t);return this.yt.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Ct(t),{path:i,firstAnchorParent:n}=this.yt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.iv(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Ct(t);return this.yt.isValidElement(e)}getElementPath(t){return this.yt.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}iv(t){var e;return t!==null&&t.hasAttribute("href")&&!Ir((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function Vr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=D.now(),o=null,l=s.apply(i,n),n=[],i=null},f=function(...u){if(i=this!==null&&this!==void 0?this:it,n=[...u],e==="trailing")return o||(o=it.csSetTimeout(h,t)),l;let m=D.now(),y=t-(m-c);return y<=0||y>t?(c=m,l=s.apply(i,n),o?(it.csClearTimeout(o),o=null):n=[]):o||(o=it.csSetTimeout(h,y)),l};return f.cancel=()=>{o&&(it.csClearTimeout(o),c=0,o=null,n=[])},f.flushPending=()=>{o&&(it.csClearTimeout(o),h())},f}var Ur=s=>(r,t,e)=>{e.value=Vr(e.value,s)};var Pr=".",Do="__DOT__",kp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,vl="x";function Lp(s){let[r,t,e,i,n,o,c,l,h]=Hp(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===vl?null:h}}function xp(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:vl],csString),Up),Pr)}function Vp(s){return kp.test(s)}function Up(s){return csString.prototype.replace.call(s,/\./g,Do)}function jp(s){return csString.prototype.replace.call(s,new csRegExp(Do,"g"),Pr)}function Hp(s){return csString.prototype.indexOf.call(s,Do)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Pr),jp):csString.prototype.split.call(s,Pr)}var k=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function Bp(s){return s===k.RECORDING_GLOBAL_SAMPLING||s===k.RECORDING_RULES_TARGETING||s===k.RECORDING_URL_SAMPLING||s===k.RECORDING_ETR_SAMPLING}var Fp={[k.RECORDING_RULES_TARGETING]:k.RECORDING_GLOBAL_SAMPLING},re=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),as=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),ee=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),$n=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var Gp=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),_l=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,wl=".";function $p(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],wl)}function zp(s){if(!ko(s))return null;let r=zn(s);return r!==null?Al(r):null}function Al(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,wl);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:$n.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Gp.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function ko(s){return _l.test(s)}function zn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,_l))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Pe="_cs_ex",za=2592e6,qp=/^[0-9]+$/,Wp=(()=>{class s{constructor(t,e,i){this.E=t,this.D=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){return this.E.cookielessTrackingEnabled?Number(this.K.getItem(Pe)):Number(this.D.get(Pe))}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(Pe,t):(this.D.set(Pe,t,za),(e=this.Ni)===null||e===void 0||e.call(this,Pe,t,za))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Pe):(this.D.delete(Pe),(t=this.Mi)===null||t===void 0||t.call(this,Pe))}static isValidExclusionString(t){return qp.test(t)}}return s})(),Je="_cs_cvars",Yp=(()=>{class s{constructor(t,e,i){this.E=t,this.D=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){return this.E.cookielessTrackingEnabled?this.K.getItem(Je):this.D.get(Je)}set(t){var e;this.E.cookielessTrackingEnabled?this.K.setItem(Je,t):(this.D.set(Je,t),(e=this.Ni)===null||e===void 0||e.call(this,Je,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(Je):(this.D.delete(Je),(t=this.Mi)===null||t===void 0||t.call(this,Je))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var Xp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.gl=i,this.ml=n,this.ls=o,this.lv=c,this.Tn=l}start(){this.w.addListener(this.lv),this.w.addListener(this.Tn),this.w.addListener(this.gl),this.Tn.init(),this.ml.init(),this.ls.init(),!this.ls.isActive()&&this.S.start()}}return s})(),Kp=(()=>{class s{constructor(t){this.Cs=t}onOptout(){this.Cs.removeExclusion()}}return s})(),Jp=(()=>{class s{constructor(t,e){this.Lt=t,this.ft=e}exclude(t){this.ft.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ft.remove()}isExcluded(){return this.hv()||this.uv()}hv(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ft.get()}uv(){return csString.prototype.indexOf.call(this.Lt.href,Pe)>0}}return s})(),Tl=["excludeURLforReplay"],Qp=(()=>{class s{constructor(t,e){this.Cs=t,this.S=e}init(){this.S.register(Tl,t=>{if(b(t))this.Cs.setExcludeUrlForSessionReplay(t);else throw new Lt("excludeURLforReplay")})}}return s})(),un=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),Zp=".^",bl=".*",tg=(()=>{class s{constructor(t){this.C=t,this.yl=new csRegExp(`${Zp}`)}setExcludeUrlForSessionReplay(t){try{this.yl=new csRegExp(t)}catch{H.warn(`excludeURLforReplay - invalid regex '${t}'`),this.yl=new csRegExp(`${bl}`)}}Lf(){return this.yl.test(this.C.getAnonymizedUrl())?un.SessionReplay:un.None}isUrlExcludedForSessionReplay(){return this.Lf()===un.SessionReplay}getRequestParameters(){return{ex:this.Lf()}}}return s})();var qa=1/0,{toString:eg}=Object.prototype;function sg(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":eg.call(s)}var Lo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&sg(s)==="[object Symbol]";function Rl(s){if(typeof s=="string"||Lo(s))return s;let r=`${s}`;return typeof s=="number"?r==="0"&&1/s===-qa?"-0":r:s instanceof Number&&r==="0"&&1/s.valueOf()===-qa?"-0":r}var ig=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rg=/^\w*$/;function ng(s,r){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||Lo(s)?!0:rg.test(s)||!ig.test(s)||r!=null&&s in Object(r)}function xo(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(xo.Cache||Map),t}xo.Cache=Map;var og=500;function ag(s){let r=xo(s,t=>{let{cache:e}=r;return e.size===og&&e.clear(),t});return r}var cg=46,lg=/\\(\\)?/g,hg=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Cl=ag(s=>{let r=[];return csString.prototype.charCodeAt.call(s,0)===cg&&csArray.prototype.push.call(r,""),csString.prototype.replace.call(s,hg,(t,e,i,n)=>{let o=t;return i?o=csString.prototype.replace.call(n,lg,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(r,o),t}),r});function ug(s,r){return csArray.isArray(s)?s:ng(s,r)?[s]:Cl(s)}function dg(s,r){let t=ug(r,s),e=s,i=0,{length:n}=t;for(;e!=null&&i<n;){let o=Rl(t[i]);e=e[o],i+=1}return i&&i===n?e:void 0}function fg(s){return"iterable"in s}function Il(s){return X(s.iterable)?b(s.iterable)||s.iterable===null:!0}function Pl(s,r,t){let e=s==null?void 0:dg(s,r);return e===void 0?t:e}var pg=/\b__p \+= '';/g,gg=/\b(__p \+=) '' \+/g,mg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yg=/['\n\r\u2028\u2029\\]/g,Ol=/[&<>"']/g,Eg=csRegExp(Ol.source),Sg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ar=/($^)/,vg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_g=/[()=,{}[\]/\s]/,wg=/<%-([\s\S]+?)%>/g,Ag=/<%([\s\S]+?)%>/g,Nl=/<%=([\s\S]+?)%>/g,{hasOwnProperty:Wa}=Object.prototype,Tg="Invalid `variable` option passed into `_.template`";function bg(s){return`\\${vg[s]}`}var Rg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cg={escape:wg,evaluate:Ag,interpolate:Nl,variable:"",imports:{_:{template:yr,escape(s){return s&&Eg.test(s)?csString.prototype.replace.call(s,Ol,r=>Rg[r]):s!=null?s:""}}}};function yr(s,r){let t={...Cg,...r},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,S=>t==null?void 0:t.imports[S]),n,o,c=0,l=t.interpolate||ar,h="__p += '",f=csRegExp(`${(t.escape||ar).source}|${l.source}|${(l===Nl?Sg:ar).source}|${(t.evaluate||ar).source}|$`,"g"),u=`//# sourceURL=${Wa.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,f,(S,C,O,v,w,P)=>{let M=O||v;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,P),yg,bg),C&&(n=!0,h+=`' +
__e(${C}) +
'`),w&&(o=!0,h+=`';
${w};
__p += '`),M&&(h+=`' +
((__t = (${M})) == null ? '' : __t) +
'`),c=P+S.length,S}),h+=`';
`;let m=Wa.call(t,"variable")&&t.variable;if(!m)h=`with (obj) {
${h}
}
`;else if(_g.test(m))throw new Error(Tg);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,pg,""):h,gg,"$1"),mg,"$1;"),h=`function(${m||"obj"}) {
${m?"":`obj || (obj = {});
`}var __t, __p = ''${n?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let y;try{y=Function(...e,`${u}return ${h}`)(...i)}catch(S){y=S}if(y.source=h,y instanceof Error)throw y;return y}var Ig=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,Pg=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,Og=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function Ya(s){if(!Ig.test(s)||Pg.test(s))throw new Error("whitelisted function is wrongly used")}var Xa={"window.location.hash.replace(":(s,r)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return Ya(t),yr(`\${${s}}`)(r)},"window.sessionStorage.getItem(":(s,r)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return Ya(t),yr(`\${${s}}`)(r)},"document.querySelector(":(s,r)=>{if(Og.test(s))return yr(`\${${s}}`)(r)},"new Date().getTime()":(s,r)=>new csDate().getTime().toString()};function Ng(s){let r=Ms(Object.keys(Xa),t=>Rt(s,t));if(r)return Xa[r]}function Mg(s){return Rt(s,"'")&&ii(s,"'")}var Dg=/\$\{([\s\S]+?)\}/g,kg=s=>(r,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),n=>{let o=csString.prototype.trim.call(n),c=Pl(s,o);if(c===void 0)if(Mg(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=Ng(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function ei(s,r){try{return csString.prototype.replace.call(s,Dg,kg(r))}catch{return null}}function qn(s,r){let t={};for(let e of Object.keys(s)){let i=s[e];if(b(i)){let n=ei(i,r);if(n===null)return null;t[e]=n}else t[e]=i}return t}function Wn(s,r){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>ei(e,r)),e=>e!==null&&xt(e)),",");return xt(t)?t:null}function Lg(s){return csArray.isArray(s)?csArray.prototype.map.call(s,Rl):Lo(s)?[s]:csArray.from(Cl(s))}function xg(s,r){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],n=e[2],o=Pl(r,Lg(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&n in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function Vg(s,r){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);return n<=i||n>r.length?null:csArray.prototype.slice.call(r,i,n)}function Ug(s,r){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=xg(csString.prototype.trim.call(t[0]),r);return t.length===2?e===null?null:Vg(csString.prototype.trim.call(t[1]),e):e}var dn=(()=>{let s;return function(r){r.AND="AND",r.OR="OR"}(s||(s={})),s})(),le=(()=>{let s;return function(r){r.STARTS_WITH="startsWith",r.EQUALS="equals",r.NOT_EQUALS="notEquals",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.MATCHES="matches",r.NOT_MATCHES="notMatches",r.EXIST="exist",r.NOT_EXIST="notExist"}(s||(s={})),s})();function Ml(s,r){return jg(s.operator,Gg(s.args,r))}function jg(s,r){switch(s){case le.EXIST:case le.NOT_EXIST:return Hg(s,r);default:return Bg(s,r)}}function Hg(s,r){let[t]=r;if(!xt(t))return!1;switch(s){case le.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case le.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function Bg(s,r){let[t,e]=r;if(!(s in dn)&&!(b(t)&&b(e)))return!1;switch(s){case dn.AND:return!!csArray.prototype.reduce.call(r,(n,o)=>n&&o);case dn.OR:return!!csArray.prototype.reduce.call(r,(n,o)=>n||o);case le.STARTS_WITH:return Rt(t,e);case le.EQUALS:return t===e;case le.NOT_EQUALS:return t!==e;case le.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case le.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case le.MATCHES:{let n=Ka(e);return n!==null&&n.test(t)}case le.NOT_MATCHES:{let n=Ka(e);return n!==null&&!n.test(t)}default:return!1}}function Fg(s){return!!(s&&s.operator&&s.args)}function Gg(s,r){return csArray.prototype.map.call(s,t=>Fg(t)?Ml(t,r):b(t)?ei(t,r):t)}function Ka(s){let r=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(r){let[,e,i]=r;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}var Ni=(()=>{class s{constructor(...t){this.jf=t}addProvider(t){csArray.prototype.push.call(this.jf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.jf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),$g=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function zg(){return{la:$g}}var vs=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),ws=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),qg=(()=>{class s extends Ut{constructor(t,e,i,n,o,c){super(),this.E=t,this.w=e,this.J=i,this.Rl=n,this.C=o,this.hs=c,this.ya=null}init(){this.wv()}onStart(t=ws.Natural){switch(t){case ws.Natural:this.Av();break;case ws.Artificial:this.Tv();break;case ws.Renewal:this.bv();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Cl(t,e)):(yt(t)&&this.C.overridePath(t,e),this.J.emitTargetingRulesArtificialPageview(this.C.getUrl()),this.E.hasTargetingRules()&&this.C.cleanupOverrideLifespan())}Av(){this.hs.setPageViewType(vs.Natural);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Rl.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(vs.Natural),this.ya=t}bv(){this.hs.setPageViewType(vs.Renewal);let t=this.C.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Rl.send(),this.w.emitAfterNaturalPageView(vs.Renewal),this.ya=t}Cl(t,e,i=!1){yt(t)&&this.C.overridePath(t,e);let n=this.C.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.ya,n),this.hs.setPageViewType(vs.Artificial),this.Rl.send(),this.C.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.ya=n}Tv(){this.Cl(null,void 0,!0)}wv(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Cl())})}}return s})(),Wg=(()=>{class s{constructor(){this.Il=vs.Natural}setPageViewType(t){this.Il=t}getPageViewType(){return this.Il}getRequestParameters(){return{pvt:this.Il}}}return s})();var Yg=99999,Xg=(()=>{class s{constructor(t){this.R=t,this.Rv=this.Cv()&&window.CSCurrentScript}Iv(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Pv(e)?null:Math.round(e.responseEnd-e.fetchStart)}Pv(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Rv||this.Ov()!==1)return{};let t=this.Iv();return t===null?{}:{dt:`${Math.min(t,Yg)}`}}Ov(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Cv(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Dl=["trackPageview"],Yn=["setPath"],Xn=["setQuery"],Ja=["referrer:maskUrl"],Kg=["referrer:removeQueryString"],Jg=["referrer:keepQueryString"],fn=s=>Rs(s)&&s!==null,Qg=(s,r,t,e)=>{s.register(Dl,(i,n)=>{if(!b(i)){r.triggerArtificialPageView();return}fn(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(Yn,(i,n)=>{if(!b(i))throw new Lt(Yn[0]);fn(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(Xn,(i,n)=>{if(!b(i))throw new Lt(Xn[0]);fn(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(Ja,i=>{if(!b(i))throw new Lt(Ja[0]);e.addUrlMaskingPattern(i)}),s.register(Kg,()=>e.enableRemoveQueryString()),s.register(Jg,()=>e.disableRemoveQueryString()))};var Zg=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,S,C,O){this.E=t,this.S=e,this.w=i,this.Ue=n,this.N=o,this.R=c,this.Os=l,this.Ct=h,this.At=f,this.C=u,this.qt=m,this.hs=y,this.J=S,this.fe=C,this.fr=O}init(){let t=new Zs(this.E.getTrackerUri(),"pageview");this.Ps=new qg(this.E,this.w,this.J,t,this.C,this.hs),this.Ps.init();let e=new Ni(this.Ue,this.N,bt,this.Os,this.C,this.Ct,go,this.At,this.hs,new Xg(this.R),this.qt);this.fe&&e.addProvider(this.fe),this.fr&&e.addProvider(this.fr);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}t.setRequestParametersProviders(e),Qg(this.S,this.Ps,this.C,this.Os)}start(t){this.Ps.start(t)}stop(){this.Ps.stop()}onBeforeSessionRenewal(){this.Ps.stop()}}return s})();function Vo(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function Uo(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var wt=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Ui=(()=>{class s extends wt{}return s})(),kl=(()=>{class s extends wt{validateArgs(t){if(Y(t)){let e=X(t.path)?b(t.path):!0,i=X(t.decodeURI)?b(t.decodeURI):!0,n=X(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&n}return!1}execute(t){if(!t.path)this.bn([]);else{let e=[t.path],i=Vo(t.decodeURI),n=Uo(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.bn(e)}}bn(t){this.commandsService.applyFromImplementation(Dl[0],t,"ArtificialPageviewTemplate")}}return s})(),Ll=["trackError"],tm=(()=>{class s extends Ui{validateArgs(t){return Y(t)?b(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=ei(t.message,e);if(!i)return;let n={};for(let o of t.attributes){let c=ei(o.value,e);c!==null&&(n[o.key]=c)}this.commandsService.applyFromImplementation(Ll[0],[i,n],"CustomErrorTemplate")}}return s})(),jo=["setCustomVariable"],em=(()=>{class s{constructor(t,e){this.S=t,this.At=e}init(){this.S.register(jo,(t,e,i,n)=>{this.At.set(t,e,i,n)})}onAfterArtificialPageView(){this.At.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.At.deleteNextPageOnlyCustomVariables()}onOptout(){this.At.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.At.removeCustomVariablesSession(),this.At.removeCustomVariablesPage()}}return s})(),sm=(()=>{class s extends wt{validateArgs(t){if(Y(t)){let e=Il(t),i=csArray.isArray(t.scope)?_o(t.scope,n=>b(n)):!0;return e&&i&&_t(t.index)&&b(t.name)&&b(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(jo[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),xl=["setEncryptionSelectors"],Ho=["setPIISelectors"],Vl=["setCapturedElementsSelector"],im=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.lt=i,this.re=n,this.Wt=o,this.ht=c,this.pr=l}init(){var t,e;this.pr&&this.ht&&((t=this.pr)===null||t===void 0||t.addSelector((e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ut()}onStartTracking(t){this.re.start(),this.w.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.re.stop(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.re.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.re.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.re.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ut(){this.S.register(Ho,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(Vl,t=>{this.Wt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(xl,t=>{var e,i;(e=this.ht)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.pr)===null||i===void 0||i.addSelector(t)})}}return s})(),rm=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(xl[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),nm="data-cs-override-id",om=(()=>{class s extends wt{validateArgs(t){if(Y(t)){let e=yt(t.value)?b(t.value):!0;return b(t.selector)&&e}return!1}execute(t){var e;if(!xt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(nm,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),am=512,cm=255,pn=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,am),this.value=b(e)?csString.prototype.slice.call(e,0,cm):e}static isKeyValid(t){return b(t)}static isValueValid(t){return b(t)||bs(t)}}return s})(),lm=(()=>{class s extends Ut{constructor(t,e){super(),this.Yt=t,this.M=e,this.Pl=[]}onStart(){csArray.prototype.forEach.call(this.Pl,t=>this.Hf(t.key,t.value)),this.Pl=[]}onStop(){}Hf(t,e){let i=this.M.anonymizePII(t),n=bs(e)?e:this.M.anonymizePII(e);this.Yt.add(new pn(i,n))}trackDynamicVariable(t,e){if(pn.isKeyValid(t)&&pn.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Pl,{key:t,value:e});return}this.Hf(t,e)}else throw new Lt(Bo[0])}}return s})(),hm=(()=>{class s{constructor(t){this.pe=t,this.Yt=[]}add(t){csArray.prototype.push.call(this.Yt,t),this.setBatchReadyCall()}clear(){this.Yt=[]}onBatchReady(t){this.Nv=t}getRequestParameters(){let t={};for(let e of this.Yt)t[e.key]=e.value;return{dv:this.pe.compressSync(csJSON.stringify(t),"base64"),ct:this.pe.algorithm}}setBatchReadyCall(){this.Nv()}}return j([Ur({wait:0,mode:"trailing"}),N("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),um="dvar",Bo=["trackDynamicVariable"],dm=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.R=e,this.E=i,this.Ue=n,this.pe=o,this.M=c,this.bs=new Zs(this.E.getTrackerUri(),um),this.Yt=new hm(this.pe),this.Cs=new lm(this.Yt,this.M)}init(){this.bs.setRequestParametersProviders(this.Ue,this.Yt),this.R.setDynamicVariablesService(this.Cs),this.Yt.onBatchReady(()=>this.bs.send()),this.bs.after(()=>this.Yt.clear()),this.S.register(Bo,({key:t,value:e}={})=>{this.Cs.trackDynamicVariable(t,e)})}onStartTracking(){this.Cs.start()}onArtificialPageViewEnd(t){t&&this.Cs.stop()}onAfterArtificialPageView(t){t&&this.Cs.start()}}return s})(),fm=20,pm=(()=>{class s extends Ui{validateArgs(t){return Y(t)?Il(t)&&b(t.key)&&b(t.value)&&b(t.type):!1}execute(t,e){let i=qn(t,e);i!==null?this.bn(i):this.Mv(t,e)()}Mv(t,e){return()=>{let i=0,n=window.csSetInterval(()=>{i+=1;let o=qn(t,e);if(o!==null){window.csClearInterval(n),n=void 0,i=0,this.bn(o);return}i>=fm&&(window.csClearInterval(n),n=void 0,i=0)},100)}}bn(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(Bo[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),Ul=100,gm=100,mm=(()=>{class s extends Ut{constructor(t,e){super(),this.Dv=t,this.F=e,this.Ie=null,this.Ol=[]}onStart(){csArray.prototype.forEach.call(this.Ol,t=>{this.Ie=t,this.Bf()}),this.Ol=[]}onStop(){}addToCart(t){let e={};b(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,gm)),b(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Ul)),(e.sku||e.merchant)&&(this.Ie=e,this.Bf())}getCartItem(){return this.Ie}Bf(){if(!this.isStarted&&this.Ie!==null){csArray.prototype.push.call(this.Ol,this.Ie),this.clear();return}this.F.refreshSession(),this.F.isSessionValid()&&this.Dv.send()}clear(){this.Ie=null}getRequestParameters(){if(!this.Ie)return{};let t={};return b(this.Ie.sku)&&this.Ie.sku.length>0&&(t.sku=this.Ie.sku),b(this.Ie.merchant)&&this.Ie.merchant.length>0&&(t.me=this.Ie.merchant),t}}return s})(),Qa=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),b(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return yt(t)&&_t(t.revenue)&&b(t.currency)&&t.currency.length<=10&&(!yt(t.id)||b(t.id))}}return s})(),ym=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Nl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return X(t.sku)&&(e.sku=t.sku),X(t.category)&&(e.category=t.category),X(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Ul)),e}static Nl(t){return yt(t)&&b(t.id)&&b(t.name)&&_t(parseFloat(t.price))&&bs(parseInt(t.quantity,10))&&(!X(t.sku)||b(t.sku))&&(!X(t.category)||b(t.category))&&(!X(t.merchant)||b(t.merchant))}}return s})(),Em=(()=>{class s extends Ut{constructor(t,e,i){super(),this.M=t,this.Ff=e,this.F=i,this.Ml=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Ml,t=>{this.ge=t.transaction,this.Rn=t.transactionItems,this.sendTransaction()}),this.Ml=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.ge=Qa.from(e)}getTransaction(){return this.ge}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Ml,{transaction:this.ge,transactionItems:[...this.Rn]}),this.clear();return}if(!(this.Ff===null||this.F===null)&&(this.F.refreshSession(),!!this.F.isSessionValid())){if(!this.ge.hasValidRevenue()){H.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Ff.send()}}addItem(t){if(Ee(t))throw new Lt(jr[1]);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=ym.from(e);i!==null&&csArray.prototype.push.call(this.Rn,i)}getItems(){return this.Rn}clear(){this.ge=Qa.from({revenue:NaN}),this.Rn=[]}getRequestParameters(){let t={id:this.ge.id?`${this.ge.id}`:"",revenue:`${this.ge.revenue}`};return X(this.ge.tax)&&(t.tax=`${this.ge.tax}`),X(this.ge.shipping)&&(t.shipping=`${this.ge.shipping}`),X(this.ge.currency)&&(t.cu=`${this.ge.currency}`),t.items=window.csJSON.stringify(this.Rn),t}}return s})(),Sm=["ecommerce:addToCart","ec:cart:add"],Fo=["ecommerce:addTransaction","ec:transaction:create"],jr=["ecommerce:addItem","ec:transaction:items:add"],Go=["ecommerce:send","ec:transaction:send"],vm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.St=e,this.N=i,this.S=n,this.M=o,this.F=c,this.C=l}init(){let t=new Zs(this.E.getTrackerUri(),"transaction"),e=new Zs(this.E.getTrackerUri(),"addtocart");this.je=new Em(this.M,t,this.F),this.gr=new mm(e,this.F);let i=new Ni(this.St,this.N,this.C,this.je);t.setRequestParametersProviders(i),t.after(()=>{this.je.clear()});let n=new Ni(this.St,this.N,this.C,this.gr);e.setRequestParametersProviders(n),e.after(()=>{this.gr.clear()}),this.S.register(Fo,o=>{this.je.addTransaction(o)}),this.S.register(jr,o=>this.je.addItem(o)),this.S.register(Go,()=>this.je.sendTransaction()),this.S.register(Sm,o=>{this.gr.addToCart(o)})}onStartTracking(){this.je.start(),this.gr.start()}onArtificialPageViewEnd(t){t&&(this.je.stop(),this.gr.stop())}onAfterArtificialPageView(t){t&&(this.je.start(),this.gr.start())}}return s})(),_m=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.transactionId)&&_t(t.revenue)&&b(t.currency)&&b(t.name)&&b(t.sku)&&b(t.category)&&_t(t.price)&&_t(t.quantity):!1}execute(t){this.kv({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.Lv({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Ea()}kv(t){this.commandsService.applyFromImplementation(Fo[0],[t],"EcTransactionAllTemplate")}Lv(t){this.commandsService.applyFromImplementation(jr[0],[t],"EcTransactionAllTemplate")}Ea(){this.commandsService.applyFromImplementation(Go[0],[],"EcTransactionAllTemplate")}}return s})(),wm=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.id)&&_t(t.revenue)&&b(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(Fo[0],[t],"EcTransactionCreateTemplate")}}return s})(),Am=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.id)&&b(t.name)&&b(t.sku)&&b(t.category)&&_t(t.price)&&_t(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(jr[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),Tm=(()=>{class s extends wt{validateArgs(t){return!!Y(t)}execute(){this.commandsService.applyFromImplementation(Go[0],[],"EcTransactionSendTemplate")}}return s})(),bm=(()=>{class s extends Ui{validateArgs(t){return Y(t)?yt(t)&&b(t.selector):!1}execute(t,e){if(!yt(t)||!b(t==null?void 0:t.selector))return;let i=Wn(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Vl[0],[i],"ElementUnmaskingTemplate")}}return s})(),Os;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Os||(Os={}));var Za=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function Kn(s){return s.tagDeploymentMode===Os.DualCollectionReview||s.tagDeploymentMode===Os.DualCollection}function Rm(s){return Kn(s)||s.tagDeploymentMode===Os.LoadClicktalePtc}var Cm="@ETP@",tc="@user-identifier@",Im=(()=>{class s extends Ut{constructor(t,e,i,n){super(),this.E=t,this.xv=e,this.pe=i,this.J=n,this.Dl=[],this.Di=[]}onStart(){csArray.prototype.forEach.call(this.Dl,t=>this.Gf(t)),this.Dl=[],csArray.prototype.forEach.call(this.Di,t=>this.$f(t)),this.Di=[]}onStop(){}Gf(t){this.Uv(t)?_i.isSupported()&&this.jv(t):this.Hv(t)}trackPageEvent(t){if(!s.zf(t))throw new Lt($o[0]);this.isStarted?this.Gf(t):csArray.prototype.push.call(this.Dl,t)}Uv(t){return Ir(t,tc)}async jv(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,tc.length);if(e.length>_i.MAX_DIGEST_INPUT_SIZE){H.warn("UserIdentifier event: invalid user identifier");return}let i=await _i.digest(e);i?(this.mr={eventName:i,isETR:!1,isCustomHashId:!0},this.Sa()):H.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}Hv(t){this.J.emitPageEvent(t),this.mr={eventName:t,isETR:!1,isCustomHashId:!1},this.Sa(),this.E.tagDeploymentMode===Os.LoadClicktalePtc&&Za.sendPageEvent(t)}$f(t){this.E.malkaEtrEnabled?this.Bv(t):this.Fv(t)}trackEventTriggerRecording(t){if(!s.zf(t))throw new Lt(ji[0]);this.isStarted?this.$f(t):csArray.prototype.push.call(this.Di,t)}Bv(t){Ir(t,Cm)?this.J.emitEventTriggerRecording(t,as.ETR_PAGE):this.J.emitEventTriggerRecording(t,as.ETR_SESSION),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.Sa()}Fv(t){Rm(this.E)&&(this.J.emitEventTriggerRecording(t,as.ETR_LEGACY),this.mr={eventName:t,isETR:!0,isCustomHashId:!1},this.Sa(),this.E.tagDeploymentMode===Os.LoadClicktalePtc&&Za.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.pe.compressSync(this.mr.eventName,"base64"),ct:this.pe.algorithm,isETR:`${this.mr.isETR}`,isCustomHashId:`${this.mr.isCustomHashId}`}}Sa(){this.xv.send()}static zf(t){return b(t)&&!!csString.prototype.trim.call(t)}}return s})(),$o=["trackPageEvent"],ji=["trackEventTriggerRecording"],Pm=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.pe=i,this.Ue=n,this.J=o}init(){let t=new Zs(this.E.getTrackerUri(),"pageEvent");this.yr=new Im(this.E,t,this.pe,this.J),t.setRequestParametersProviders(this.yr,this.Ue),this.S.register($o,e=>{this.yr.trackPageEvent(e)}),this.S.register(ji,e=>{this.yr.trackEventTriggerRecording(e)})}onStartTracking(){this.yr.start()}onArtificialPageViewEnd(t){t&&this.yr.stop()}onAfterArtificialPageView(t){t&&this.yr.start()}}return s})(),Om=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ji[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),Nm=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ji[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),Mm=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation($o[0],[t.eventName],"PageEventTemplate")}}return s})(),Dm=(()=>{class s extends Ui{validateArgs(t){if(Y(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Wn(c,e)),c=>!!c),n=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=ei(c.attrName,e),h=Wn(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...n]};this.commandsService.applyFromImplementation(Ho[0],[o],"PIIMaskingTemplate")}}return s})(),km=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ji[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),Lm=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.path):!1}execute(t){let e=[t.path],i=Vo(t.decodeURI),n=Uo(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Yn[0],e,"SetPathTemplate")}}return s})(),xm=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.query):!1}execute(t){let e=[t.query],i=Vo(t.decodeURI),n=Uo(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Xn[0],e,"SetQueryTemplate")}}return s})();function xe(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Si=s=>s instanceof HTMLFormElement?"form":s.localName,ec=new Map,gn=!ki&&document.implementation.createHTMLDocument("");function jl(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Vm(s){if(!Dr(s))return null;let r=Hl(s);if(r===null||r.length===0)return null;let t="";if(mo(s.textContent))K(r,e=>t+=e.cssText);else{let e=Um(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];K(i,n=>t+=n.cssText)}return t}function Um(s){if(!gn)return 0;let r=ec.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,gn.head.appendChild(t);let e=Hl(t);return r=e?e.length:0,ec.set(s.textContent,r),gn.head.removeChild(t),r}function Hl(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var cs={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var Ls=(()=>{class s{constructor(t){this.csId=z(t),this.props=Ai.getAll(t)}}return s})(),Bl=(()=>{class s extends Ls{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Ne=(()=>{class s extends Ls{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=cs.ELEMENT_NODE,this.localName=Si(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Vm(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new Bl(c);csArray.prototype.push.call(this.children,l)}(Dr(t)||Ao(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===cs.ELEMENT_NODE}static getAttribute(t,e){return Ms(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function jm(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function Hm(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=Fm(r);return t===""||(r=Gm(r,t),r.length===0)?"":Fl(r[0])}function Bm(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Fm(s){return s.length>0?Fl(s[0]):""}function Gm(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function Fl(s){let r="",t;Bm(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var $m=s=>s;function zm(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let f=c[l],u=Reflect.set(c,l,h);return e.forEach(m=>m(this,h,f,"subproperty")),u}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){ot.error(h)}return l}})}function qm(s,r,t){let e=Wm(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Wm(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,zm(s,r,i,e),e):(ot.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(ot.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Ym(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ot.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(hs(i),f=>f(c))}catch(f){ot.critical(f)}let h=n.apply(this,c);return Ds(()=>{let f={result:h,context:this,args:c};csArray.prototype.forEach.call(l,u=>u(f))},[Se.MonkeyPatch,`${csString(r)}`]),h};Km(o,n),s[r]=o}return i}function Kt({target:s,methodName:r,hook:t,hookPrepareArgs:e=$m,options:i}){let n=Ym(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:Hm()}:{};return f=>t({...f,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function Xm(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);if(!i)return e;if(!i.configurable)return ot.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[t]=e;let n=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var o;let c=this[r],l=arguments;return Ds(()=>{e.forEach(h=>h(this,l[0],c,"property"))},[Se.MonkeyPatch,n]),(o=i.set)===null||o===void 0?void 0:o.apply(this,l)}}),e}function Or(s,r,t){let e=Xm(s,r);if(!e)return null;let i=(n,o,c)=>t(n,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Km(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Hr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return hs(this.set)}get count(){return this.set.size}}return s})(),Jm=(()=>{class s extends Hr{constructor(t="high"){super(),this.Gv=t}add(t){this.set.add(t),this.set.size===1&&qt(()=>{this.set.clear()},this.Gv)}}return s})();function Br(s,r=!1){let t=new Hr;return{push(e){t.count===0&&(r?qt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Oe=csSymbol(),zo=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,f,u,m,y,S,C;this.A=t,this.kl=null,this.Ll=null,this.xl=null,this.Vl=null,this.Ul=null,this.$v=Br(O=>this.processUpdateRulesInATick(O)),this.jl=null,this.Hl=null,this.Bl=null,this.A=O=>qt(()=>t(O)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.kl=Kt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:O,args:v})=>{this.processInsertRule(O,v)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Ll=Kt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:O,args:v})=>{this.processDeleteRule(O,v)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.xl=Kt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:O})=>this.processUpdateRule(O)})),typeof((f=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||f===void 0?void 0:f.deleteRule)=="function"&&(this.Vl=Kt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:O})=>this.processUpdateRule(O)})),!((u=window.StyleSheet)===null||u===void 0)&&u.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Ul=Or(window.StyleSheet.prototype,"disabled",(O,v,w)=>{v!==w&&this.zv(O,v)})),typeof((y=(m=window.CSSStyleDeclaration)===null||m===void 0?void 0:m.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.jl=Kt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:O})=>{let v=O.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),typeof((C=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||C===void 0?void 0:C.removeProperty)=="function"&&(this.Hl=Kt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:O})=>{let v=O.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Bl=qm(window.CSSStyleRule.prototype,"style",O=>{this.processUpdateRule(O)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.kl)===null||t===void 0||t.activate(),(e=this.Ll)===null||e===void 0||e.activate(),(i=this.xl)===null||i===void 0||i.activate(),(n=this.Vl)===null||n===void 0||n.activate(),(o=this.Ul)===null||o===void 0||o.activate(),(c=this.jl)===null||c===void 0||c.activate(),(l=this.Hl)===null||l===void 0||l.activate(),(h=this.Bl)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.kl)===null||t===void 0||t.deactivate(),(e=this.Ll)===null||e===void 0||e.deactivate(),(i=this.xl)===null||i===void 0||i.deactivate(),(n=this.Vl)===null||n===void 0||n.deactivate(),(o=this.Ul)===null||o===void 0||o.deactivate(),(c=this.jl)===null||c===void 0||c.deactivate(),(l=this.Hl)===null||l===void 0||l.deactivate(),(h=this.Bl)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Oe]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.$v.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(Qs(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.A(o)}}processDeleteRule(t,[e]){if(t[Oe]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}zv(t,e){if(t[Oe]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return tt([N()],s.prototype,"observe",null),tt([N()],s.prototype,"disconnect",null),tt([N()],s.prototype,"processInsertRule",null),tt([N()],s.prototype,"processUpdateRule",null),tt([N()],s.prototype,"processUpdateRulesInATick",null),tt([N()],s.prototype,"processDeleteRule",null),s})(),oi=(()=>{var s;class r{static qv(e){this.ii.forEach(i=>{e(i,"initial")})}static Cn(e){if(this.L||(this.L=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&K(n.addedNodes,this.Wv),K(n.removedNodes,this.Yv)})),csArray.prototype.push.call(this.Pe,e),!this.Y){this.Y=!0,this.L.observe(document,this.In);for(let i of As.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.ii.add(n),this.L.observe(n,this.In)}this.Fl||(this.Fl=Kt({target:Element.prototype,methodName:"attachShadow",hook:i=>this.Er(i.result)&&this.qf(i.result)})),this.Fl.activate()}this.qv(e)}static Er(e){return e.isConnected&&e.ownerDocument===document}static Pn(e){var i,n;this.Pe=csArray.prototype.filter.call(this.Pe,o=>o!==e),this.Pe.length===0&&(this.Pe=[],this.Y=!1,(i=this.L)===null||i===void 0||i.disconnect(),(n=this.Fl)===null||n===void 0||n.deactivate(),this.ii.clear())}constructor(e){this.A=e,this.A=ls("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return hs(s.ii)}takeRecords(){var e,i;return(i=(e=s.L)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){As.isSupported()&&s.Cn(this.A)}disconnect(){As.isSupported()&&s.Pn(this.A)}}return s=r,r.Pe=[],r.ii=new Set,r.Y=!1,r.In={childList:!0,subtree:!0},r.qf=t=>{s.ii.has(t)||(s.L.observe(t,s.In),s.ii.add(t),K(s.Pe,e=>e(t,"added")))},r.Wv=t=>{ne(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.qf)},r.Yv=t=>{t.isConnected||ne(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.ii.has(e)&&(s.ii.delete(e),K(s.Pe,i=>i(e,"removed")))})},tt([N()],r.prototype,"observe",null),tt([N()],r.prototype,"disconnect",null),r})(),Qm=(()=>{class s{constructor(t){this.Xv=1,this.va=new Set,this.Gl=null,this.$l=null,this.zl=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Kv=e=>{let i=e.sheet;if(this.va.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Oe],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Oe],index:e.index};this.A(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Oe],rule:e.rule,index:e.index};this.A(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Oe],disabled:e.disabled};this.A(n)}}},this.A=e=>qt(async()=>{await Yc(2),t(e)}),this.ye=new oi(this.zl),"adoptedStyleSheets"in Document.prototype&&(this.Gl=Or(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.$l=Or(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Wf=new zo(this.Kv)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ye.observe(),(t=this.Gl)===null||t===void 0||t.activate(),(e=this.$l)===null||e===void 0||e.activate(),this.Wf.observe()}disconnect(){var t,e;this.va.clear(),this.ye.disconnect(),(t=this.Gl)===null||t===void 0||t.deactivate(),(e=this.$l)===null||e===void 0||e.deactivate(),this.Wf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Jv(e);let i=Me(e,o=>o[Oe]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(n)}Jv(t){K(t,e=>{if(this.va.has(e))return;let i=this.Xv++;e[Oe]=i,this.va.add(e);let n=this.Qv(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.A(o)})}Qv(t){let e=[];try{e=Me(t.cssRules,i=>i.cssText)}catch{}return e}}return tt([N()],s.prototype,"observe",null),tt([N()],s.prototype,"disconnect",null),tt([N()],s.prototype,"setStyleSheets",null),s})(),Zm=ks(iy,"optimizeMutations"),ty=csSymbol.for("ignoreNextSerialization");function ey(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,f=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){f.delete(u),s.add(u)},isDetachedMove(u){return!!nt.findAncestor(u,m=>f.has(m),!0)},isAddedNode(u){let m=nt.findAncestor(u,y=>r.has(y)||l.has(y)||s.has(y),!0);return!!m&&!s.has(m)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!nt.findAncestor(u,m=>r.has(m)||l.has(m),!0)},markAsAddedNode(u){f.delete(u),l.delete(u),r.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!nt.findAncestor(u,m=>t.has(m),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,m){let y=m==="previous"?n:i;return u&&y.has(u)?y.get(u)||null:u},getSiblings(u){let m=u.addedNodes.length,y=this.getPlaceholder(u.previousSibling,"previous"),S=this.getPlaceholder(u.nextSibling,"next");if(m){let C=y,O=S,v=u.previousSibling!==y,w=u.nextSibling!==S;for(let P=0;P<m;P++){let M=u.addedNodes[P],T=u.addedNodes[m-P-1];this.isLatestNodeMutation(M,u)?(n.delete(M),u.previousSibling&&v&&(i.set(u.previousSibling,M),v=!1),C=M):n.set(M,C),this.isLatestNodeMutation(T,u)?(i.delete(T),u.nextSibling&&w&&(n.set(u.nextSibling,T),w=!1),O=T):i.set(T,O)}}else u.previousSibling&&u.previousSibling!==y&&i.set(u.previousSibling,S),u.nextSibling&&u.nextSibling!==S&&n.set(u.nextSibling,y);return{previousSibling:y,nextSibling:S}},setAttributeMutation(u,m){let y=o.get(u)||new Set;y.add(m),o.set(u,y)},isAttributeMutated(u,m){var y;return!!(!((y=o.get(u))===null||y===void 0)&&y.has(m))},setLatestNodeMutation(u,m){h.set(u,m)},isLatestNodeMutation(u,m){return h.get(u)===m},markAsFutureAddedNode(u){h.has(u)||f.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function sy(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function iy(s){let r=ey(),t=[];for(let e of s)e.type==="childList"&&sy(e,r);for(let e of s)switch(e.type){case"attributes":ny(e,r,t);break;case"characterData":ry(e,r,t);break;case"childList":cy(e,r,t);break}return t}function ry(s,r,t=[]){let e=s.target;return nt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!ay(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function ny(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return nt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var oy=30;function ay(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=D.now(),n=s[e];return n&&i<n?!0:(s[e]=i+oy,!1)}function cy(s,r,t=[]){let e=nt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,f=()=>{if(h){let{childListType:y,movedNodes:S,...C}=h;csArray.prototype.push.call(t,y==="added"?C:{...C,movedNodes:S}),h=null}},u=y=>y===(h==null?void 0:h.childListType)?h:(f(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let S=s.addedNodes[y];r.isLatestNodeMutation(S,s)?(r.isMovedNode(S)?(h=u("moved"),csArray.prototype.push.call(h.movedNodes,S)):(r.markAsAddedNode(S),n||(h=u("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):nt.isConnected(S)?r.isMovedNode(S)||r.markAsPendingInsert(S):r.markAsUselessNode(S)}f()}let m=Ii(s.removedNodes,y=>{if(nt.isConnected(y)){if(!i&&!r.isPendingInsert(y)){if(r.isDetachedMove(y))return!0;r.markAsMovedNode(y),r.isMovedNodeIntoAddedNode(y)&&(y[ty]=!0)}return!1}return r.isUselessNode(y)?!1:(r.markAsRemovedNode(y),!0)});return m.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:m,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var sc={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},we=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static ql(e){if(s.shadowRootFilters.length>0&&Pi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,sc)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,qt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,sc)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(As.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.ql(document),this.shadowRootObserver=new oi(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,K(this.shadowRootObserver.shadowRoots,n=>{this.ql(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Yf=i;let n=Br(o=>e(o,this),!0);this.A=ls("DocumentMutationObserver:callback",o=>{K(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?ad(i,n):i!=null?i:n}observe(){s.observe(this.A,this.Yf)}disconnect(){s.disconnect(this.A,this.Yf)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{St.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{K(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.ql(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,tt([N()],r.prototype,"observe",null),tt([N()],r.prototype,"disconnect",null),r})(),ly=(()=>{class s{constructor(t){this.A=t,this.Wl=!1,this.Zv=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>qt(()=>t(e)),this.Xf=new zo(e=>qt(async()=>{await Yc(),this.Zv(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Kf=new Qm(t))}observe(){var t;this.Wl=!1,this.L=new we(e=>this.t_(e),(e,i)=>{i==="added"&&this.e_(e)}),this.L.observe(),this.Xf.observe(),(t=this.Kf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.L)===null||t===void 0||t.disconnect(),this.Xf.disconnect(),(e=this.Kf)===null||e===void 0||e.disconnect(),this.Wl=!0}t_(t){if(this.Wl)return;let e=Zm(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){ot.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:ot.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:nt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Qs(t.addedNodes)};this.A(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Me(t.removedNodes,c=>c)};this.A(o)}}e_(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return tt([N()],s.prototype,"processAttributeChanged",null),tt([N()],s.prototype,"processCharacterDataChanged",null),tt([N()],s.prototype,"processChildListChanged",null),s})(),hy=(()=>{class s extends Ls{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),uy=(()=>{class s extends Ls{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),dy=(()=>{class s extends Ls{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),fy=(()=>{class s extends Ls{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),py=(()=>{class s extends Ls{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),gy=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Ao(t)&&(i[n].value=jl(t))}return i}}return s})(),ic={workTime:40,async:!0,initialDOM:!0};var Ti=csSymbol("InitialDom"),rc=csSymbol.for("ignoreNextSerialization");function Gl(s){return s[rc]?(delete s[rc],!0):!1}function my(s=ic){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=ic.workTime);let n=ls("serialize:callback",m=>e(m)),o=new Li,c=(m,y)=>{m.hasChildNodes()&&o.push({node:m,serializedNode:y});let S=m instanceof Element&&csElementshadowRoot.apply(m);if(S){let C=y.shadowRoot=bi(S);s.async&&s.initialDOM&&rt.setProperty(S,Ti,!0),c(S,C)}},l,h=!0,f=8,u=ls("work",()=>{var m;if(h)l=bi(t),s.async&&s.initialDOM&&rt.setProperty(t,Ti,!0),c(t,l),h=!1;else if(o.isEmpty)return;let y=Sy(100);for(;!o.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--f<=0&&csSetTimeout(u);return}let{node:S,serializedNode:C}=o.pop(),O=(m=C.children)!==null&&m!==void 0?m:[];if(Lr(S))continue;let v=0;for(let w=csNodefirstChild.apply(S);w;w=csNodenextSibling.apply(w)){if(Gl(w))continue;let P=bi(w);s.async&&s.initialDOM&&rt.setProperty(w,Ti,!0),O[v++]=P,c(w,P)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let m=0;m<f;m++)csSetTimeout(u,1)}}function yy(s){let r=bi(s),t=r;if(Lr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))Gl(n)||(t.children[e++]=Jn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Jn(i)),r}var Jn=ks(yy,"serializeSync");function bi(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new Ne(s),r.attributes=vy(s);break;case 3:t=new Bl(s);break;case 4:t=new hy(s);break;case 8:t=new uy(s);break;case 10:t=new dy(s);break;case 9:t=new fy(s);break;case 11:t=new py(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function Ey(){Ti=csSymbol("InitialDom")}function Sy(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=D.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=D.elapsed()),t-this.started}}}function vy(s){return Lr(s)?[]:gy.create(s)}var qo=(()=>{class s{constructor(t){this.type="asyncEvent",this.Yl=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Yl)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.ni=t,this.Yl=!0,this.A&&this.A(this.ni)}complete(t){this.Yl&&t(this.ni),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),Ae=(()=>{class s{constructor(){this.It=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:D.now(),t.timestamp==null&&(t.timestamp=D.now()),csArray.prototype.forEach.call(this.It,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.It=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.It,t),()=>{let e=csArray.prototype.indexOf.call(this.It,t);csArray.prototype.splice.call(this.It,e,1)}}}return s})(),_y=my(),wy=(()=>{class s extends Ae{constructor(){super(...arguments),this._a=!1}onStart(){this._a=!0,this.A=jm(this.s_,this),this.z=new ly(this.A),this.z.observe();let t=St.mutations.initialDOM.asyncMeasure(),e=()=>{this._a=!1,Ey(),t()};this.produceEvent(new qo(i=>_y(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this._a=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.z)===null||e===void 0||e.disconnect()}Xt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=z(e.target),i.targetProps=rt.getProperties(e.target)),[e,i]}s_(t){if(!this.i_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Xt(t.type,t);i.attribute=e.attribute,i.isSvg=ri(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=Si(e.target),i.linkRel=Qc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?Si(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Xt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?Si(e.target.parentElement):null,i.parentProps=e.target.parentElement?rt.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Xt(t.type,t);i.targetLocalName=dt(e.target)?Si(e.target):null,i.nextSibling=e.nextSibling?z(e.nextSibling):null,i.previousSibling=e.previousSibling?z(e.previousSibling):null,St.mutations.serializedMutations.measure(()=>{i.nodes=Me(e.nodes,Jn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Xt(t.type,t);i.previousSibling=e.previousSibling?z(e.previousSibling):null,i.nextSibling=e.nextSibling?z(e.nextSibling):null,i.nodesIds=Me(e.nodes,z),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Xt(t.type,t);i.nodesIds=Me(e.nodes,z),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Xt(t.type,t);i.shadowRoot=bi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Xt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Xt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Xt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Xt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Xt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Xt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}wa(t){return this._a&&!rt.getProperty(t,Ti)}i_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.wa(t.target)||L.isMaskedElement(t.target)||L.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.wa(e)||L.isMaskedElement(e)||L.isMaskedElementChild(e))}case"attributeChanged":return this.wa(t.target)||L.isMaskedElementChild(t.target)||L.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.wa(t.target)||L.isMaskedElementChild(t.target);default:return!1}}}return s})(),si=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),ai=(()=>{class s{constructor(){this.It=[]}start(){}stop(){this.It.length=0,this.It=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.It;csSetTimeout(()=>{let n=ls("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.It,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.It,t),()=>{this.It=csArray.prototype.filter.call(this.It,e=>e!==t)}}emitEvent(t){qt(()=>csArray.prototype.forEach.call(this.It,e=>e(t)))}}return s.pendingEvents=0,s})(),Ay=(()=>{class s extends ai{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||si.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Ne){let c=L.getMaskedAttributeDetails(n);n.attributes=this.Aa(n,c)}if(L.getMaskedElementDetails(n).state===L.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}rt.traverse(n,c=>{if(c instanceof Ne){let l=L.getMaskedAttributeDetails(c);c.attributes=this.Aa(c,l);let h=L.getMaskedElementDetails(c);h.state===L.MaskedElementState.Parent&&(this.Ta(c,h),e++)}})}return e>0&&$.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=L,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n!=null?n:{}){let l=n[c],h=o[c],f=L.getMaskedElementDetails(h);if(f.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let u=L.getMaskedAttributeDetails(h);for(let m of(e=u.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[m];f.state===i.Parent&&this.Ta(l,f)}}Aa(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Ta(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),Ne.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return xe([It("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),me=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return rt.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){rt.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){rt.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Ty=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,by="\uFF41",Ry=/[^\s]/g,Cy="a";function mn(s){let r=csString.prototype.replace.call(s,Ty,by);return csString.prototype.replace.call(r,Ry,Cy)}var Iy=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.us=t,this.On=e,this.M=i,this.ba=n,this.r_=o,this.Nn=Po(this.On)}sanitize(t,e){return rt.traverse(t,(i,n)=>{if(i.anonymized=this.us,i.nodeType===cs.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?rt.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Ne.isElement(i))return this.n_(i);if(i.nodeType===cs.CDATA_SECTION_NODE){let o=i;o.data=this.us?mn(o.data):this.M.checkAndAnonymizePII(o.data,this.ba);return}}),t}setAnonymization(t){this.us=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[me.ANONYMIZED_TEXT_STATUS_PROP])===me.WHITELISTED_STATUS;return this.us&&!n?{anonymizedValue:mn(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.ba),withAnonymization:!1}}n_(t){let e=Ms(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.us,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.o_(e,i,o))return n;if(cf(i))return lf(e,i,n)?this.M.anonymizePII(n):n;let c=this.r_&&i==="placeholder";return this.us&&(hf(e,i,o)||c)?mn(n):this.us?"":this.M.checkAndAnonymizePII(n,null)}o_(t,e,i){return af(t,e,i)||this.Nn.has(e)}}return s})(),nc=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.a_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static a_(t){return(e,i)=>t(Me(e,Py),i)}}return s})();function Py(s){return s.isVisible||!nt.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Qn=()=>(s,r,t)=>{t.value=Oy(t.value)};function Oy(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,So(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}Qn.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var Ny=(()=>{class s{constructor(t){this.A=t,this.oi=new Map,this.Jf=e=>{let i=e.target;if(this.oi.has(i))return!0;let n=!1;return this.oi.forEach((o,c)=>{n||!this.oi.get(c).subtree||(n=c.contains(i))}),n},St.general.nbOfMutationObservers.increase(),this.L=new csMutationObserver(e=>{Qn.isScheduled(this,this.garbageCollect)&&(e=Ii(e,this.Jf)),e.length&&qt(()=>t(e,this))})}disconnect(){St.general.nbOfMutationObservers.decrease(),this.L.disconnect(),this.oi=new Map}takeRecords(){return this.L.takeRecords()}observe(t,e){return St.mutations.elementMutationObserved.increase(),this.oi.set(t,e),this.L.observe(t,e)}unobserve(t){this.oi.has(t)&&(St.mutations.elementMutationObserved.decrease(),this.oi.delete(t),this.garbageCollect())}garbageCollect(){St.mutations.unobserveGarbageCollection.measure(()=>{let t=Ii(this.takeRecords(),this.Jf);t.length&&this.A(t,this),this.L.disconnect(),this.oi.forEach((e,i)=>this.L.observe(i,e))})}}return tt([Qn()],s.prototype,"garbageCollect",null),s})(),My=(()=>{class s{constructor(t){this.A=t,this.Ra=new Set}onMutations(t){if(wr(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.Ra.values())nt.isConnected(e)||(this.Ra.delete(e),this.A(e))}observe(t){this.z||(this.z=new we(e=>csSetTimeout(()=>this.onMutations(e))),this.z.observe()),this.Ra.add(t)}disconnect(){var t;(t=this.z)===null||t===void 0||t.disconnect(),this.Ra.clear(),this.z=void 0}}return tt([N("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),Dy=300,Nr=(()=>{class s{constructor(t){this.Ca=new Set,this.c_=new My(e=>this.Qf(e)),this.Y=!1,this.Pt=t?{...oc,...t}:oc}stop(){var t,e;this.Y=!1,(t=this.Mn)===null||t===void 0||t.disconnect(),(e=this.L)===null||e===void 0||e.disconnect()}start(t){if(this.Y)throw new Error("VisibilityObserver is already started");this.A=ls("VisibilityObserver:callback",(i,n)=>t(i,n));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:Dy};this.Mn=nc.create(i=>this.handleIntersection(i),e),this.L=new Ny(i=>csSetTimeout(()=>{K(i,n=>this.Qf(n.target))})),this.Xl(),this.Y=!0}observe(t){if(!this.Y)throw new Error("Observer is stopped.");this.Pt.reobserve===!1&&t[this.Kl]||(St.visibilityObserver.nbElements.increase(),t[this.Kl]=!0,this.watchIntersection(t))}Xl(){this.Ia=csSymbol("isVisible"),this.Kl=csSymbol("ObservedElement"),this.Jl=csSymbol("LinkedElement"),this.Zf=csSymbol("Tracked")}Qf(t){this.Ca.add(t);for(let e of this.l_(t))this.Ca.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){K(this.Ca.keys(),t=>{!t.isConnected||nt.areAncestorsHiddenByCSS(t)||t[this.Kl]&&this.watchIntersection(t)}),this.Ca.clear()}watchIntersection(t){this.L.unobserve(t),this.Mn.unobserve(t);let e=nt.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.tp(e,t),this.watchMutation(e)),this.watchMutation(t)):this.Mn.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Ia],this.Mn.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.L.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){nt.isVisibleInDocument(i)||this.h_(i);continue}let n=this.Pt.allowSameMatch||!e.target[this.Ia];e.target[this.Ia]=!0,n&&!this.Pt.delay&&this.onVisibilityChanged(e.target,Ri.VisibleInViewPort)}this.Pt.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Ia]&&i&&this.onVisibilityChanged(e.target,Ri.VisibleInViewPort)}},this.Pt.delay)}h_(t){St.visibilityObserver.hiddenElements.increase();let e=nt.getTopElement(t);this.watchMutation(t),e&&(this.c_.observe(e),this.tp(e,t),this.watchMutation(e,!1))}tp(t,e){var i;(t[this.Jl]=(i=t[this.Jl])!==null&&i!==void 0?i:new Set).add(e)}l_(t){var e,i;let n=[],o=(i=(e=t[this.Jl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return K(o,c=>csArray.prototype.push.call(n,c)),n}onVisibilityChanged(t,e){if(e===Ri.VisibleInViewPort&&this.Pt.trackOnce){if(this.Mn.unobserve(t),this.L.unobserve(t),t[this.Zf])return;t[this.Zf]=!0}this.A(t,e)}static isSupported(){return nc.isSupported()}}return tt([N()],s.prototype,"observe",null),tt([Ur({wait:50}),N(),It("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),tt([N()],s.prototype,"watchIntersection",null),tt([N()],s.prototype,"watchMutation",null),tt([N(),It("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),tt([N()],s.prototype,"onVisibilityChanged",null),s})(),Ri=(()=>{let s;return function(r){r.VisibleInViewPort="VisibleInViewPort",r.HiddenByAnother="HiddenByAnother",r.Hidden="Hidden"}(s||(s={})),s})(),oc={delay:1e3,trackOnce:!0,reobserve:!1};var ky=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return rt.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){rt.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){rt.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),ss=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?rt.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){rt.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){rt.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var ac=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Ly=(()=>{class s extends ai{constructor(t,e,i=new ni,n=null,o=!1){super(),this.M=i,this.ba=n,this.captureAnonymizedPlaceholders=o,this.Sr=new Iy(t,e,i,n,o)}setAnonymization(t){this.Sr.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||ac.isTextVisibilityEvent(t)||si.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.d_(t);if(ac.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.ba),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.th(t);break;case"attributeChanged":this.f_(t);break;case"characterDataChanged":this.p_(t);break}return t}d_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case cs.TEXT_NODE:case cs.COMMENT_NODE:{let f=n[c];if(X(f.data)){if(h.localName==="script"){f.data="";continue}}else continue;f.data=this.Sr.getAnonymizedValue((e=f.data)!==null&&e!==void 0?e:"",h.localName,h.metadata).anonymizedValue;break}case cs.ELEMENT_NODE:{let f=n[c];if(f.attributes)for(let u in f.attributes){let m=f.attributes[u],y=l.localName==="input"?(i=l.attributes)===null||i===void 0?void 0:i.type:void 0;f.attributes[u]=this.Sr.getAnonymizedAttributeValue(l.namespaceURI,l.localName,u,m,y)}break}}}return t}th(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Sr.sanitize(n,i)}f_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Sr.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}p_(t){t.newValue=this.Sr.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return xe([It("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Z=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function Wo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=xy(r);return e?(ii(t,",")||(e=Vy(e)),[cc(t),...Wo(e)]):[cc(t)]}function xy(s){return csString.prototype.split.call(s,/\s(.+)/)}function cc(s){return csString.prototype.split.call(s,/,$/)[0]}function Vy(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Uy=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function jy(s,r){return csString.prototype.replace.call(s,Uy,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=By((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${Hy(l)})`})}function Hy(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ci(s){let r=new Set;return jy(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),hs(r)}function By(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var lc=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.E_(t);if(!n)return null;let o=await s.ip(n),c=se(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.S_(t,n),c=he(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(f=>{f&&csArray.prototype.push.call(h.nestedResources,{hash:f.hash,data:f.data})})),h}static async ip(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.rp,e);return xn(i)}static async E_(t){let e;if(!se(t))e=await(await window.fetch(t)).blob();else{let i=wa(t);if(!i)return null;e=i}return e}static async S_(t,e){let i=new Map,n=he(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!se(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=Ci(l.data));let u=!1,m=!1;for(let y of l.nestedResources){let S=se(y)?y:l.resourceAbsolutePath?Bf(y,l.resourceAbsolutePath):he(y),C=i.get(S);if(C!==void 0){if(C!==null){let v=s.v_(C,y);l.data=lt.stringReplaceAll(l.data,y,v)}continue}Ms(c,v=>v.resourceAbsolutePath===S)!==void 0||(u=!0,m||(csArray.prototype.push.call(c,l),m=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:S}))}if(!u){let y=await s.__(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let u;if(!se(l.resourceAbsolutePath))u=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=wa(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}u=y}let m=await s.ip(u);i.set(l.resourceAbsolutePath,{hash:m,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static v_(t,e){let i=`cs://resources/${t.hash}`;return se(e)||(i+=`?${s.ih}=${e}`),i}static async __(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.rp,i);return{data:e,hash:xn(n)}}}return s.rp="SHA-256",s.ih="original-resource-name",s})(),Zn=(()=>{class s extends ai{get busy(){return this.rh>0}constructor(){super(),this.w_="cssrm://",this.A_=1,this.ds=!1,this.rh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!si.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.T_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.b_(t);break;case"attributeChanged":this.R_(t);break;case"characterDataChanged":this.C_(t);break}return t}disableOnlineAssets(){this.ds=!1}enableOnlineAssets(){this.ds=!0}isOnlineAssetsActivated(){return this.ds}T_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case Z.TEXT_NODE:this.np(o,l==null?void 0:l.localName);break;case Z.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let f=o.cssRules[h],u=this.vr(f);u!==null&&(o.cssRules[h]=u)}break}case Z.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.vr(h.style)),(this.op(c.localName)||this.ap(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this.nh(h.src)),"srcset"in h&&(h.srcset=this.oh(h.srcset))),this.ds&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let f=this.ki(he(h.href),!0);h["data-cs-original-href"]=h.href,h.href=f}}}}return t}b_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)rt.traverse(i,(n,o)=>{if(n.nodeType===cs.TEXT_NODE&&o){this.np(n,o.localName);return}if(!Ne.isElement(n))return;let c=Ne.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.vr(c.value)),this.op(n.localName)||this.ap(n.localName,o==null?void 0:o.localName)){let l=Ne.getAttribute(n,"src");l!=null&&l.value&&(l.value=this.nh(l.value));let h=Ne.getAttribute(n,"srcset");if(h){h.value=this.oh(h.value);return}}if(this.I_(n)&&this.ds){let l=Ms(n.attributes,f=>f.name==="href");if(!l||!l.value)return;let h=this.ki(he(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}np(t,e){if(!t||e!=="style")return;let i=this.vr(t.data);i!==null&&(t.data=i)}C_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.vr(t.newValue);e!==null&&(t.newValue=e)}R_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.vr(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.nh(t.newValue)),i&&(t.newValue=this.oh(t.newValue)))}nh(t){return se(t)||this.ds?this.ki(t,!1,D.now()):t}oh(t){if(!this.ds)return t;let e=t,i=Wo(t);for(let n of i){let o=this.ki(he(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}vr(t){let e=Ci(t),i=t,n=D.now();for(let o of e){let c=se(o);if(!(c||this.ds)||this.P_(o))continue;let l=rf(o),h=o;c?h=this.ki(o,!1,n):this.ds&&(l?h=this.ki(o,!0,n):h=this.ki(he(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}ki(t,e,i=D.now()){let n=this.A_++;this.rh++;let o=e?lc.toCSSStaticResourceEvent:lc.toStaticResourceEvent,c=new qo(async l=>{try{let h=await o(t,n,i,this.ds);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.rh--}});return this.emitEvent(c),this.w_+n}op(t){return t==="img"}ap(t,e){return t==="source"&&e==="picture"}I_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return qc()&&Ju()&&!!csArray.from}P_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return xe([It("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),mi=console;var Ts={debug:(...s)=>mi.debug(...s),log:(...s)=>mi.log(...s),info:(...s)=>mi.info(...s),warn:(...s)=>mi.warn(...s),error:(...s)=>mi.error(...s)},to=(()=>{class s{push(t){let e={value:t};this._r?(this.ah.next=e,this.ah=e):(this._r=e,this.ah=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this._r)return;let t=this._r;return this._r=t.next,this._r||(this.ah=void 0),t.value}isEmpty(){return!this._r}}return s})(),Mi=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),Yo=(()=>{class s{constructor(){this.cp=new to,this.lp=new to,this.length=0}push(t,e=Mi.Low){return e===Mi.High?this.cp.push(t):this.lp.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.cp.shift()||this.lp.shift()}isEmpty(){return this.length===0}}return s})(),Fy=(()=>{class s{get length(){return this.vt.length}constructor(){this.kn=[],this.vt=new Yo,this.ch=new Set}O_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}N_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${z(t.target)}-${t.type}${this.O_(t)}`}M_(t){switch(t.type){case"state":return Mi.High;default:return Mi.Low}}D_(t){let e=this.N_(t);if(e){if(this.ch.has(e))return;this.ch.add(e)}return this.vt.push({mutation:t,key:e},this.M_(t))}k_(){this.kn.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.kn),t=>this.D_(t)),this.kn=[])}push(t){csArray.prototype.push.call(this.kn,t)}shift(){this.k_();let t=this.vt.shift();if(t)return t.key&&this.ch.delete(t.key),t.mutation}isEmpty(){return this.vt.isEmpty()&&this.kn.length===0}}return s})(),yn=new WeakMap,En=new WeakMap;function hc(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(yn.has(s))return yn.get(s);let t=r();return yn.set(s,t),t}function eo(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function Gy(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return hc(o,()=>{let c=new Proxy(o,{get(l,h){let f=Reflect.get(l,h);return typeof f!="function"?f:hc(f,()=>i&2?eo(function(...u){let m=En.get(this)||this,y=Reflect.apply(f,m,u);return e(m,[r,h],u,y),y},f):eo(function(...u){let m=En.get(this)||this;return Reflect.apply(f,m,u)},f))},set:i&1?(l,h,f)=>{let u=Reflect.set(l,h,f);return e(l,[r,h],[f],u),u}:Reflect.set});return En.set(c,o),c})}})}function $y(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=eo(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function Et(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return Ts.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let f of o)try{f(...h)}catch(u){Ts.warn(`Error in spy hook for ${r} on target`,i,u)}};return e.mode?Gy(i,r,c,l,e.mode):$y(i,r,c,l),()=>o.delete(t)}function Yt(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var zy=(()=>{class s{constructor(t){this.ze=t,this.It=new WeakMap,this.Ee=e=>this.ze({type:"state",target:e}),this.hp=e=>this.ze({type:"setAdoptedStyleSheets",target:e}),this.wr=e=>this.ze({type:"styleSheetUpdated",target:e}),this.Ln=e=>{var i;let n=(i=this.L_(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.wr(n)},this.x_=e=>this.ze({type:"styleSheetDisabledChanged",target:e}),this.up=e=>this.ze({type:"activeElementChanged",target:e.ownerDocument})}V_(t){return csNodenodeType.apply(t)===Z.DOCUMENT_NODE}U_(t){let e=[Yt(t,"input",this.Ee),Yt(t,"change",this.Ee),Yt(t,"checked",this.Ee),Yt(t,"scroll",this.Ee),Yt(t,"toggle",this.Ee),Yt(t,"focusin",this.up),Yt(t,"focusout",this.up),Yt(t,"pointerover",i=>{this.ze({type:"pointerOverElement",target:i.ownerDocument,element:i})}),Yt(t,"pointerout",i=>{this.ze({type:"pointerOverElement",target:i.ownerDocument,element:null})}),Yt(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.ze({type:"loaded",target:i});break}})];this.lh(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}j_(t){let e=t.defaultView;if(!e)return;let i=[Yt(e,"resize",()=>this.Ee(t)),Yt(t,"visibilitychange",()=>this.Ee(t)),Yt(t,"fullscreenchange",()=>this.Ee(t)),Et(e.Document,"adoptedStyleSheets",this.hp,{mode:2}),Et(e.ShadowRoot,"adoptedStyleSheets",this.hp,{mode:2}),Et(e.Element,"attachShadow",(n,o,c,l)=>{this.ze({type:"attachShadow",target:n,shadowRoot:l})}),Et(e.HTMLInputElement,"value",this.Ee),Et(e.HTMLInputElement,"checked",this.Ee),Et(e.HTMLSelectElement,"selectedIndex",this.Ee),Et(e.CSSStyleSheet,"insertRule",this.wr),Et(e.CSSStyleSheet,"deleteRule",this.wr),Et(e.CSSStyleSheet,"replace",this.wr),Et(e.CSSStyleSheet,"replaceSync",this.wr),Et(e.CSSStyleSheet,"addRule",this.wr),Et(e.CSSStyleRule,"style",this.Ln,{mode:1}),Et(e.CSSGroupingRule,"insertRule",this.Ln),Et(e.CSSGroupingRule,"deleteRule",this.Ln),Et(e.CSSStyleDeclaration,"setProperty",this.Ln),Et(e.CSSStyleDeclaration,"removeProperty",this.Ln),Et(e.StyleSheet,"disabled",this.x_),Et(e.HTMLDialogElement,"show",this.Ee),Et(e.HTMLDialogElement,"showModal",this.Ee),Et(e.HTMLDialogElement,"close",this.Ee),Et(e.CustomElementRegistry,"define",(n,o,c)=>{this.ze({type:"customElementRegistration",target:t,name:c[0]})})];this.lh(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}L_(t){for(;t.parentRule!==null;)t=t.parentRule;return t}H_(t){let e=new csMutationObserver(i=>{this.ze(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.lh(t,()=>{e.disconnect()})}lh(t,e){this.It.get(t)==null||csArray.prototype.push.call(this.It.get(t),e)}observe(t){this.It.has(t)||(this.It.set(t,[]),this.U_(t),this.V_(t)&&this.j_(t),this.H_(t))}disconnect(t){let e=this.It.get(t)||[];for(let i of e)try{i()}catch(n){Ts.warn(n)}this.It.delete(t)}}return s})(),$l=new Yo,ht,qy=40,Wy=10;function Yy(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%Wy===0&&(t=performance.now(),i=t-e<qy),r++,i}})},0)}function uc(){var s;let r=(s=ht==null?void 0:ht.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=ht==null?void 0:ht.subTasks,r):$l.shift()}function zl(){Yy(s=>{for(ht||(ht=uc());s.hasTimeLeft&&ht;){ht.isRunning=!0;try{ht.isEnded=ht.run(s)!==!0}catch(r){Ts.error("Error occurred while running task:",r),ht.isEnded=!0}ht.isRunning=!1,(ht.isEnded||ht.isAborted)&&(ht=uc())}ht&&zl()})}function yi(s,r=Mi.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return ht!=null&&ht.isRunning?(ht.subTasks=ht.subTasks||new Yo,ht.subTasks.push(t,r)):$l.push(t,r)===1&&!ht&&zl(),t}var Xy=40;function dc(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function Sn(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var vn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function _n(s,r){return!!s&&r in s&&!!s[r]}var fc={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},Ky=(()=>{class s{constructor(t){this.A=t,this.z=new zy(e=>{this.hh.push(e),this.B_()}),this.qe={},this.We=new Map,this.hh=new Fy,this.xn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.dp=0,this.fp=Xy}disconnect(){for(let t of this.xn.values())this.z.disconnect(t);this.xn.clear()}observe(t){return this.disconnect(),this.Pa(t),this}getState(t=!0){let e=this.qe;return this.qe={...e},t&&this.pp(),e}getChanges(){let t={};for(let[i,n]of this.We){let o=this.qe[i];if(!(n&&!o))if(o&&!n)t[i]=Ys(o);else{let c=El(n,o);c!==void 0&&(t[i]=c)}}return this.pp(),yl(t)?t:void 0}setFrameRate(t){return this.fp=t/1e3,this}onChange(t){return this.A=t,()=>{this.A===t&&(this.A=void 0,this.Vn&&(csClearTimeout(this.Vn),this.Vn=void 0))}}async getStateAsync(t=!0){return await this.gp(),this.getState(t)}async getChangesAsync(){return await this.gp(),this.getChanges()}async gp(){return new Promise(t=>{yi(()=>t())})}pp(){this.We.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=dc(e);return t?`${dc(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:Sn(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:Sn(n),name:Sn(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=m=>{c.has(m)?c.delete(m):o.add(m)},h=m=>{o.has(m)?o.delete(m):c.add(m)};function f(m,y){for(let S of vn)S in y&&(_n(m,S)&&l(m[S]),_n(y,S)&&h(y[S]))}for(let[m,y]of Object.entries(e)){if(y===null)continue;let S=m,C=n[S],O=C===void 0?y:Sl(C,y);f(C,y),n[S]=O}let u=m=>{if(c.has(m))return;let y=n[m];if(y){delete n[m],i==null||i(m);for(let{nodeId:S}of s.nodeRelationsEntries(y))u(S)}};for(let m of o)u(m);return n}static nodeRelationsEntries(t,e=!1){let i=e?vn.filter(o=>o!=="nextSibling"):vn,n=[];for(let o of i)_n(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}Tt(t){if(t in this.qe&&!this.We.has(t)){let e=this.qe[t];this.We.set(t,Ys(e)),this.qe[t]=Ys(e)}return this.qe[t]}F_(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:Z.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:Z.CSS_STYLESHEET_NODE,cssRules:{}}}}G_(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}$_(t){let e=Ai.getAll(t);switch(csNodenodeType.apply(t)){case Z.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.G_(i);return{type:Z.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&z(n),hoveredId:o&&z(o),...this.mp(t),metadata:e}}case Z.DOCUMENT_FRAGMENT_NODE:return{type:Z.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case Z.COMMENT_NODE:return{type:Z.COMMENT_NODE,data:void 0,metadata:e};case Z.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:Z.ELEMENT_NODE,namespaceURI:n in fc?fc[n]:n,localName:i.localName,attributes:this.z_(i),state:this.yp(i),metadata:e}}case Z.TEXT_NODE:return{type:Z.TEXT_NODE,data:t.data||"",metadata:e};case Z.CDATA_SECTION_NODE:return{type:Z.CDATA_SECTION_NODE,data:t.data,metadata:e};case Z.DOCUMENT_TYPE_NODE:return{type:Z.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}z_(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}mp(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}yp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}B_(){var t;((t=this.q_)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.q_=yi(e=>(this.Ar(e),this.Ep(),!this.hh.isEmpty())))}Ep(){if(!this.A||this.Vn)return;let t=performance.now()-this.dp,e=Math.max(0,this.fp-t);this.Vn=csSetTimeout(()=>{this.Vn=void 0;let i=this.getChanges();this.dp=performance.now(),i&&this.A(i,this.getState())},e)}W_(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.fs(e))return z(e)}Y_(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.fs(i))return z(i)}Pa(t){let e=new to;e.pushMany(this.Sp(t,!1)),!e.isEmpty()&&yi(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.Sp(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}X_(t){switch(t){case Z.DOCUMENT_NODE:return"contentDocument";case Z.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Tr(t){yi(()=>{let e=t.ownerNode;if(e&&(!this.Er(e)||!this.fs(e)))return!1;if(this.fs(t)||!e||e.localName==="style"?this.vp(t):this.uh(z(t),{type:Z.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.fs(e)){let i=z(e);this.Tt(i).sheetId=z(t)}return!1})}_p(t){let e=0,i=z(t),n=t.adoptedStyleSheets||[],o=n.length,c={};yi(l=>{if(!this.fs(t)||!this.Er(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let f=n[e];c[e]=this.fs(f)?z(f):this.vp(f),e+=1}if(e<o)return!0;let h=this.Tt(i);return h&&(h.adoptedStyleSheets=c),!1})}vp(t){let e=z(t);return this.uh(e,this.F_(t)),e}uh(t,e){this.serializedNodeCount++,this.qe[t]=e,this.Ep(),this.We.has(t)||this.We.set(t,null)}fs(t){return z(t)in this.qe}wp(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}Ap(t){let e=z(t),i=this.qe[e];if(!i){Ts.warn(`No serialized node id ${e}`);return}let n=this.Y_(t);if(!n){Ts.warn("No parent id for node",t);return}let o=this.X_(i.type);if(o==="childList"){let c=this.W_(t);this.fh(e,c,n,!0)}else{let c=this.Tt(n);c[o]=e,i.parent=n}}*Sp(t,e=!0){var i,n,o,c;if(!this.Er(t))return;if(this.fs(t)){e&&this.Ap(t);return}let l=z(t),h=this.$_(t);if(!h){Ts.warn("Node was not serialized",t);return}switch(this.uh(l,h),e&&this.Ap(t),h.type){case Z.DOCUMENT_NODE:case Z.DOCUMENT_FRAGMENT_NODE:{let u=t;this.xn.set(l,u),this.z.observe(u),!((i=u.adoptedStyleSheets)===null||i===void 0)&&i.length&&this._p(u);break}case Z.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case Z.ELEMENT_NODE:{let u=t;switch(h.localName){case"iframe":this.wp(u)&&(yield u.contentDocument);break;case"link":u.rel==="stylesheet"&&u.sheet&&this.Tr(u.sheet);break;case"style":{let m=u.sheet;m&&this.Tr(m);break}default:Mp(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Tp(z(t.ownerDocument),h.localName),csElementshadowRoot.apply(u)&&(yield csElementshadowRoot.apply(u));break}break}}let f=csNodefirstChild.apply(t);f&&(yield f)}Tp(t,e){let i=this.Tt(t),n=i.customElements||(i.customElements={});n[e]=1}ph(t){let e=this.Tt(t);if(e){switch(e.type){case Z.DOCUMENT_NODE:case Z.DOCUMENT_FRAGMENT_NODE:this.z.disconnect(this.xn.get(t)),this.xn.delete(t)}delete this.qe[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.ph(i)}}fh(t,e,i,n){let o;if(e){let c=this.Tt(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.Tt(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.Tt(t);if(c.nextSibling=o,o){let l=this.Tt(o);l.previousSibling=t}}if(t){let c=this.Tt(t);c.parent=i,c.previousSibling=e}}K_(t){var e;let i=this.Tt(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.Tt(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}Er(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}J_(t){let e=this.Tt(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}Ar(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.hh.shift());){if(this.processedMutationsCount++,!this.fs(n.target)||!this.Er(n.target))continue;let o=z(n.target);switch(n.type){case"attachShadow":{this.Pa(n.shadowRoot),this.Tt(o).shadowRoot=z(n.shadowRoot);break}case"childList":{let c,l=this.K_(o);for(let f=csNodefirstChild.apply(n.target);f;f=csNodenextSibling.apply(f)){this.fs(f)||this.Pa(f);let u=z(f);l.delete(u),this.fh(u,c,o),c=u}this.fh(void 0,c,o);for(let f of l)this.J_(f),this.ph(f);let h=this.Tt(o);if(h.type===Z.ELEMENT_NODE&&h.localName==="style"){let f=n.target.sheet;f&&this.Tr(f)}break}case"characterData":{let c=this.Tt(o);if(c.type===Z.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Tr(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.Tt(o),f=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},f===null?delete h.attributes[c]:h.attributes[c]=f;break}case"state":{let c=this.Tt(o);c.type===Z.DOCUMENT_NODE?Object.assign(c,this.mp(n.target)):c.state=this.yp(n.target);break}case"setAdoptedStyleSheets":{this._p(n.target);break}case"styleSheetUpdated":{this.Tr(n.target);break}case"styleSheetDisabledChanged":{let c=this.Tt(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Tr(c.sheet);break}case"iframe":{let c=n.target,l=this.Tt(o),h=c.contentDocument,f=h&&z(h);l.contentDocument&&l.contentDocument!==f&&(this.ph(l.contentDocument),delete l.contentDocument),this.wp(c)&&this.Pa(h);break}}break}case"activeElementChanged":{let c=this.Tt(o),l=n.target.activeElement||void 0;c.activeId=l&&z(l);break}case"pointerOverElement":{let c=this.Tt(o),l=n.element||void 0;c.hoveredId=l&&z(l);break}case"customElementRegistration":{this.Tp(o,n.name);break}}}}}return s.trackIframeContent=!1,s})(),Jy=(()=>{class s extends ai{constructor(t){super(),this.tt=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||si.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(si.isDOMEvent(t))t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI);else for(let e of Ky.findNodes(t.state,i=>i.type===Z.DOCUMENT_NODE))e&&e.type===Z.DOCUMENT_NODE&&(e.baseURI=this.tt.anonymizeUrl(e.baseURI));return t}}return xe([It("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Qy="textarea",Zy=(()=>{class s extends ai{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||si.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.Q_(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Z_(t);break;case"characterDataChanged":this.tw(t);break}return t}Q_(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n of Object.keys(e)){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.bp(o,c.metadata,l.localName)}}Z_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)rt.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.bp(n,h,l)})}bp(t,e,i){this.Rp(i,e)&&(t.data=this.Cp(t.data))}tw(t){this.Rp(t.parentLocalName,t.targetProps)&&(t.newValue=this.Cp(t.newValue))}Cp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Rp(t,e){return t===Qy||(e==null?void 0:e[ss.EDITABLE_NODE_PROP])===!0}}return xe([It("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var ql=!0,Er=csSymbol("safe"),pc=csSymbol("task");function gt(s,r=ql){var t;(t=s[Er])!==null&&t!==void 0||(s[Er]=function(e){let i=arguments;Ds(()=>(e[pc]=zt,s.listener.apply(s.boundElement,i)),[Se.EventListener,s.type],e[pc])}),s.boundElement.addEventListener(s.type,s[Er],r)}function mt(s,r=ql){s.boundElement.removeEventListener(s.type,s[Er],r)}var tE=(()=>{class s{constructor(t){this.A=t,this.Kt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){gt(this.Kt),this.gh()}gh(){this.resizeListener()}disconnect(){mt(this.Kt)}resizeListener(){let t={width:bt.windowWidth(),height:bt.windowHeight()};this.A(t)}}return tt([N("resize")],s.prototype,"resizeListener",null),s})(),es=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),cr=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),lr=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),eE=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=it.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in it;function e(){return es.LANDSCAPE}function i(){var c;switch((c=it.screen.orientation)===null||c===void 0?void 0:c.type){case cr.PORTRAIT_PRIMARY:case cr.PORTRAIT_SECONDARY:return es.PORTRAIT;case cr.LANDSCAPE_PRIMARY:case cr.LANDSCAPE_SECONDARY:return es.LANDSCAPE;default:return es.PORTRAIT}}function n(){switch(window.orientation){case lr.PORTRAIT:case lr.PORTRAIT_REVERSE:return es.PORTRAIT;case lr.LANDSCAPE:case lr.LANDSCAPE_REVERSE:return es.LANDSCAPE;default:return es.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),sE=(()=>{class s extends Ae{constructor(){super(...arguments),this.mh=null,this.yh=null,this.ci=new tE(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=eE.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.ew(t);if(e!==this.mh||i!==this.yh){this.mh=e,this.yh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}ew(t){let e,i,n=bt.screenWidth(),o=bt.screenHeight();return t===es.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ci.observe()}onStop(){this.mh=null,this.yh=null,this.ci.disconnect()}}return s})();function iE(s){let r=csEventtarget.apply(s);return r&&dt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var ue=(()=>{class s{get selectors(){return this.Ye===""?null:this.Ye}constructor(t,e={closest:!1}){this.A=t,this.Pt=e,this.Ye="",this.Hn=new Hr,this.Ar=ks(i=>{if(this.Ye==="")return;let n=[];for(let o of vo(i,c=>c.addedNodes)){if(!(Nd(o)||this.Pt.closest&&Ar(o)))continue;let c=this.Pt.closest?this.iw(o,this.Ye):this.findMatchingElements(o,this.Ye);Ia(c,n)}n.length&&this.A(n,"added")},"SelectorObserver.processMutations"),this.rw=(i,n)=>{if(this.Ye===""||n!=="added")return;let o=this.findMatchingElements(i,this.Ye);o.length&&this.A(o,"added")},this.z=new we(this.Ar,this.rw)}observe(t){this.Ye===""?this.z.observe():this.Ye+=",",this.Ye+=t;let e=this.findMatchingElements(document,t);for(let i of this.z.shadowRoots){let n=this.findMatchingElements(i,t);Ia(n,e)}e.length&&(K(e,i=>{this.Hn.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.Ar(this.z.takeRecords())}disconnect(){this.z.disconnect(),this.Hn.clear(),this.Ye=""}iw(t,e){let i=[];if(Ar(t)){if(t.parentElement){let n=ti(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Hn.has(n)===!1)}else{if(ke(t)){let n=ti(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Hn.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Qs(window.csquerySelectorAll[t.nodeType].call(t,e));return dt(t)&&Jt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Hn.has(n)===!1)}}return tt([N()],s.prototype,"observe",null),tt([N()],s.prototype,"disconnect",null),tt([It("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),rE=(()=>{class s extends Ae{constructor(){super(),this.Ip=t=>{let e=iE(t);e&&this.Eh(e,t.type)},this.ye=new oi((t,e)=>{switch(e){case"initial":case"added":this.Pp(t);break;case"removed":this.Op(t);break}}),this.W=new ue((t,e)=>{(e==="initial"||e==="added")&&this.nw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&nt.isConnected(t)&&!L.isMaskedElement(t)&&!L.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Pp(document),this.ye.observe(),this.W.observe("video")}onStop(){this.Op(document),this.ye.disconnect(),this.W.disconnect()}Eh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=z(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),So(()=>this.produceEvent(o))}}nw(t){for(let e of t)this.Eh(e,"seeked"),s.isPlaying(e)&&this.Eh(e,"play")}Pp(t){for(let e of["play","pause","seeked"])gt({type:e,listener:this.Ip,boundElement:t})}Op(t){for(let e of["play","pause","seeked"])mt({type:e,listener:this.Ip,boundElement:t})}}return s})();function nE(s){return s.nodeName==="SELECT"}function Xo(s){return s.nodeName==="INPUT"}function oE(s){return s.nodeName==="TEXTAREA"||Xo(s)&&!Wl(s)&&!Yl(s)}function Wl(s){return Xo(s)&&s.type==="number"}function Yl(s){return Xo(s)&&(s.type==="checkbox"||s.type==="radio")}var aE=(()=>{class s extends Ae{constructor(t){super(),this.ht=t,this.Sh=new Jm("low"),this.Rr=e=>this.inputHandler(e),this.Li=[],this.ow(),this.aw(),this.W=new ue(e=>{for(let i of e)this.vh(i)&&qt(()=>{this._h(i,z(i))},"low")}),this.ye=new oi((e,i)=>{switch(i){case"initial":case"added":gt({type:"change",listener:this.Rr,boundElement:e});break;case"removed":mt({type:"change",boundElement:e,listener:this.Rr});break}})}onStart(){gt({type:"keyup",boundElement:document,listener:this.Rr}),gt({type:"change",boundElement:document,listener:this.Rr}),K(this.Li,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.lw,",")),this.ye.observe()}onStop(){mt({type:"keyup",boundElement:document,listener:this.Rr}),mt({type:"change",boundElement:document,listener:this.Rr}),K(this.Li,t=>t.deactivate()),this.W.disconnect(),this.ye.disconnect(),this.Sh.clear()}_h(t,e){var i,n,o;if(this.Sh.has(t))return;if(this.Sh.add(t),nE(t)){let h={type:"InputEvent",inputType:"select",target:z(t),selectedIndex:t.selectedIndex,timestamp:D.now()};this.produceEvent(h);return}if(Yl(t)){let h={type:"InputEvent",inputType:"checkable",target:z(t),checked:t.checked,timestamp:D.now()};this.produceEvent(h);return}let c=oE(t),l=Wl(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ht)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ht)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:D.now()});return}let f=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:z(t),value:csString.prototype.replace.call(h,/\S/g,f),timestamp:D.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=Ct(t),i=z(e);!i||!this.vh(e)||nt.isConnected(e)&&qt(()=>{this._h(e,i)},"low")}ow(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}aw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Or(t.prototype,e,(o,c,l)=>{if(l!==c&&nt.isConnected(o)){let h=i?o.parentElement:o;this.hw(h)}});n&&csArray.prototype.push.call(this.Li,n)}vh(t){return!L.isMaskedElement(t)&&!L.isMaskedElementChild(t)&&(kr(t)||bo(t)||To(t))}hw(t){if(this.isStarted&&nt.isConnected(t)){let e=z(t);e&&this.vh(t)&&qt(()=>{this._h(t,e)},"low")}}}return s.lw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],xe([ut()],s.prototype,"inputHandler",null),xe([N()],s.prototype,"trackChanges",null),s})();var cE=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.li=[],this.ot=[],this.uw=t}next(t){this.ot.length===this.uw&&csArray.prototype.shift.call(this.ot),csArray.prototype.push.call(this.ot,t),this.ot.length===1&&csSetTimeout(()=>this.clear());for(let e of this.li)e(t)}subscribe(t){if(Ms(this.li,i=>t===i))return()=>{this.li=csArray.prototype.filter.call(this.li,i=>i!==t)};csArray.prototype.push.call(this.li,t);for(let i of this.ot)t(i);return()=>{this.li=csArray.prototype.filter.call(this.li,i=>i!==t)}}clear(){this.ot=[]}hasObservers(){return this.li.length>0}}return s})(),Xl=(()=>{var s;class r{constructor(e){this.A=e}observe(){this.fw=s.Bn.subscribe(e=>this.A(e)),s.Oa||(s.Oa=!0,s.Dn.observe(),ne(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ns.add(i),s.Bn.next(i)}))}disconnect(){s.Oa&&(this.fw(),s.Bn.hasObservers()||(s.Oa=!1,s.Dn.disconnect(),s.Bn.clear(),s.Ns.clear()))}}return s=r,r.Ns=new Hr,r.Bn=new cE,r.pw=ks(t=>{qt(()=>{for(let e of t)e.type==="childList"&&K(e.addedNodes,i=>{ne(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ns.has(o)||(s.Ns.add(o),s.Bn.next(o))})})})},"ElementObserver.findAllElements"),r.Oa=!1,r.Dn=new we(s.pw),tt([N()],r.prototype,"observe",null),tt([N()],r.prototype,"disconnect",null),r})(),lE=(()=>{class s extends Ae{constructor(){super(),this.Ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.gw=ls("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)L.isMaskedElement(i)||L.isMaskedElementChild(i)||Dd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Br(this.gw);this.Fn=new Xl(e=>t.push(e)),this.ai=new Set}onStart(){this.Ms&&this.Fn.observe()}onStop(){this.ai.clear(),this.Fn.disconnect()}async register(t){this.ai.has(t)||(this.ai.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return xe([N()],s.prototype,"register",null),s})(),gc=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Np(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.mw(t))}static mw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.xi=i,s.Cr(i))}static Cn(t){this.yw(t),this.xi&&t(this.xi),this.He||this.Ew()}static yw(t){this.xt.add(t)}static Sw(t){this.xt.delete(t)}static Ew(){if(this.Gn||(this.Gn=this.Np()),!this.Gn){this.xi||(this.xi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Cr(this.xi);return}this.Gn.observe({type:"navigation",buffered:!0}),this.He=!0}static Cr(t){this.xt.forEach(e=>e(t))}static Pn(t){this.Sw(t),this.xt.size===0&&this.$n()}static $n(){var t;this.He&&((t=this.Gn)===null||t===void 0||t.disconnect(),this.He=!1,this.xi=null,this.Gn=this.Np())}constructor(t){this.A=t}observe(){s.Cn(this.A)}disconnect(){s.Pn(this.A)}}return s.He=!1,s.xt=new Set,s.xi=null,s})(),hE=(()=>{class s extends Ae{constructor(){super(...arguments),this.Na=null,this.Mp=new gc(t=>{if(this.Na)return;let e=this.vw(t);e&&(this.Na=e,this.produceEvent(e))})}onStart(){if(this.Na){this.produceEvent(this.Na);return}this.Mp.observe()}onStop(){this.Mp.disconnect()}vw(t){let e=gc.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:D.now()}}}return s})(),Tt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),hr=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),uE=(()=>{class s{compute(t,e){let i=this.hi(e.x)-this.hi(t.x),n=this.hi(e.y)-this.hi(t.y),o=e.time-t.time;return{duration:o,distance:this.Dp(i,n),direction:this._w(i,n),velocity:this.Aw(i,n,o)}}computePinchMetrics(t,e){let i=this.hi(e.x)-this.hi(t.x),n=this.hi(e.y)-this.hi(t.y);return{duration:e.time-t.time,distance:this.Dp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}hi(t){return t/window.devicePixelRatio}Dp(t,e){return Math.round(Math.sqrt(t*t+e*e))}Aw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}_w(t,e){return Math.abs(t)>Math.abs(e)?t>0?hr.RIGHT:hr.LEFT:e>0?hr.DOWN:hr.UP}}return s})(),Kl=typeof performance!="undefined"&&!!performance.now,mc=Kl?()=>performance.now():()=>csDate.now(),dE=(()=>{var s;return Kl?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),ur={now(){return Math.round(mc()+dE)},elapsed(){return mc()}};function yc(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var fE=1e3,pE=100,gE=.1,so=(()=>{class s{constructor(){this.Jt={},this.Ah=()=>{},this.Ma=new uE,this.Oe()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Ah=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.Tw(t))return;this.bw(t)&&this.Oe();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:ur.now()};if(t.touches.length===1)this.Jt.startPinchTime=e.time,this.Jt.firstTouch=e;else if(t.touches.length===2&&(this.Jt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:ur.now()},this.Jt.firstTouch&&this.Jt.secondTouch)){let i=this.Ma.computePinchMetrics(this.Jt.firstTouch,this.Jt.secondTouch);this.Ir=i.distance}csArray.prototype.push.call(this.zn,e),this.Da=Ct(t)}processActionMove(){this.Th=!0}processActionUp(t){if(this.Rw(t)){if(csArray.prototype.push.call(this.zn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:ur.now()}),this.Cw(t)&&this.Jt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Jt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:ur.now()};this.Jt.firstTouch&&(this.Jt.firstTouch=e,this.Jt.secondTouch=i),this.Iw(t)}this.Ir||this.Pw()&&this.Ow(t)}}Oe(){this.zn=[],this.Da=null,this.Th=!1,this.Ir=null,this.qn=!0}Ow(t){let e=this.Ma.compute(this.zn[0],this.zn[1]);this.qn=t.isTrusted;let i=this.Th?this.Nw(e):this.Mw(e);if(this.Dw(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=yc(n.pageX,1),i.pageY=yc(n.pageY,1)}this.Ah(i,t)}Iw(t){if(!(this.Jt.firstTouch&&this.Jt.secondTouch))return;let e=this.Ma.computePinchMetrics(this.Jt.firstTouch,this.Jt.secondTouch);this.qn=t.isTrusted;let i=this.kw(e);i&&this.Ah(i,t)}kw(t){return!this.Ir||this.Ma.getScale(this.Ir,t.distance)<gE?void 0:{type:this.Ir>t.distance?Tt.PINCH_IN:Tt.PINCH_OUT,target:this.Da,distance:t.distance,isTrusted:this.qn}}Nw(t){return{type:t.velocity<pE?Tt.DRAG:Tt.FLICK,target:this.Da,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.qn}}Mw(t){return{type:t.duration<fE?Tt.TAP:Tt.LONG_PRESS,target:this.Da,isTrusted:this.qn}}Dw(t,e){return t===Tt.TAP&&e&&e.length===1}bw(t){return t.touches.length===1}Pw(){return this.zn.length===2}Tw(t){return t.touches.length>0}Rw(t){return t.changedTouches.length>0}Cw(t){return this.Th&&!!this.Ir&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),mE="touchstart",yE="touchmove",EE="touchend",Jl=(()=>{class s{constructor(t){this.A=t}observe(){s.kp&&s.bh(this.A)}disconnect(){s.kp&&s.Un(this.A)}static Lw(t,e){csArray.prototype.forEach.call(hs(s.xt),i=>i(t,e))}static bh(t){s.xt.has(t)||(s.xt.add(t),s.xt.size===1&&(s.Wn.onGesture(s.Lw),csArray.prototype.forEach.call(s.fi,e=>gt(e))))}static Un(t){s.xt.delete(t),s.xt.size===0&&csArray.prototype.forEach.call(s.fi,e=>mt(e))}static Rh(t){if(s.Wn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Wn.processActionDown(t);break;case"touchmove":s.Wn.processActionMove();break;case"touchend":s.Wn.processActionUp(t);break}}}return s.fi=[{boundElement:it.document,type:mE,listener:r=>s.Rh(r)},{boundElement:it.document,type:yE,listener:r=>s.Rh(r)},{boundElement:it.document,type:EE,listener:r=>s.Rh(r)}],s.kp=so.isGestureDetectionSupported(),s.xt=new Set,s.Wn=new so,s})(),SE=(()=>{class s extends Ae{constructor(){super(),this.Yn=new Jl(this.Ch.bind(this))}onStart(){this.Yn.observe()}onStop(){this.Yn.disconnect()}Ch(t){let e=this.xw(t);e&&this.produceEvent(e)}xw(t){return this.Vw(t)?{type:"Gesture",targetId:z(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Vw(t){return t.target!==null&&!(dt(t.target)&&L.isMaskedElementChild(t.target))}}return s})(),Ql=(()=>{class s{constructor(t){this.A=t,this.pi=!1,this.Kt={boundElement:it,type:"error",listener:e=>this.Uw(e)}}observe(){gt(this.Kt,this.pi)}disconnect(){mt(this.Kt,this.pi)}Uw(t){this.A(t)}}return s})(),vE=(()=>{class s extends Ae{constructor(){super(...arguments),this.Lp=new Ql(t=>this.ka(t))}ka({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||se(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.Lp.observe()}onStop(){this.Lp.disconnect()}}return s})(),_E=(()=>{class s extends ai{constructor(t){super(),this.jw=t,this.Ih=1024,this.Ph=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=lt.truncate(t.message,this.Ih,lt.ELLIPSIS),t.filename=lt.truncate(t.filename,this.Ph,lt.ELLIPSIS),this.jw(t)}}return s})();var qs=[],io=!1,Zl=ks(AE,"executeTasks");function wE(s){if(csArray.prototype.push.call(qs,s),!io){for(let r=0;r<3;r++)csSetTimeout(Zl);io=!0}}function AE(){let s=csDate.now();for(let r=0;r<qs.length;r++)if(qs[r](),csDate.now()-s>=35){qs=csArray.prototype.slice.call(qs,r+1),csSetTimeout(Zl);return}qs=[],io=!1}var Qe=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),th=(()=>{class s{constructor(){this.vt=new Li,this.Dt=Qe.Stopped,this.A=null,this.Vp=t=>{this.Dt===Qe.Stopped||!t||(this.A(t),this.Up())}}get queueLength(){return this.vt.length}start(t){if(this.A)throw new Error("callback already set");this.Dt=Qe.Started,this.A=t}push(t){this.vt.push(t),this.Dh()}stop(){this.A=null,this.Dt=Qe.Stopped,this.vt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),K(i,h=>h.subscribe(f=>l.push(f))),i=[c]}let o=new TE(n);return K(i,c=>c.subscribe(l=>o.push(l))),o}jp(){return this.Dt===Qe.Stopped}ps(){return this.Dt===Qe.Processing}Up(){if(!this.jp()){if(this.vt.isEmpty){this.Dt=Qe.Completed;return}this.Dt=Qe.Processing,wE(()=>{let t=this.vt.pop();t instanceof qo?t.complete(this.Vp):this.Vp(t)})}}Dh(){this.jp()||this.ps()||this.Up()}}return s})(),TE=(()=>{class s extends th{constructor(t){super(),this.Hp=t}get queueLength(){return csArray.prototype.reduce.call(this.Hp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),K(this.Hp,t=>t.stop())}}return s})(),bE=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.Y=!1,this.xt=[]}get pendingEvents(){var t,e;return(e=(t=this.vt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.Y)throw new Error("Recording is already started.");let t=this.xt;this.vt=th.pipe(this.producers,this.processors),this.vt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),K(this.producers,e=>e.start()),K(this.processors,e=>e.start()),this.Y=!0}stop(){this.vt.stop(),this.xt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.Y=!1,this.xt=[]}subscribe(t){if(this.Y)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.xt,t),()=>this.xt=csArray.prototype.filter.call(this.xt,e=>e!==t)}}return s})(),RE=2,Ko=(()=>{class s{constructor(t){this.Gw=t,this.La=0}addString(t){this.La+=t.length*RE}addArrayBuffer(t){this.La+=t.byteLength}isThresholdReached(){return this.La>this.Gw}reset(){this.La=0}}return s})(),CE=(()=>{class s{constructor(t){this.xa={},this.Ne=new Ko(t)}save({key:t,metadata:e,events:i}){this.Ne.isThresholdReached()||(this.Ne.addString(t),typeof i=="string"?this.Ne.addString(i):this.Ne.addArrayBuffer(i),!this.Ne.isThresholdReached()&&(this.xa[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.$w(),i=>{let n=this.xa[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.zw(i))}),e.length!==0&&(t(e),this.Ne.reset())}$w(){return Object.keys(this.xa)}zw(t){delete this.xa[t]}}return s})(),Ze=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),IE=(()=>{class s{constructor(t,e,i){this.Pr=t,this.qw=i,this.Vi=Ze.NOT_STARTED,this.Va=[],this.kh=0,this.Ww=self.origin,this.Me=typeof window=="object"?"":"worker-",this.Ne=new Ko(e),this.Xl()}async Xl(){await this.Bp(),this.Vi===Ze.READY?this.Yw():this.qw(this.Va)}Yw(){csArray.prototype.forEach.call(this.Va,t=>{this.save(t)}),this.Va=[]}async save(t){try{if(this.Vi===Ze.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Va,t);return}if(this.Vi!==Ze.READY||this.Ne.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ne.addString(e),typeof n=="string"?this.Ne.addString(n):this.Ne.addArrayBuffer(n),this.Ne.isThresholdReached())return;await this.ne.put(`${this.Ww}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ne&&(await this.Bp(),this.Vi!==Ze.READY)||this.Xw(t)}async Bp(){try{this.Vi=Ze.OPEN_IN_PROGRESS,this.ne=await self.caches.open(`${this.Me}${this.Pr}`),this.Vi=Ze.READY}catch{this.Vi=Ze.OPEN_FAILED}}async Xw(t){try{if(this.kh++,this.kh>1)return;let e=await this.ne.keys();if(e.length===0)return;let i=await this.ne.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((f,u)=>{l[u]=f}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(f=>({metadata:l,events:f})):c.arrayBuffer().then(f=>({metadata:l,events:f}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ne.delete(c))),t(o),this.Ne.reset()}catch{}finally{this.kh--}}}return s})(),PE=(()=>{class s{constructor(t){try{this.Kw(t)}catch{this.Lh()}}Kw(t){self.caches?this.Jw(t):this.Lh()}save(t){this.Ua.save(t)}recover(t){this.Ua.recover(t)}Jw(t){this.Ua=new IE(t,s.Fp,e=>{this.Lh(e)})}Lh(t){this.Ua=new CE(s.Fp),t&&csArray.prototype.forEach.call(t,e=>{this.Ua.save(e)})}}return s.Fp=1024*1024*16,s})(),Fr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),eh=(()=>{class s{}return s})(),sh=(()=>{class s{constructor(t){this.Gp=[],this.$p=[],this.Xe={},this.ja=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xe[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Xe[e]}):this.Xe={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Gp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.$p,t)}send(t){let e=Oi.toQuery({...this.Xe,ct:Fr.UNCOMPRESSED}),i=this.Qw(e,t);return i?csArray.prototype.forEach.call(this.Gp,n=>n()):csArray.prototype.forEach.call(this.$p,n=>n(this.Xe)),i}Qw(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.ja}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.ja}?${t}`,e||"")}}return s})(),OE=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.Xn=ee.ETR_DISABLED,this.Ha=ee.ETR_PENDING,this.xh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.zp()&&e===ee.ETR_SAVED_SESSION?e:this.Xn}onEventTriggerRecording(t,e){switch(e){case as.ETR_PAGE:this.qp(ee.ETR_SAVED_PAGE);break;case as.ETR_LEGACY:case as.ETR_SESSION:this.qp(ee.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===k.RECORDING_TEMPORARILY?this.xh=!0:this.xh=!1,t===k.ANALYTICS_ONLY&&e===re.ETR_ON?this.Wp(this.Ha):this.Wp(ee.ETR_DISABLED)}Wp(t){this.Xn=t,this.Ha=ee.ETR_PENDING,this.Yp(t),this.w.emitRecordingContextChange()}qp(t){this.xh?Number(t)>Number(this.Ha)&&(this.Ha=t):this.zp()&&Number(t)>Number(this.Xn)&&(this.Xn=t,this.Yp(t),this.w.emitRecordingContextChange())}Yp(t){let e=this.R.getSession();e!==null&&e.etrStatus===ee.ETR_NOT_SAVED_SESSION&&t===ee.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}zp(){return this.Xn!==ee.ETR_DISABLED}}return s})(),NE=(()=>{class s{constructor(t=100){this.Zw=t,this.Ba={},this.Kn=null,this.ih="original-resource-name"}onEvent(t){this.tA=t}processEvent(t){this.eA(t.resourceId,t.resource.hash,t.originalResourceName),this.sA(t)}flushEvents(){this.Kn&&csClearTimeout(this.Kn),this.Xp()}onSendStaticResource(t){this.sA=t}Xp(){if(!Object.keys(this.Ba).length)return;let t={type:x.RESOURCE_HASHES,date:D.now(),args:[this.Ba]};this.Kn=null,this.Ba={},this.tA(t)}eA(t,e,i){let n=e;i&&(n+=`?${this.ih}=${i}`),this.Ba[t]=n,!this.Kn&&(this.Kn=window.csSetTimeout(()=>this.Xp(),this.Zw))}}return s})();function ME(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:x.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:x.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:x.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:x.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:x.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:x.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=X(o)?[i,n,o]:[i,n];r({type:x.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:x.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:x.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:x.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:x.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:x.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:x.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=X(o)?[i,n,o]:[i,n];r({type:x.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:x.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:x.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:x.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:H.error("translateDOMEvent: DOMEvent not supported");break}}function DE(s){let r=kE(s.data);return{type:x.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function kE(s){let r={type:LE(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function LE(s){switch(s){case Tt.DRAG:case Tt.FLICK:return gi.SWIPE;case Tt.LONG_PRESS:return gi.LONG_PRESS;case Tt.TAP:return gi.TAP;case Tt.PINCH_IN:return gi.PINCH_IN;case Tt.PINCH_OUT:return gi.PINCH_OUT}}function xE(s){switch(s.inputType){case"text":return{type:x.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:x.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:x.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var wn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function VE(s){return{type:x.PERFORMANCE_TIMINGS,args:[{performanceTiming:wn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:wn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:wn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var UE=500,An=0;function jE(){return{processEvent(s,r){if(s.originalEvent.type===x.PERFORMANCE_RESOURCE_TIMING)return An>=UE?null:(An+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){An=0}}}function HE(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var BE=20;function FE(s){return HE(r=>{let t={visibleInViewPort:r},e={type:x.TEXT_VISIBILITY,date:D.now(),args:[t]};s(e)},{batchSize:BE,autoFlushDelay:1e3})}function GE(s){switch(s.videoEventType){case"play":return{type:x.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:x.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:x.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var $E=(()=>{class s{get pendingEvents(){return this.Fa.pendingEvents}constructor(t,e,i,n,o){this.Fa=t,this.w=e,this.De=i,this.gs=n,this.Ds=o,this.Qt=()=>{},this.Ga=()=>{},this.Kp=FE(c=>this.Qt(c))}start(){var t,e;this.Jp=jE(),this.Fa.subscribe(i=>{var n,o,c,l,h,f;let u=i,{timestamp:m}=u;switch(u.type){case"Legacy":{let y=u.eventType==="user"?(n=this.Ga)!==null&&n!==void 0?n:()=>{}:this.Qt;this.Jp.processEvent(u,y)}break;case"CustomElementRegistration":{this.Qt({type:x.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[u.tagName]});break}case"DomEvent":{ME(u,this.Qt,this.w);break}case"InputEvent":{let y=xE(u);(o=this.Ga)===null||o===void 0||o.call(this,y);break}case"encryptedCharacterDataChanged":{let{target:y,rawData:S,encryptedData:C,encryptionMetadata:O}=u;this.Qt({type:x.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[y,S,C,O]});break}case"StaticResource":{let{url:y}=u;this.Qt({type:x.STATIC_RESOURCE_URL,date:m,args:[y]});break}case"ResizeMaskedElement":{let{target:y,width:S,height:C}=u;this.Qt({type:x.MUTATION_ATTRIBUTE,date:m,args:[y,"","style",`width:${S}px !important;height:${C}px !important;`]});break}case"Gesture":{let y=DE(i);(c=this.Ga)===null||c===void 0||c.call(this,y);break}case"TextVisibility":{this.Kp.push(u.text);break}case"StaticResourceManagerEvent":{(l=this.De)===null||l===void 0||l.processEvent(u);break}case"screenResize":{let{width:y,height:S}=u,C={type:x.SCREEN_RESIZE,date:m,args:[y,S]};this.Qt(C);break}case"viewportResize":{let{width:y,height:S}=u,C={type:x.RESIZE,date:m,args:[y,S]};this.Qt(C);break}case"PerformanceTiming":{this.Qt(VE(u));break}case"CustomError":{let y=(h=this.Ds)===null||h===void 0?void 0:h.translate(u);y&&this.Qt(y);break}case"JSError":{let y=(f=this.gs)===null||f===void 0?void 0:f.translate(u);y&&this.Qt(y);break}case"VideoEvent":{let y=GE(u);y&&this.Qt(y);break}case"DOM_INITIAL_STATE":{let y={type:x.DOM_INITIAL_STATE,date:m,args:[u.state]};this.w.emitInitialDomDone(y);break}case"DOM_PATCH":{let y={type:x.DOM_PATCH_STATE,date:m,args:[u.diff]};this.Qt(y);break}case"warning":{H.warn(u.message);break}default:H.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.w.emitInitialDomStart(),(t=this.gs)===null||t===void 0||t.start(),(e=this.Ds)===null||e===void 0||e.start(),this.Fa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Fa.stop(),(t=this.De)===null||t===void 0||t.flushEvents(),(e=this.gs)===null||e===void 0||e.stop(),(i=this.Ds)===null||i===void 0||i.stop()}flush(){this.Kp.flush()}onEvent(t,e){var i;this.Qt=t,this.Ga=e,(i=this.De)===null||i===void 0||i.onEvent(n=>this.Qt(n))}reset(){this.Jp.reset()}}return s})();var zE=(()=>{class s{constructor(t){this.$a=t,this.Jn=20,this.ji=0,this.j=!1}translate(t){if(this.ji>=this.Jn)return this.$a.stop(),null;this.ji+=1;let{filename:e,message:i,lineno:n,colno:o,timestamp:c}=t;return{type:x.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:o}]}}start(){this.j||(this.ji=0,this.j=!0)}stop(){this.j=!1}}return s})(),qE=(()=>{class s extends Ae{constructor(t){super(),this.Be=t}subscribe(t){return super.subscribe(t)}onStart(){K(this.Be,t=>{t.onEvent(e=>{var i;return this.Or(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),K(this.Be,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){K(this.Be,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Or(t,e){this.produceEvent({timestamp:D.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),ih=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.iA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.rA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static rA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.iA="cs.tracking.",s})(),ie=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),rh=(()=>{class s{constructor(){this.j=!1,this.gi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.oe(ie.Hidden):this.oe(ie.Visible);case"pagehide":return document.visibilityState==="hidden"?this.oe(ie.PagehideHidden):this.oe(ie.PagehideVisible);case"blur":return this.oe(ie.Blur);case"navigate":return this.nA(t)?this.oe(ie.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.j||(this.j=!0,this.Vh(),this.oA(),this.aA(),ba()&&this.cA())}stop(){this.j&&(this.j=!1,this.Uh(),this.lA(),this.hA(),ba()&&this.uA())}onEvent(t){this.oe=t}cA(){window.navigation.addEventListener("navigate",this.gi)}uA(){window.navigation.removeEventListener("navigate",this.gi)}Vh(){document.addEventListener("visibilitychange",this.gi)}Uh(){document.removeEventListener("visibilitychange",this.gi)}oA(){window.addEventListener("pagehide",this.gi)}lA(){window.removeEventListener("pagehide",this.gi)}aA(){window.addEventListener("blur",this.gi)}hA(){window.removeEventListener("blur",this.gi)}nA(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),Vt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),WE=(()=>{class s{constructor(t,e,i=[]){this.Or=t,this.jh=e,this.dA=i,this.za=null,this.Dt=Vt.Active,this.ot=[]}reset(){this.za=null,this.ot=[],this.Dt=Vt.Active}disconnect(){this.Dt=Vt.Stopped}fA(){this.jh(Vt.Paused),this.Dt=Vt.Paused,csSetTimeout(()=>{this.Dt===Vt.Paused&&this.Hh()},s.STOP_TIMEOUT)}pA(){this.jh(Vt.Active),this.Dt=Vt.Active,K(this.ot,this.Or),this.ot=[]}Hh(){this.ot=[],this.jh(Vt.Stopped),this.Dt=Vt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.za=t.date,this.Dt!==Vt.Active)){this.pA(),this.Or(t);return}if(this.gA(t)){this.Or(t);return}switch(this.Dt){case Vt.Active:if(this.mA(t,e)){this.fA(),csArray.prototype.push.call(this.ot,t);return}this.Or(t);break;case Vt.Paused:csArray.prototype.push.call(this.ot,t);break;case Vt.Stopped:break}}mA(t,e){return!e.isUserEvent&&this.za!==null&&t.date-this.za>s.INACTIVITY_TIMEOUT}gA(t){return csArray.prototype.indexOf.call(this.dA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),YE=2e3,XE=(()=>{class s extends Ut{constructor(t,e,i,n,o,c,l,h,f,u,m,y,S,C=[],O,v,w,P,M){super(),this.E=t,this.G=e,this.yA=i,this.F=n,this.R=o,this.Se=c,this.pt=l,this.ve=h,this.ht=f,this.X=u,this.Vt=m,this.Ot=y,this.Fe=S,this.Be=C,this.Qp=O,this.Zt=v,this.Nr=w,this.gs=P,this.Ds=M,this.mi=0,this.yi=new ih,this.Mr={allowFromQuotaService:!0,allowFromSerialization:!0},this.Zp=Vr(()=>{this.G.eventsCount()>0&&this.tg()},YE),this.ks=T=>this.processBrowserEvent(T),this.Qn=T=>this.Ut(T),this.qa=0,this.Zn=0,this.Ke=new rh,this.Bh=!1,this.eg=50*1024,this.Hi=!1,this.to=!1,this.Di=[],this.Wa=new WE(T=>this.Z(T),T=>{switch(T){case Vt.Active:this.EA();break;case Vt.Stopped:this.SA();break}},[x.RESOURCE_HASHES,x.TEXT_VISIBILITY,x.API_ERROR,x.JAVASCRIPT_ERROR]),this.sg=T=>{this.Vt.removeBatchInProgress(`${T.params.sn}.${T.params.pn}.${T.params.ri}`)}}init(){this.Fh(),this.X.onLoad(this.sg),this.X.onError(this.sg)}EA(){csArray.prototype.forEach.call(this.Qp,t=>t.start())}SA(){csArray.prototype.forEach.call(this.Qp,t=>t.stopForInactivity())}Fh(){var t,e,i;this.Fe.onEvent(this.ks,this.Qn),(t=this.ht)===null||t===void 0||t.onInputNodeToEncrypt(this.Qn),(e=this.ht)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.ig(n)}),(i=this.ht)===null||i===void 0||i.onUserIdentifierToEncrypt(this.ks),this.Ke.onEvent(n=>{if(csSetTimeout(()=>this.Bi("page-state",n)),n!==ie.Visible){if(n===ie.Blur)return this.rg();if(!this.Bh)return this.Bh=!0,csSetTimeout(()=>{this.Bh=!1}),n===ie.Hidden?this.rg():this.vA()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}rg(){if(!this.canSendEvents())return;this.Fe.flush(),this.Vt.saveBatchesInProgress(),K(this.Be,c=>{var l,h;return K((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],f=>this.G.addEvent(f))});let t=this.G.getEvents();if(t.length===0)return;this.Bi("pending-events",this.Fe.pendingEvents);let e=this.X.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Zn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.G.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Ot.removeQueryParams(),this.Ot.setQueryParams(e);let o=this.G.stringifyEvents();if(o.length>this.eg){let c=this.ng();if(c.length>0){let l=Ps(c);this.Ot.send(l)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.G.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.G.stringifyEvents();this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Ot.send(o)||this.Vt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Ot.removeQueryParams(),this.G.clearEvents()}vA(){if(!this.canSendEvents())return;this.Fe.flush();let t=this.X.getQueryParams();this.Vt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Ot.removeQueryParams(),K(this.Be,n=>{var o,c;return K((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.G.addEvent(l))});let e=this.G.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Ot.setQueryParams(t),this.Ot.send(),this.Ot.removeQueryParams();return}this.Bi("pending-events",this.Fe.pendingEvents),this.Zn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Ot.setQueryParams(t);let i=this.G.stringifyEvents();if(i.length>this.eg){let n=this.ng();if(n.length>0){let o=Ps(n);this.Ot.send(o)||this.Vt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Ot.removeQueryParams(),this.Ot.setQueryParams(t),this.Ot.send(),this.Ot.removeQueryParams();if(this.G.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.G.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.G.stringifyEvents();this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Ot.send(i)||(this.Vt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.G.getCurrentRequestIndex().increment());this.Ot.removeQueryParams(),this.G.clearEvents()}blockSendingEventsFromQuotaService(){this.Mr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Mr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Mr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Mr.allowFromSerialization=!0}canSendEvents(){return this.Mr.allowFromQuotaService&&this.Mr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Se&&this.gs){(e=this.Se)===null||e===void 0||e.anonymize(t);let i=this.gs.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:D.now(),type:"JSError"});i&&this.ks(i)}}onIframeCustomError(t){if(this.Ds){let e=this.Ds.translate({...t,timestamp:D.now(),type:"CustomError"});e&&this.ks(e)}}onIframeDetailedApiError(t){this.og(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Ut(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.F.isCurrentPageviewValid()&&this.Wa.pushEvent(t,{isUserEvent:!1})}Ut(t){this.F.refreshSession(),this.F.isSessionValid()&&this.Wa.pushEvent(t,{isUserEvent:!0})}Z(t){St.general.nbEvents.increase(),this.G.addEvent(t),this.G.isThresholdReached()?this.pushEvents():this.G.isFull()&&this.Zp(),this.ag(t)}ag(t){this.E.emitDebugEvents&&this.yi.emit("recordingEvent",{...t,typeName:x[t.type]})}onStart(){var t;this.Bi("tag-version","15.154.4"),this.Bi("page-state",document.visibilityState),this.Wa.reset(),this.Ke.start(),this.initStates(),this.Fe.start(),this.pt&&this.ve&&this.pt.subscribe(s.jt,e=>this.og(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.yi.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Di,e=>this.cg(e)),this.Di=[],this.Hi&&((t=this.Zt)===null||t===void 0||t.enableOnlineAssets(),this.Hi=!1)}onStop(){var t;this.Ke.stop(),this.pt&&this.pt.unsubscribe(s.jt),this.Fe.stop(),this.Wa.disconnect(),(t=this.Zt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Fe.flush(),this.Zp.cancel(),this.pushEvents(),this.X.removeQueryParams()}initStates(){this.qa=D.now(),this.G.getCurrentRequestIndex().reset(),this.mi=0,this.X.setQueryParams(this.yA.getRequestParameters())}pushEvents(){K(this.Be,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.G.eventsCount()>0&&(this.isStarted?this.tg():this.G.clearEvents())}tg(){if(!this.canSendEvents())return;let t=this.G.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Zn=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.qa>this.Zn?i[0].date:this.qa;this.X.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.X.getQueryParams();this.Vt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.X.getQueryParams()},i),this.X.send(i),n.increment(),e.batch.clearEvents(),this.lg&&this.lg()}this.G.clearEmptyBatchSlots()}addInitialDom(t){this.G.addEventByTimestamp(t),this.ag(t)}og(t){if(this.Nr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Nr.truncate(t),this.ht){this.ht.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.ig(t)}ig(t){if(this.mi<s._A){let e={type:x.API_ERROR,date:D.now(),args:[this.ve.anonymize(t)]};this.ks(e),this.mi=this.mi+1,$.counters.networkRequests.count("collected")}}wA(t){t===as.ETR_SESSION?this.X.setQueryParams({[s.AA]:s.hg}):t===as.ETR_PAGE&&this.X.setQueryParams({[s.TA]:s.hg})}clearEvents(){this.G.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.gs)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:D.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.ks(i)}onCustomErrorEvent(t){var e;let i=(e=this.Ds)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:D.now(),message:t.message,attributes:t.attributes});i&&this.ks(i)}onPageEvent(t){this.ug(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:D.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ht)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.cg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Di,{eventName:t,eventType:e})}cg(t){this.wA(t.eventType),this.ug(t.eventName),this.pushEvents()}ug(t){let e={type:x.PAGE_EVENT,date:D.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.bA)}]};this.G.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:D.now(),type:x.UNANONYMIZED_CONSENT_GRANTED};this.G.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:D.now(),type:x.UNANONYMIZED_CONSENT_WITHDRAWN};this.G.addEvent(t)}triggerRecordingForSessionGranted(){this.Bi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Bi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.to=!0}getStaticResourceManagerStatus(){return this.Zt?{isStarted:this.E.useStaticResourceManager&&Zn.isSupported(),onlineAssets:{activated:this.Zt.isOnlineAssetsActivated(),enabledOnNextPageview:this.to}}:null}resetOnlineAssetsOnPageview(){this.Hi=!1,this.to=!1}updateOnlineAssetsOnPageview(){this.Zt&&this.to&&(this.Hi=!0,this.to=!1)}onRecordingRequestSent(t){this.lg=t}getRecordingStartTimestamp(){return this.qa.toString()}getRecordingLastEventTimestamp(){return this.Zn.toString()}onOptOut(){K(this.Be,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Bi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:D.now(),type:x.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.G.addEvent(i)}ng(){return this.G.extractEvents(x.API_ERROR,x.JAVASCRIPT_ERROR,x.CUSTOM_ERROR,x.TEXT_VISIBILITY,x.POINTER_DOWN)}}return s.jt="RecordingService",s.bA=255,s._A=20,s.TA="etrp",s.AA="etrs",s.hg="1",j([It("addInitialDom")],s.prototype,"addInitialDom",null),s})(),KE=(()=>{class s extends Ut{constructor(t,e,i){super(),this.ae=t,this.Ot=e,this.X=i,this.Gh=!1,this.eo={},this.RA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.CA(c.rt)&&this.X.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.eo={}}onStop(){}recover(){this.ae.recover(this.RA)}addBatchInProgress(t,e,i){this.eo[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.eo[t]}blockSendingLastMessage(){this.Gh=!1}allowSendingLastMessage(){this.Gh=!0}sendLastMessageBeacon(){if(this.Gh){let{ri:t,rst:e,let:i,...n}=this.X.getQueryParams();n.hlm="true",this.Ot.setQueryParams(n),this.Ot.send()}}CA(t){return!!t&&csString.prototype.indexOf.call(t,k.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.eo),t=>{let{metadata:e,events:i}=this.eo[t];this.ae.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.ae.save(t)}}return j([N("RecordingRecovery")],s.prototype,"recover",null),s})(),JE=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),QE=8*1024*1024,ZE=(()=>{class s extends Ut{constructor(t,e,i){super(),this.De=t,this.dg=e,this.St=i,this.$h={},this.fg=new Set,this.ps=!1}initState(){qc()&&(this.Ue=this.St.getRequestParameters(),this.IA=`${this.dg}/exist?${Oi.toQuery(this.Ue)}`,this.PA=`${this.dg}/putTag?${Oi.toQuery(this.Ue)}`,this.pg=Js(async()=>{if(this.ps){this.pg();return}this.ps=!0;try{await this.OA()}finally{this.ps=!1}},300),this.De.onSendStaticResource(t=>{this.gg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.gg(t)}gg(t){this.mg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.mg(e.hash,e.data)})}mg(t,e){this.fg.has(t)||(this.fg.add(t),this.$h[t]=e,this.pg())}async OA(){let t=this.$h;this.$h={};let e=await this.NA(t);if(!e.length)return;let i=this.MA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.PA,{method:"POST",body:n})))}async DA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ue.pid,filter:JE.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.IA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async NA(t){let e=[],i=await this.DA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):H.warn("SRM: received unknown hash: "+n)}),e}MA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<QE)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),nh=2*1e3*1024,tS=200,Ec=(()=>{class s{constructor(t=nh){this.Ht=[],this.zh=new Ko(t)}addEvent(t){this.zh.addString(Ps(t)),csArray.prototype.push.call(this.Ht,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ht.length&&!(this.Ht[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ht,e,0,t)}eventsCount(){return this.Ht.length}clearEvents(){this.zh.reset(),this.Ht=[]}isFull(){return this.eventsCount()>=tS}isThresholdReached(){return this.zh.isThresholdReached()}getEvents(){return this.Ht}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ht,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Ht=i,e}stringifyEvents(){return Ps(this.Ht)}yO(t){t.type===x.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return j([It("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function eS(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var Sc=(()=>{class s{constructor(){this.Ya=1}getCurrentIndex(){return this.Ya}increment(){this.Ya+=1}reset(){this.Ya=1}getRequestParameters(){return{ri:`${this.Ya}`}}}return s})(),sS=3,iS=8,rS=(()=>{class s{constructor(t,e=nh,i=sS){this.kA=t,this.yg=e,this.qh=i,this.Xa={}}addEvent(t){this.Eg().addEvent(t)}addEventByTimestamp(t){this.Eg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Fi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Fi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Fi();return t.length>=this.qh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Ps(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Fi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Xa[t[e].metadata.pageNumber]}Fi(){return eS(this.Xa)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Fi(),nS)}Sg(){let t=this.kA();if(t<=0)return{batch:new Ec(this.yg),metadata:{pageNumber:0,requestIndex:new Sc}};let e=this.Xa[t];if(e)return e;let i={batch:new Ec(this.yg),metadata:{pageNumber:t,requestIndex:new Sc}};return this.Xa[t]=i,this.Fi().length>Math.max(this.qh,iS)&&H.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Fi().length}/${this.qh})`),i}Eg(){return this.Sg().batch}getCurrentRequestIndex(){return this.Sg().metadata.requestIndex}}return s})();function nS(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function $t(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var oS=(()=>{class s{constructor(t,e){this.Lt=t,this.M=e,this.fi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.V=t}start(){this.Gi(),this.triggerInitialEvents()}stop(){this.$i()}Gi(){csArray.prototype.forEach.call(this.fi,t=>gt(t))}$i(){csArray.prototype.forEach.call(this.fi,t=>mt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:x.HASH_CHANGE,args:[this.M.anonymizePII(this.Lt.href)],date:D.now()};this.V(t)}visibilityChangeListener(){let t={type:x.VISIBILITY_CHANGE,args:[document.visibilityState],date:D.now()};this.V(t)}}return j([N("hashChange")],s.prototype,"hashChangeListener",null),j([N("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Xs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),W=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function aS(s){if(!b(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var vc="data-cs-scroll-container";function cS(s){try{if(yt(csEventtarget.apply(s)))return!0}catch{}return!1}var Ks=(()=>{let s;return function(r){function t(i){return!!(yt(i)&&cS(i)&&ke(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(vc)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${vc}]`)}r.getScrollContainer=e}(s||(s={})),s})(),lS=33,hS=(()=>{class s{constructor(){this.eventType="user",this.Yh=[],this.FA=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.GA=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Ja=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Xh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=aS(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Xh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ye=new oi((e,i)=>{switch(i){case"initial":case"added":this.Gi(e);break;case"removed":this.$i(e);break}})}init(){this.$A(),this.zA(),this.Kh()}onEvent(t){csArray.prototype.push.call(this.Yh,t)}ce(t,e=!1){csArray.prototype.forEach.call(this.Yh,i=>i(t,e))}start(){this.gh(),this.Gi(document),this.ye.observe()}stop(){this.$i(document),this.ye.disconnect(),this.Yh=[]}zA(){this.qA()&&csArray.prototype.push.call(this.Ja,...this.FA)}$A(){this.WA()&&csArray.prototype.push.call(this.Ja,...this.GA)}Gi(t){Tr(t)?csArray.prototype.forEach.call(this.Ja,e=>gt(e)):csArray.prototype.forEach.call(this.Xh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};gt(i)})}$i(t){Tr(t)?csArray.prototype.forEach.call(this.Ja,e=>mt(e)):csArray.prototype.forEach.call(this.Xh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};mt(i)})}qA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}WA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}gh(){this.YA()}YA(){let t=Ks.getScrollContainer()||document,e=z(t),i=this.vg(t);if(i.top!==0||i.left!==0){let n={type:x.SCROLL,args:[e,i.left,i.top],date:D.now()};this.ce(n,!0)}}vg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(L.isMaskedElement(t)||L.isMaskedElementChild(t))return;let e=z(t),i=this.vg(t),n={type:x.SCROLL,args:[e,i.left,i.top],date:D.now()};this.ce(n)}mouseOverListener(t){if(L.isMaskedElementChild(t.target))return;let e=z(t.target),i={type:x.MOUSE_OVER,args:[e],date:D.now()};this.ce(i)}clickListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n={type:x.CLICK,args:[i],date:D.now()};this.ce(n)}keyUpListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n=this.B[t.key];if(n===void 0)return;let o={type:x.KEY_UP,args:[i,n],date:D.now()};this.ce(o)}keyDownListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n=this.B[t.key];if(n===void 0)return;let o={type:x.KEY_DOWN,args:[i,n],date:D.now()};this.ce(o)}copyListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n={type:x.CLIPBOARD_COMMAND,args:[i,Xs.COPY],date:D.now()};this.ce(n)}cutListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n={type:x.CLIPBOARD_COMMAND,args:[i,Xs.CUT],date:D.now()};this.ce(n)}pasteListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n={type:x.CLIPBOARD_COMMAND,args:[i,Xs.PASTE],date:D.now()};this.ce(n)}pointerUpListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n={type:x.POINTER_UP,args:[t.pointerId,t.pointerType,$t(t.clientX,1),$t(t.clientY,1),i,t.button],date:D.now()};this.ce(n)}pointerMoveListener(t){let e={type:x.POINTER_MOVE,args:[t.pointerId,t.pointerType,$t(t.clientX,1),$t(t.clientY,1)],date:D.now()};this.ce(e)}pointerDownListener(t){let e=Ct(t);if(L.isMaskedElementChild(e))return;let i=z(e),n={type:x.POINTER_DOWN,args:[t.pointerId,t.pointerType,$t(t.clientX,1),$t(t.clientY,1),i,t.button,{pageX:$t(t.pageX,1),pageY:$t(t.pageY,1)}],date:D.now()};this.ce(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:x.TOUCH_START,args:[n.identifier,$t(n.clientX,1),$t(n.clientY,1)],date:D.now()};this.ce(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:x.TOUCH_MOVE,args:[n.identifier,$t(n.clientX,1),$t(n.clientY,1)],date:D.now()};this.ce(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?x.TOUCH_END:x.TOUCH_CANCEL,args:[n.identifier,$t(n.clientX,1),$t(n.clientY,1)],date:D.now()};this.ce(o)}}Kh(){this.B={},this.B[" "]=W.SPACE,this.B.Spacebar=W.SPACE,this.B.Backspace=W.BACKSPACE,this.B.Enter=W.ENTER,this.B.Delete=W.DELETE,this.B.ArrowUp=W.ARROWUP,this.B.ArrowDown=W.ARROWDOWN,this.B.ArrowLeft=W.ARROWLEFT,this.B.ArrowRight=W.ARROWRIGHT,this.B.Up=W.ARROWUP,this.B.Down=W.ARROWDOWN,this.B.Left=W.ARROWLEFT,this.B.Right=W.ARROWRIGHT,this.B.CapsLock=W.CAPSLOCK,this.B.Shift=W.SHIFT,this.B.Tab=W.TAB,this.B.Escape=W.ESCAPE,this.B.Esc=W.ESCAPE,this.B.End=W.END,this.B.Alt=W.ALT,this.B.Control=W.CTRL,this.B.Meta=W.META}}return j([It("RecordingPageEvents.start")],s.prototype,"start",null),j([N("scroll")],s.prototype,"scrollListener",null),j([N("mouseOver"),ut(),Rp()],s.prototype,"mouseOverListener",null),j([N("click"),ut()],s.prototype,"clickListener",null),j([N("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([N("Event handler type: keydown")],s.prototype,"keyDownListener",null),j([N("Event handler type: copy")],s.prototype,"copyListener",null),j([N("Event handler type: cut")],s.prototype,"cutListener",null),j([N("Event handler type: paste")],s.prototype,"pasteListener",null),j([N("Event handler type: pointerup"),ut()],s.prototype,"pointerUpListener",null),j([N("Event handler type: pointermove"),ut(),Ur({wait:lS})],s.prototype,"pointerMoveListener",null),j([N("Event handler type: pointerdown"),ut()],s.prototype,"pointerDownListener",null),j([N("Event handler type: touchstart"),ut()],s.prototype,"touchStartListener",null),j([N("Event handler type: touchmove"),ut()],s.prototype,"touchMoveListener",null),j([N("Event handler type: touchend-cancel"),ut()],s.prototype,"touchEndCancelListener",null),s})(),uS=(()=>{class s{constructor(){}onScannedAsset(t){this.Qa=t}Za(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.Jh(Ci(t))}scanElement(t,e){L.getMaskedElementDetails(t).state!==L.MaskedElementState.NotMasked||e&&L.isMaskedAttribute(t,e)||(Dr(t)?this.KA(t):Ao(t)?this.JA(t,e):(this.QA(t,e),this.ZA(t,e),this.tT(t,e)))}JA(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.Za(),assetRawPath:jl(t)};this.Qa({type:"stylesheet",asset:o})}}KA(t){var e;let i=new Set;if(t.textContent)for(let o of Ci(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||H.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of Ci(c))i.add(l)}this.Jh(hs(i))}Qh(t){return!this.eT(t)&&!se(t)&&!sf(t)}QA(t,e){if(Ad(t)||wd(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Qh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.Za()};this.Qa({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.sT(t.srcset)}}ZA(t,e){if(csNodenodeType.apply(t)!==1){ot.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}sT(t){this.Jh(Wo(t))}tT(t,e){if((Cd(t)||Id(t)||Pd(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Qh(i)){let n={assetId:he(i),assetRawPath:i,assetBasePath:this.Za()};this.Qa({type:"asset",asset:n})}}}Jh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Qh(e)),e=>({rawUrl:e,absoluteUrl:he(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.Za(),assetRawPath:e.rawUrl};this.Qa({type:"asset",asset:i})})}eT(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),dS=30,fS=0,oh=(()=>{class s{constructor(t,e=dS,i=fS){this.iT=t,this.rT=e,this.nT=i,this.Qe=new Li,this.$e=!1,this.Zh=0,this._g=()=>{for(this.Zh=0;this.Qe.length;){if(this.Zh>=this.rT){csSetTimeout(this._g,this.nT);return}let n=D.elapsed(),o=this.Qe.pop();if(!o)break;this.runTask(o);let c=D.elapsed()-n;this.Zh+=c}this.$e=!1}}schedule(t,e=!1){if(!this.iT||e){t();return}St.general.pendingTasks.increase(),this.Qe.push(t),this.oT()}oT(){this.$e||(this.$e=!0,csSetTimeout(()=>{this._g()}))}runTask(t){St.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Qe.forEach(t=>{this.runTask(t)}),this.Qe.clear()}clearQueue(){St.general.pendingTasks.clear(),St.mutations.pendingMutations.clear(),this.Qe.clear()}isEmpty(){return this.Qe.length===0}}return j([N("TaskScheduler"),It("runTask")],s.prototype,"runTask",null),j([It("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),pS=(()=>{class s{constructor(){this.Y=!1,this.wg=new zo(t=>t.type==="cssRuleInserted"&&this.aT(t)),this.cT=Br(t=>{this.Y&&t.length>0&&this.O.schedule(()=>K(t,e=>this.ro.scanElement(e)))}),this.lT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.hT)===null||i===void 0||i.call(this,e)),(n=this.uT)===null||n===void 0||n.call(this,e);let c={date:D.now(),type:x.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.V)===null||o===void 0||o.call(this,c)},this.O=new oh(!0,30,0),this.Fn=new Xl(t=>this.dT(t)),this.L=new we(t=>this.Ar(t)),this.ro=new uS,this.ro.onScannedAsset(this.lT)}onEvent(t){this.V=t}onAsset(t){this.uT=t}onStyleSheetFound(t){this.hT=t}start(){this.Y||(this.Y=!0,this.wg.observe(),this.Fn.observe(),this.L.observe())}stop(){this.Y&&(this.wg.disconnect(),this.Fn.disconnect(),this.L.disconnect(),this.Y=!1)}aT(t){!t.rule||!this.Y||this.ro.scanCssString(t.rule)}dT(t){this.Y&&L.getMaskedElementDetails(t).state===L.MaskedElementState.NotMasked&&this.cT.push(t)}Ar(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.ro.scanElement(e.target,e.attributeName);break;case"characterData":this.fT(e.target);break;case"childList":}})}fT(t){Ar(t)&&csNodeparentNode.apply(t)&&Dr(csNodeparentNode.apply(t))&&this.ro.scanCssString(t.data)}}return s})(),gS="csPersisted",_c="v2/recording",mS=["isRecording"],ah=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],yS=["replay:resourceManager:getStatus","cssrm:getStatus"],ES=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,S,C,O,v,w,P,M,T,B,et){this.Ei=t,this.R=e,this.E=i,this.Ue=n,this.S=o,this.M=c,this.F=l,this._e=h,this.Se=f,this.pt=u,this.ve=m,this.gt=y,this.w=S,this.Si=C,this.Ag=O,this.qt=v,this.te=w,this.tt=P,this.Nr=M,this.it=T,this.EO=B,this.ht=et}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new Ay),this.no=new Ly(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.M,this.E.anonymizeDigits),this.zi();let o=new PE(gS);this.pT(o),this.G=new rS(()=>{var P;return((P=this.R.getSession())===null||P===void 0?void 0:P.pageNumber)||0});let c=new pS;csArray.prototype.push.call(i,c),this.E.useStaticResourceManager&&Zn.isSupported()&&(this.Zt=new Zn,this.De=new NE,this.Tg=new ZE(this.De,this.E.getStaticResourceManagerUri(),this.Ue),this.Ag.addListener(this.Tg),csArray.prototype.push.call(n,this.Zt));let l=new Ni(this.Ue,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")})}),h=new sh(`${this.E.getRecordingUri()}/${_c}`);csArray.prototype.push.call(n,this.no),csArray.prototype.push.call(n,new Jy(this.tt)),csArray.prototype.push.call(n,new Zy),this.qi=new hS,this.qi.init(),csArray.prototype.push.call(i,this.qi),this.Vt=new KE(o,h,this.X),csArray.prototype.push.call(i,new oS(window.location,this.M));let f=new wy,u=new sE,m=new rE,y=new aE(this.ht),S=new lE,C=[u,this._e,f,new qE(csArray.prototype.filter.call(i,P=>P)),S,new hE,new SE,y,m];this.E.jsErrorsEnabled&&(this.$a=new vE,this.mT=new _E(P=>this.Se.anonymize(P)),this.gs=new zE(this.$a),csArray.prototype.push.call(C,this.$a),csArray.prototype.push.call(n,this.mT));let O=new bE(C,n),v=new $E(O,this.w,this.De,this.gs,this.Ds),w=[f,u,m,y,S];this.recordingService=new XE(this.E,this.G,l,this.F,this.R,this.Se,this.pt,this.ve,this.ht,this.X,this.Vt,h,v,i,w,this.Zt,this.Nr,this.gs,this.Ds),this.Si.addListener(this.recordingService),this.Ag.addListener(this.recordingService),this.recordingService.init(),this.S.register(mS,()=>this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()),this.S.register(ah,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(yS,()=>this.recordingService.getStaticResourceManagerStatus()),this.oo=new OE(this.w,this.R),this.Si.addListener(this.oo),this.Ei.enableRecordingContext(this.recordingService,this.R,this.oo),this.tu()}onAfterNaturalPageView(){var t;this.qt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Tg)===null||t===void 0||t.initState()}onStartTracking(){this.Vt.recover(),this.zi(),this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.tc())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Vt.sendLastMessageBeacon(),this.recordingService.clearStates(),this.ao()}onAfterArtificialPageView(){this.zi(),this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.tc()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.ao()}onOptout(){this.ao(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.zi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.zi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===k.QUOTA_REACHED||t===k.ANALYTICS_ONLY&&e===re.ETR_OFF?(this.recordingService.clearEvents(),this.ao()):(this.X.setQueryParams({rt:csArray.prototype.join.call(this.R.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.oo.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.tc()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Vt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Vt.allowSendingLastMessage(),this.qi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.qt.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.tc(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.ao())}tu(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;K(l,h=>{xt(h)&&we.setShadowRootFilter(f=>{try{return Jt.call(f.host,h)}catch{return!1}})})}}tc(){this.recordingService.start(),this.Vt.start(),this.w.emitRecordingContextChange()}ao(){this.recordingService.stop(),this.Vt.stop(),this.w.emitRecordingContextChange()}pT(t){let e="byteArray";this.X=this.te.create(`${this.E.getRecordingUri()}/${_c}`,e,t)}zi(){var t;let e=this.it.shouldUseAnonymization();this.no.setAnonymization(e),(t=this.gT)===null||t===void 0||t.setAnonymization(e)}}return j([It("Recording.onStartTracking")],s.prototype,"onStartTracking",null),j([It("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),SS=(()=>{class s extends wt{validateArgs(t){return!!Y(t)}execute(){this.commandsService.applyFromImplementation(ah[0],[],"SrmOnlineAssetsTemplate")}}return s})(),vS=1024,_S=512,Tn=1024,bn="||",wS=(()=>{let s;return function(r){function t(c,l){return b(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),ns.CHAMELEON)!==-1?ns.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let f=i(h);return{type:q.CUSTOM_EVENT,ts:0,customEventName:lt.truncate(c,vS,lt.ELLIPSIS),sourceLibrary:dp(l)?l:ns.WEB,...Ln(f)?{}:{properties:f}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>_S)continue;let f=c[h];if(_t(f)||Sr(f))l[h]=csString(f);else if(o(f))l[h]=lt.truncate(f,Tn,lt.ELLIPSIS);else if(cd(f)){let u=n(f);u!==""&&(l[h]=u)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let f=c[h];if(!_t(f)&&!Sr(f)&&!o(f))continue;let u=csString(f);if(l==="")l=lt.truncate(u,Tn,lt.ELLIPSIS);else if(l.length+bn.length+u.length<=Tn)l+=bn+u;else break}return l}function o(c){return b(c)&&!mo(c)&&!csString.prototype.includes.call(c,bn)}}(s||(s={})),s})(),Ht=(()=>{class s{static buildFromCustomEvent(t,e){return this.bg(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.bg(t,e,i)}static bg(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var AS=(()=>{class s extends Ut{constructor(t,e,i,n,o,c,l,h,f,u,m,y,S,C,O,v,w,P,M,T,B,et){super(),this.E=t,this.vi=e,this.Bt=i,this.Dr=n,this.eu=o,this.Ze=c,this.ke=l,this.su=h,this.F=f,this.ae=u,this.Q=m,this.iu=y,this.Ke=S,this.X=C,this.Ft=O,this.sc=v,this.Ls=w,this.xs=P,this.ru=M,this.Wi=T,this.Yi=B,this.Xi=et,this.yi=new ih,this.ic=!1,this.Ki=[]}init(){var t,e,i,n,o,c,l;this.vi.onEvent(h=>this.Ut(h)),this.Bt.onEvent(h=>this.Ut(h)),this.Dr.onEvent(()=>{let h=this.Dr.getRequestParameters();this.X.setQueryParams(h),this.ke.setQueryParams(h)}),this.iu.onEvent(h=>this.le(h)),this.nu(),(t=this.sc)===null||t===void 0||t.onEvent(h=>this.Ut(h)),(e=this.Wi)===null||e===void 0||e.onEvent(h=>this.Ut(h)),(i=this.Ls)===null||i===void 0||i.onEvent(h=>this.Ut(h)),(n=this.xs)===null||n===void 0||n.onEvent(h=>this.Ut(h)),this.yT(),(o=this.ru)===null||o===void 0||o.onEvent(h=>this.le(h)),(c=this.Yi)===null||c===void 0||c.onEvent(h=>this.le(h)),(l=this.Xi)===null||l===void 0||l.onEvent(h=>this.le(h))}yT(){this.ke.onBeaconSuccess(()=>{this.Ze.clearEvents()}),this.ke.onBeaconFailure(t=>{this.ET(t)})}initStates(){let t=this.su.getRequestParameters(),e=this.eu.getRequestParameters(),i=this.Dr.getRequestParameters();this.X.setQueryParams(t),this.X.setQueryParams(e),this.X.setQueryParams(i),this.ke.setQueryParams(t),this.ke.setQueryParams(e),this.ke.setQueryParams(i),this.ou()}clearStates(t){var e,i;this.vi.flushPendingDebouncedListeners(),(e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.xs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.au(),this.sendLastMessageBeacon()):this.sendEvents(),this.Dr.reset(),this.X.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.ru)===null||e===void 0||e.start(),this.Ke.start(),this.vi.start(),this.Dr.start(),this.Bt.start(),(i=this.sc)===null||i===void 0||i.start(),(n=this.xs)===null||n===void 0||n.start(),t||this.iu.start(),(o=this.Ls)===null||o===void 0||o.start(),(c=this.Wi)===null||c===void 0||c.start(),(l=this.Yi)===null||l===void 0||l.start(),(h=this.Xi)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.Ki,f=>{this.le(f)}),this.Ki=[]}collectInitialEvents(){var t;(t=this.sc)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.le(t)}onIframeAnalysisUserEvent(t){this.Ut(t)}onExternalEvent(t){this.Z(t)}le(t){this.isStarted&&this.F.isCurrentPageviewValid()&&this.Z(t)}Ut(t){this.isStarted&&(this.F.refreshSession(),this.F.isSessionValid()&&this.Z(t))}Z(t){this.Ze.addEvent(this.ST(t)),this.Ze.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.yi.emit("analysisEvent",{...t,typeName:q[t.type]})}ST(t){return t.ts=this.Ji(),t}au(){this.ke.setQueryParams({hlm:"true"}),this.ic=!0}sendLastMessageBeacon(){this.ke.removeQueryParams(["i"]),this.ke.setQueryParams(this.su.getRequestParameters()),this.ke.setQueryParams(this.eu.getRequestParameters()),this.ke.send(this.Ze.stringifyEvents()),this.ke.removeQueryParams(["hlm"]),this.ic=!1}sendEvents(){this.Ze.isEmpty()||(this.ke.removeQueryParams(["i"]),this.X.setQueryParams(this.su.getRequestParameters()),this.X.setQueryParams(this.eu.getRequestParameters()),this.X.send(this.Ze.getEvents()),this.Ze.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.Ke.stop(),this.vi.stop(),this.Dr.stop(),this.Bt.stop(),this.iu.stop(),(t=this.sc)===null||t===void 0||t.stop(),(e=this.Ls)===null||e===void 0||e.stop(),(i=this.xs)===null||i===void 0||i.stop(),(n=this.Wi)===null||n===void 0||n.stop(),this.Ze.empty(),(o=this.ru)===null||o===void 0||o.stop(),(c=this.Yi)===null||c===void 0||c.stop(),(l=this.Xi)===null||l===void 0||l.stop()}ou(){this.ms=D.now()}Ji(){return D.now()-this.ms}nu(){this.Ke.onEvent(t=>{var e,i;t!==ie.Visible&&((e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.xs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===ie.PagehideVisible?this.au():t===ie.PagehideHidden?(this.au(),this.sendLastMessageBeacon()):(!this.Ze.isEmpty()||this.ic)&&this.sendLastMessageBeacon())})}ET(t){try{(!this.Ze.isEmpty()||this.ic)&&this.ae.save({requestParameters:t,events:this.Ze.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!up(t)||!ke(e))throw new Lt(ea[0]);let i={status:t,type:q.SUBMIT_COMMAND,ts:0,tgt:this.Q.getElementPath(e)};i.tgt!==De.INVALID_ELEMENT&&this.le(i)}pushCustomEvent(t,e,i){if(!(b(t)&&!mo(t))||i!==void 0&&!Y(i))throw new Lt(lo[0]);let n=wS.buildCustomEvent(t,e,i),o=Ht.buildFromCustomEvent(n,this.Ft);this.isStarted?this.le(o):csArray.prototype.push.call(this.Ki,o)}}return s})(),Hi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),TS=(()=>{class s extends Hi{constructor(){super(...arguments),this.supportedEventTypes=[q.CHANGE],this.vT=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Ct(t);return kr(i)&&csArray.prototype.indexOf.call(this.vT,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})(),Xt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var ch=(()=>{class s extends Hi{constructor(t){super(),this.yt=t,this.supportedEventTypes=[q.MOUSEDOWN,q.MOUSEUP,q.CLICK,q.MOUSEOVER,q.TAP,q.DRAG,q.FLICK,q.SUBMIT,q.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.yt.getEventTargetPath(t)),e}}return s})(),wc=65535,bS=(()=>{let s;return function(r){function t(e){let i=Ct(e);if(!i||!dt(i)||!Ee(i.getBoundingClientRect)||!yt(e.pageX)||!yt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-bt.windowOffsetX(),c=e.pageY-n.top-bt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),f=Math.round(o/l*wc),u=Math.round(c/h*wc);return{xRel:f,yRel:u,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),RS=(()=>{class s extends Hi{constructor(t,e){super(),this.Ts=t,this.yt=e,this.supportedEventTypes=[q.MOUSEMOVE,q.CLICK],this.du=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=bS.getRelativePosition(t);if(i){let c=this.yt.getEventTargetPath(t);c!==De.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===q.MOUSEMOVE&&(c!==this.du||this.Ts.iframesTracking?(this.du=c,e.tgtHM=c,this.Ts.isChild||(e.tgtHMH=ml(e.tgtHM))):e.tgtHM=""))}else e.type===q.MOUSEMOVE&&(this.du="");return e}}return s})(),lh=(()=>{class s extends Hi{constructor(t,e){super(),this.yt=t,this.Gt=e,this.supportedEventTypes=[q.CLICK,q.SUBMIT,q.CHANGE,q.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.Gt.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.yt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),Ac=100,hh=(()=>{class s extends Hi{constructor(t,e,i){super(),this.E=t,this.Gt=e,this.M=i,this.supportedEventTypes=[q.TAP,q.CLICK,q.SUBMIT]}kT(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,bo(n.parentElement)||To(n.parentElement)||this.Gt.getElementSensitiveStatus(n.parentElement)!==Xt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Ac)break;n=i.nextNode()}return!1}LT(t){let e=ti(t,"button,a");return e||(this.E.collectTargetText===Fn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(ke(csEventtarget.apply(t))){let i=this.LT(csEventtarget.apply(t));if(i&&b(i.textContent)&&!this.kT(i)&&!this.M.hasPII(i.textContent,this.E.anonymizeDigits)){let n=lt.truncate(csString.prototype.trim.call(i.textContent),Ac);n.length>0&&(e.text=n)}}return e}}return s})();function CS(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new RS(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new hh(s,t,new ni)),s.collectHierarchy&&csArray.prototype.push.call(n,new lh(r,t)),csArray.prototype.push.call(n,new TS,new ch(r)),n}function IS(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new hh(s,t,new ni)),s.collectHierarchy&&csArray.prototype.push.call(n,new lh(r,t)),csArray.prototype.push.call(n,new ch(r)),n}var PS=(()=>{class s extends Ut{constructor(t,e){super(),this.ae=t,this.X=e,this.Og=()=>{document.visibilityState==="visible"&&this.Ng()}}onStart(){this.Ng(),this.Vh()}onStop(){this.Uh()}getRecoveryStorage(){return this.ae}Ng(){let t=this.ae.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.X.send(i,e)}}Vh(){document.addEventListener("visibilitychange",this.Og)}Uh(){document.removeEventListener("visibilitychange",this.Og)}}return s})(),OS=(()=>{class s{constructor(t){this.Pr=t}save(t){localStorage.setItem(this.Pr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Pr)}recover(){let t=localStorage.getItem(this.Pr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{H.error(`Invalid item in localStorage.
         (key:${this.Pr}; value:${t})`)}finally{this.clear()}return e}}return s})(),NS=50,MS=(()=>{class s{constructor(t=[]){this.Ht=t}stringifyEvents(){return csJSON.stringify(this.Ht)}addEvent(t){csArray.prototype.push.call(this.Ht,t)}eventsCount(){return this.Ht.length}clearEvents(){this.Ht=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=NS}isEmpty(){return this.Ht.length===0}getEvents(){return this.Ht}}return s})(),DS=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Ft=t,this.yt=e,this.$t=i,this.xT=n,this.Mg="select, select *, input, textarea",this.VT="select, select *, input, textarea",this.Dg="a, a *, button, button *, select, select *, input, textarea",this.lo="input, select, textarea",this.UT="form",this.oc=150,this.jT=400,this.kg=!1,this.ho=Js((o,c)=>this.scrollListener(o,c),this.oc),this.Lg=Js(o=>this.resizeListener(o),this.oc),this.HT=Vr(o=>this.mouseMoveListener(o),this.jT),this.BT=[{boundElement:window,type:"resize",listener:()=>this.Lg()},{boundElement:document,type:"scroll",listener:o=>this.ho(o)},{boundElement:window,type:"mousemove",listener:o=>{this.HT(bp(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.xg=[{type:"change",listener:this.$t.on(this.VT,o=>this.changeListener(o))},{type:"submit",listener:this.$t.on(this.UT,o=>this.submitListener(o))}],this.FT=[{boundElement:document,type:"mouseover",listener:this.$t.on(this.Dg,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.$t.on(this.Dg,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.$t.on(this.Mg,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.$t.on(this.Mg,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.$t.on(this.lo,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.$t.on(this.lo,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.$t.on(this.lo,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.$t.on(this.lo,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.$t.on(this.lo,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.xg,o=>({...o,boundElement:document}))],this.B={},this.zl=(o,c)=>{switch(c){case"initial":case"added":this.Gi(o);break;case"removed":this.$i(o);break}},this.ye=new oi(this.zl),this.Kh()}Gi(t){if(Tr(t)){let e=this.Vg();csArray.prototype.forEach.call(e,i=>gt(i))}else{let e=this.Ug();csArray.prototype.forEach.call(e,i=>{gt({...i,boundElement:t})})}}$i(t){if(Tr(t)){let e=this.Vg();csArray.prototype.forEach.call(e,i=>mt(i))}else{let e=this.Ug();csArray.prototype.forEach.call(e,i=>{mt({...i,boundElement:t})})}}onEvent(t){this.V=t}start(){this.ye.observe(),this.Gi(document),this.resizeListener()}stop(){this.$i(document),this.ye.disconnect()}flushPendingDebouncedListeners(){this.ho.flushPending(),this.Lg.flushPending()}jg(t){return csArray.prototype.some.call(this.xT,e=>e===t)}Ug(){return this.$t.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.xg,t=>!this.jg(t.type)):(H.warn("Element.matches is not implemented yet"),[])}Vg(){let t=[];return csArray.prototype.push.call(t,...this.BT),this.$t.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.FT):H.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.jg(e.type))}resizeListener(t){let e=Ks.getScrollContainer(),i=ke(e);i&&(this.kg=!0);let n={type:q.RESIZE,ts:0,x:i?e.clientWidth:bt.windowWidth(),y:i?e.clientHeight:bt.windowHeight()};t!==void 0&&(n.d=t),this.V(n)}scrollListener(t,e){let i=Ks.isEventOnScrollContainer(e);!this.kg&&i&&this.resizeListener();let n={type:q.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:bt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:bt.windowOffsetY(),d:t},o=Ht.buildFromAnalysisEvent(e,n,this.Ft);this.V(o)}mouseMoveListener(t){let e={type:q.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.V(i)}mouseDownListener(t){let e={type:q.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}mouseUpListener(t){let e={type:q.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}clickListener(t){let e={type:q.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}mouseOverListener(t){let e={type:q.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}mouseOutListener(t){let e={type:q.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.yt.getEventTargetPath(t)},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}focusInListener(t){let e={type:q.FOCUSIN,ts:0,tgt:this.yt.getEventTargetPath(t)},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}focusOutListener(t){let e={type:q.FOCUSOUT,ts:0,tgt:this.yt.getEventTargetPath(t)},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}changeListener(t){let e={type:q.CHANGE,ts:0,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}submitListener(t){let e={type:q.SUBMIT,ts:0,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);this.we(i)}copyListener(t){let e={type:q.COMMAND,ts:0,tgt:this.yt.getEventTargetPath(t),key:Xs.COPY};this.we(e)}cutListener(t){let e={type:q.COMMAND,ts:0,tgt:this.yt.getEventTargetPath(t),key:Xs.CUT};this.we(e)}pasteListener(t){let e={type:q.COMMAND,ts:0,tgt:this.yt.getEventTargetPath(t),key:Xs.PASTE};this.we(e)}keyUpListener(t){let e={type:q.KEYUP,ts:0,tgt:this.yt.getEventTargetPath(t),key:this.Hg(t)};this.we(e)}keyDownListener(t){let e={type:q.KEYDOWN,ts:0,tgt:this.yt.getEventTargetPath(t),key:this.Hg(t)};this.we(e)}Hg(t){let e=this.B[t.key];return e===void 0?W.ALPHANUMERICAL:e}we(t){gl(t)&&t.tgt!==De.INVALID_ELEMENT&&this.V(t)}Kh(){this.B[" "]=W.SPACE,this.B.Spacebar=W.SPACE,this.B.Enter=W.ENTER,this.B.Backspace=W.BACKSPACE,this.B.Delete=W.DELETE,this.B.ArrowUp=W.ARROWUP,this.B.ArrowDown=W.ARROWDOWN,this.B.ArrowLeft=W.ARROWLEFT,this.B.ArrowRight=W.ARROWRIGHT,this.B.Up=W.ARROWUP,this.B.Down=W.ARROWDOWN,this.B.Left=W.ARROWLEFT,this.B.Right=W.ARROWRIGHT,this.B.CapsLock=W.CAPSLOCK,this.B.Shift=W.SHIFT,this.B.Tab=W.TAB}}return j([N("Event handler type: resize")],s.prototype,"resizeListener",null),j([N("Event handler type: scroll")],s.prototype,"scrollListener",null),j([N("Event handler type: mouseMove"),ut()],s.prototype,"mouseMoveListener",null),j([N("Event handler type: mouseDown"),ut()],s.prototype,"mouseDownListener",null),j([N("Event handler type: mouseUp"),ut()],s.prototype,"mouseUpListener",null),j([N("Event handler type: click"),ut()],s.prototype,"clickListener",null),j([N("Event handler type: mouseOver"),ut()],s.prototype,"mouseOverListener",null),j([N("Event handler type: mouseOut"),ut()],s.prototype,"mouseOutListener",null),j([N("Event handler type: focusIn")],s.prototype,"focusInListener",null),j([N("Event handler type: focusOut")],s.prototype,"focusOutListener",null),j([N("Event handler type: change")],s.prototype,"changeListener",null),j([N("Event handler type: submit"),ut()],s.prototype,"submitListener",null),j([N("Event handler type: copy")],s.prototype,"copyListener",null),j([N("Event handler type: cut")],s.prototype,"cutListener",null),j([N("Event handler type: paste")],s.prototype,"pasteListener",null),j([N("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([N("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),kS=(()=>{class s{constructor(t,e,i){this.Ft=t,this.Bt=e,this.Pt=i}processGesture(t,e){switch(t.type){case Tt.TAP:this.GT(e);break;case Tt.FLICK:this.$T(t,e);break;case Tt.DRAG:this.zT(t,e);break;default:break}}GT(t){let e={type:q.TAP,ts:0,x:0,y:0,tgt:""},i=Ht.buildFromAnalysisEvent(t,e,this.Ft);i.tgt!==De.INVALID_ELEMENT&&this.V(i)}zT(t,e){var i,n;let o={type:q.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Pt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Pt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ht.buildFromAnalysisEvent(e,o,this.Ft);c.tgt!==De.INVALID_ELEMENT&&this.V(c)}$T(t,e){var i,n;let o={type:q.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Pt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Pt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ht.buildFromAnalysisEvent(e,o,this.Ft);c.tgt!==De.INVALID_ELEMENT&&this.V(c)}onEvent(t){this.V=t}start(){this.Bt.subscribe(s.Bg,(t,e)=>this.processGesture(t,e))}stop(){this.Bt.unsubscribe(s.Bg)}}return s.Bg="AnalysisGestureTracker",j([ut()],s.prototype,"processGesture",null),s})();var LS=(()=>{class s{constructor(){this.Jg=100,this.po=0,this.go=bt.documentHeight(),this.Qg={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.po=this.Su(Ks.getScrollContainer()).maxScrollRate}onEvent(t){this.V=t}start(){gt(this.Qg)}stop(){mt(this.Qg)}reset(){let t=Ks.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Su(t);this.go=i,this.po=e,this.V()}Su(t){let e=0,i=0;if(t===null)i=bt.documentHeight(),e=this.ib(i);else{let n=this.rb(t);i=this.Zg(t,n),e=this.nb(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Ks.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Su(e);(i>this.po||n>this.go)&&(this.po=i,n>this.go&&(this.go=n),this.V())}ib(t){let e=Math.round(this.ob()/t*100);return Math.min(e,this.Jg)}ob(){let t=bt.windowHeight();return bt.windowOffsetY()+t}nb(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Zg(t,e),o=Math.round(i/n*100);return Math.min(o,this.Jg)}rb(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Zg(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.po}`,mdh:`${this.go}`}}}return j([N("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),xS=(()=>{class s{constructor(t){this.mo=t,this.yo=e=>this.processMetric(e),this.j=!1}onEvent(t){this.V=t}start(){this.j||(this.j=!0,this.mo.onFCP(this.yo),this.mo.onCLS(this.yo),this.mo.onLCP(this.yo),this.mo.onTTFB(this.yo),this.mo.onINP(this.yo))}stop(){this.j=!1}processMetric(t){if(!this.j)return;let e={type:q.PERFORMANCE,name:t.name,val:t.value,ts:0};this.V(e)}}return j([N("Performance metric handler")],s.prototype,"processMetric",null),s})(),VS=(()=>{class s{constructor(t){this.hc=t.performance}getRequestParameters(){if(this.ab())return{};let t=this.cb();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}cb(){let t=this.hc.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}ab(){return!(this.hc&&this.hc.timing&&this.hc.timing.loadEventEnd>0)}}return s})();var uh=-1,ci=s=>{addEventListener("pageshow",r=>{r.persisted&&(uh=r.timeStamp,s(r))},!0)},ve=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},Jo=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},Qo=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Bi=()=>{var r;let s=Qo();return(r=s==null?void 0:s.activationStart)!=null?r:0},_e=(s,r=-1)=>{let t=Qo(),e="navigate";return uh>=0?e="back-forward-cache":t&&(document.prerendering||Bi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Rn=new WeakMap;function Zo(s,r){return Rn.get(s)||Rn.set(s,new r),Rn.get(s)}var ro=class{constructor(){be(this,"t");be(this,"i",0);be(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Fi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},ta=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ws=-1,Tc=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Mr=s=>{document.visibilityState==="hidden"&&Ws>-1&&(Ws=s.type==="visibilitychange"?s.timeStamp:0,US())},bc=()=>{addEventListener("visibilitychange",Mr,!0),addEventListener("prerenderingchange",Mr,!0)},US=()=>{removeEventListener("visibilitychange",Mr,!0),removeEventListener("prerenderingchange",Mr,!0)},dh=()=>{var s;if(Ws<0){let r=Bi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ws=t!=null?t:Tc(),bc(),ci(()=>{setTimeout(()=>{Ws=Tc(),bc()})})}return{get firstHiddenTime(){return Ws}}},Gr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Rc=[1800,3e3],fh=(s,r={})=>{Gr(()=>{let t=dh(),e,i=_e("FCP"),n=Fi("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Bi(),0),i.entries.push(c),e(!0)))});n&&(e=ve(s,i,Rc,r.reportAllChanges),ci(o=>{i=_e("FCP"),e=ve(s,i,Rc,r.reportAllChanges),Jo(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Cc=[.1,.25],jS=(s,r={})=>{fh(ta(()=>{let t,e=_e("CLS",0),i=Zo(r,ro),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Fi("layout-shift",n);o&&(t=ve(s,e,Cc,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),ci(()=>{i.i=0,e=_e("CLS",0),t=ve(s,e,Cc,r.reportAllChanges),Jo(()=>t())}),setTimeout(t))}))},ph=0,Cn=1/0,dr=0,HS=s=>{for(let r of s)r.interactionId&&(Cn=Math.min(Cn,r.interactionId),dr=Math.max(dr,r.interactionId),ph=dr?(dr-Cn)/7+1:0)},no,Ic=()=>{var s;return no?ph:(s=performance.interactionCount)!=null?s:0},BS=()=>{"interactionCount"in performance||no||(no=Fi("event",HS,{type:"event",buffered:!0,durationThreshold:0}))},Pc=0,oo=class{constructor(){be(this,"u",[]);be(this,"l",new Map);be(this,"m");be(this,"p")}v(){Pc=Ic(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Ic()-Pc)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},gh=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=ta(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Oc=[200,500],FS=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Gr(()=>{var c;BS();let t,e=_e("INP"),i=Zo(r,oo),n=l=>{gh(()=>{for(let f of l)i.h(f);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Fi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=ve(s,e,Oc,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),ci(()=>{i.v(),e=_e("INP"),t=ve(s,e,Oc,r.reportAllChanges)}))})},ao=class{constructor(){be(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Nc=[2500,4e3],GS=(s,r={})=>{Gr(()=>{let t=dh(),e,i=_e("LCP"),n=Zo(r,ao),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Bi(),0),i.entries=[h],e())},c=Fi("largest-contentful-paint",o);if(c){e=ve(s,i,Nc,r.reportAllChanges);let l=ta(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>gh(l),{capture:!0,once:!0});ci(h=>{i=_e("LCP"),e=ve(s,i,Nc,r.reportAllChanges),Jo(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},Mc=[800,1800],co=s=>{document.prerendering?Gr(()=>co(s)):document.readyState!=="complete"?addEventListener("load",()=>co(s),!0):setTimeout(s)},$S=(s,r={})=>{let t=_e("TTFB"),e=ve(s,t,Mc,r.reportAllChanges);co(()=>{let i=Qo();i&&(t.value=Math.max(i.responseStart-Bi(),0),t.entries=[i],e(!0),ci(()=>{t=_e("TTFB",0),e=ve(s,t,Mc,r.reportAllChanges),e(!0)}))})},zS=(()=>{class s{onFCP(t){try{fh(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{jS(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{GS(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{$S(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{FS(t,{reportAllChanges:!0})}catch{$.counters.webVitalsErrors.count("INP")}}}return s})();var qS="csAnalysisEventsPersisted",Dc="v2/events",ea=["submit"],lo=["trackEvent"];var WS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,S,C,O){this.E=t,this.St=e,this.N=i,this.Q=n,this.$t=o,this.S=c,this.F=l,this.Bt=h,this.mt=f,this.te=u,this.J=m,this.Gt=y,this._t=S,this.es=C,this.ss=O}init(){let t=new MS,e=this.te.create(`${this.E.getTrackerUri()}/${Dc}`,"base64");this.Vr=this.wb(e),this.ue=this.Ab(t,this.Vr.getRecoveryStorage(),e),this.ue.init(),this.J.addListener(this.ue),this.mt.addListener(this.ue),this.S.register(ea,(i,n)=>{this.ue.pushSubmitCommandEvent(i,n)}),this.S.register(lo,i=>{if(!Y(i))throw new Lt(lo[0]);this.ue.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Vr.start(),this.ue.start(t)}onAfterNaturalPageView(){this.ue.initStates()}onArtificialPageViewEnd(t){this.ue.clearStates(!0),t&&(this.ue.stop(),this.Vr.stop())}onAfterArtificialPageView(t){this.ue.initStates(),t&&(this.ue.start(),this.Vr.start()),this.ue.collectInitialEvents()}onBeforeSessionRenewal(){this.ue.clearStates(),this.ue.stop(),this.Vr.stop()}onOptout(){this.ue.stop(),this.Vr.stop()}Ab(t,e,i){var n,o;let c=new VS(window),l=new LS,h=CS(this.E,this.Q,this.Gt,this.es,this.ss),f=[];this.E.collectSubmit||csArray.prototype.push.call(f,"submit");let u=new DS(h,this.Q,this.$t,f),m=IS(this.E,this.Q,this.Gt,this.es,this.ss),y=new kS(m,this.Bt),S=new xS(new zS),C=new rh,O,v,w,P=new sh(`${this.E.getTrackerUri()}/${Dc}`),M=new Ni(this.St,this.N),T,B,et,at;return new AS(this.E,u,y,l,c,t,P,M,this.F,e,this.Q,S,C,i,h,O,v,w,T,B,et,at)}wb(t){return new PS(new OS(qS),t)}}return s})(),YS=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.status)&&b(t.selector):!1}execute(t){if(!xt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(ea[0],[t.status,e],"SubmitTemplate")}}return s})(),Qt=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.dm=!1,this.args=e}start(){this.dm||(this.onInit(),this.dm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return j([N()],s.prototype,"start",null),j([N()],s.prototype,"stop",null),s})(),kc="once per pageview",XS="always",KS=(()=>{class s extends Qt{constructor(){super(...arguments),this.wt=!0}validateArgs(t){if(Y(t)){let e=b(t.selector),i=t.frequency?t.frequency===kc||t.frequency===XS:!0;return e&&i}return!1}onInit(){if(!xt(this.args.selector)){this.wt=!1;return}this.Eo=this.args.frequency?this.args.frequency===kc:!0,this.z=new ue((t,e)=>this.A(t,e))}onStart(){this.wt&&this.z.observe(this.args.selector)}onStop(){this.wt&&(this.z.processPendingMutations(),this.z.disconnect())}A(t,e){e==="added"&&(this.Eo?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),JS=(()=>{class s extends Qt{constructor(){super(...arguments),this.wt=!0,this.fm=!1}validateArgs(t){return Y(t)?b(t.selector):!1}onInit(){if(!xt(this.args.selector)){this.wt=!1;return}this.z=new ue((t,e)=>{this.A(t,e)})}onStart(){this.wt&&(this.z.observe(this.args.selector),this.fm=!0)}onStop(){this.wt&&(this.z.processPendingMutations(),this.z.disconnect())}A(t,e){this.fm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),QS=(()=>{class s extends Qt{constructor(){super(...arguments),this.wt=!0}validateArgs(t){return Y(t)?b(t.selector):!1}onInit(){if(!xt(this.args.selector)){this.wt=!1;return}this.W=new ue(t=>this.Tb(t)),this.L=new we(t=>this.bb(t))}onStart(){this.wt&&(this.fc=csSymbol("MatchingElement"),this.W.observe(this.args.selector),this.L.observe())}onStop(){this.wt&&(this.W.processPendingMutations(),this.W.disconnect(),this.L.disconnect())}Tb(t){new Set(t).forEach(e=>this.Rb(e))}bb(t){let e=vo(t,n=>n.removedNodes),i=[];for(let n of e)csArray.prototype.push.call(i,...this.Cb(n));new Set(i).forEach(n=>this.onEventCallback({element:n}))}Rb(t){t[this.fc]=!0}Cb(t){let e=[];return ne(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.fc]&&(nt.isConnected(i)?Jt.call(i,this.args.selector)||delete i[this.fc]:delete i[this.fc],csArray.prototype.push.call(e,i))}),e}}return s})(),ZS=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(hs(s.callbacks),e=>e(t))}static bh(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&gt(s.eventHandler,!1))}static Un(t){s.callbacks.delete(t),s.callbacks.size===0&&mt(s.eventHandler,!1)}constructor(t){this.A=t}observe(){s.bh(this.A)}disconnect(){s.Un(this.A)}}return s.callbacks=new Set,s.eventHandler={boundElement:it.document,type:"readystatechange",listener:s.readyStateChangeListener},tt([N("readyStateChangeListener"),ut()],s,"readyStateChangeListener",null),s})(),tv=(()=>{class s extends Qt{constructor(){super(...arguments),this.wu={state:"Any"}}validateArgs(t){var e;return Y(t)&&b(t.state)||(H.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.wu),!0}onInit(){this.Dt=this.args.state.toLowerCase(),this.z=new ZS(()=>{this.pm(this.Dt,document.readyState)&&(this.onEventCallback(),this.z.disconnect())})}onStart(){this.pm(this.Dt,document.readyState)?this.onEventCallback():this.z.observe()}onStop(){this.z.disconnect()}pm(t,e){let i=s.gm[e];return s.gm[t]<=i}}return s.gm={complete:3,interactive:2,loading:1,any:0},s})(),fr=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),os=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),ev=(()=>{class s{constructor(t,e,i,n){this.N=t,this.R=e,this.E=i,this.hs=n,this.mm=!1}isNaturalPageViewSent(){return this.mm}setNaturalPageViewSent(t){this.mm=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.hs.getPageViewType(),l=this.R.isReplayRecorded(),h=this.Ib(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.N.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Ib(t){return os.isReplayConsentNeeded(this.E)?t.collectState===k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?fr.NOT_EXPRESSED:t.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?fr.WITHDRAWN:fr.GRANTED:fr.NOT_NEEDED}}return s})(),sv=(()=>{class s{constructor(t){this.kt=t,this.de=[]}handleCommand(t){if(Ee(t)&&(this.So(t),this.kt.isNaturalPageViewSent())){let e=this.kt.getTrackingContext();e!==null&&this.zt(t,e)}}So(t){csArray.prototype.push.call(this.de,t)}executeRegisteredCallbacks(){let t=this.kt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.de,e=>this.zt(e,t))}zt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),iv=(()=>{class s{constructor(t){this.kt=t,this.Zi=[]}handleCommand(t){if(this.kt.isNaturalPageViewSent())return this.Pb(t);this.vo(t)}Pb(t){let e=this.kt.getSessionKey();return this.ym(t)&&e!==null&&this.zt(t.callback,e),e}vo(t){this.ym(t)&&csArray.prototype.push.call(this.Zi,t.callback)}flushPendingCallbacks(){let t=this.kt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Zi,e=>{this.zt(e,t)}),this.Zi=[]}ym(t){return t&&typeof t.callback=="function"}zt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function rv(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,f,u]=l;n?h=`${c}/sites/${n}/player?uu=${f}&sn=${u}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${f}&sn=${u}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${D.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var nv=(()=>{class s{constructor(t){this.kt=t}handleCommand(t,e){Rs(t)&&Ee(e)&&this.zt(t,e)}zt(t,e){csSetTimeout(()=>{let i=this.kt.getTrackingContext();if(i){let n=rv(i,t);e(n)}})}}return s})(),ov=(()=>{class s{constructor(){this.de=new Set}handleCommand(t,e){return!Ee(t)||this.de.has(t)?null:(this.de.add(t),e&&(this.Me=e,this.Em(t,e)),()=>this.de.delete(t))}executeCallbacks(t){this.Ob(t)&&(this.Me=t,this.de.forEach(e=>this.Em(e,t)))}Em(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Ob(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.Me&&(this.Me.isRecording!==e||this.Me.recordingStartTimestamp!==i||this.Me.etrState!==n||this.Me.etrStatus!==o||this.Me.collectState!==c)}}return s})(),mh=["afterPageView"],av=["getSessionKey"],cv=["onRecordingContextChange","onRecordingStateChange"],lv=["replay:link:generate"],hv=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.N=t,this.R=e,this.S=i,this.mt=n,this.et=o,this.E=c,this.hs=l,this.Ei=h,this.Sm=null}init(){this.kt=new ev(this.N,this.R,this.E,this.hs),this.Au=new sv(this.kt),this.vm=new iv(this.kt),this._o=new ov,this.Nb=new nv(this.kt),this.S.register(av,t=>this.vm.handleCommand(t)),this.S.register(mh,t=>this.Au.handleCommand(t)),this.S.register(cv,t=>this._o.handleCommand(t,this.Ei.getRecordingContext())),this.S.register(lv,(t,e)=>{this.Ur&&this.Nb.handleCommand({...t,recordingStartTimestamp:this.Ei.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.kt.setNaturalPageViewSent(!0),this.vm.flushPendingCallbacks(),this.Au.executeRegisteredCallbacks(),(t=this.Sm)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Au.executeRegisteredCallbacks(),(t=this.Sm)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this._o.executeCallbacks(this.Ei.getRecordingContext())}setRecordingService(t){this.Ur=t}}return j([Ur({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),uv=(()=>{class s extends Qt{validateArgs(t){return!!Y(t)}Mb(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(mh[0],[()=>this.Mb()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),dv=(()=>{class s extends Qt{constructor(){super(...arguments),this.Tu=!1,this.wt=!0,this.pi=!0,this.wi={boundElement:document,type:"click",listener:t=>{if(this.Tu){this.Tu=!1;return}this.onClickOrTap(t)}},this.Db=(t,e)=>{t.type===Tt.TAP&&(this.Tu=!0,this.onClickOrTap(e))}}validateArgs(t){return Y(t)?b(t.selector):!1}onClickOrTap({target:t}){if(yt(t)&&ke(t)){let e=ti(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!xt(this.args.selector)){this.wt=!1;return}this.Yn=new Jl(this.Db)}onStart(){var t;this.wt&&(gt(this.wi,this.pi),(t=this.Yn)===null||t===void 0||t.observe())}onStop(){var t;this.wt&&(mt(this.wi,this.pi),(t=this.Yn)===null||t===void 0||t.disconnect())}}return j([N("onClickOrTap"),ut()],s.prototype,"onClickOrTap",null),s})(),fv=(()=>{class s{static kb(){var t,e,i,n;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((n=o.replaceState)===null||n===void 0)&&n.writable))return History.prototype}ot.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static bu(){let t=s.kb();s.wo===null&&Ee(t==null?void 0:t.pushState)&&(s.wo=Kt({target:t,methodName:"pushState",hook:({args:e})=>{s._m("pushstate",e)}})),s.Ao===null&&Ee(t==null?void 0:t.replaceState)&&(s.Ao=Kt({target:t,methodName:"replaceState",hook:({args:e})=>{s._m("replacestate",e)}}))}static Cn(t){var e,i;s.Pe.add(t),s.Pe.size===1&&((s.wo===null||s.Ao===null)&&s.bu(),(e=s.wo)===null||e===void 0||e.activate(),(i=s.Ao)===null||i===void 0||i.activate(),gt(s.wm),gt(s.Am))}static Pn(t){var e,i;s.Pe.delete(t),s.Pe.size===0&&((e=s.wo)===null||e===void 0||e.deactivate(),(i=s.Ao)===null||i===void 0||i.deactivate(),mt(s.wm),mt(s.Am))}static _m(t,e){let i={type:t,state:e[0]};b(e[2])&&(i.url=e[2]),s.Cr(i)}static popstateListener(t){s.Cr({type:"popstate",state:t.state})}static hashchangeListener(t){s.Cr({type:"hashchange",state:null,url:t.newURL})}static Cr(t){csArray.prototype.forEach.call(hs(s.Pe),e=>{e(t)})}constructor(t){this.A=t}observe(){s.Cn(this.A)}disconnect(){s.Pn(this.A)}}return s.wo=null,s.Ao=null,s.wm={boundElement:it,type:"popstate",listener:r=>s.popstateListener(r)},s.Am={boundElement:it,type:"hashchange",listener:r=>s.hashchangeListener(r)},s.Pe=new Set,tt([N("popstateListener"),ut()],s,"popstateListener",null),tt([N("hashchangeListener"),ut()],s,"hashchangeListener",null),s})(),pv=(()=>{class s extends Qt{validateArgs(t){if(Y(t)){let e=b(t.useDebounce),i=t.useDebounce==="yes"?_t(t==null?void 0:t.window):!0,n=b(t.listeners);return e&&i&&n}return!1}onInit(){this.args.useDebounce==="yes"?this.oe=Js(()=>{this.onEventCallback()},this.args.window):this.oe=this.onEventCallback,this.z=new fv(t=>this.Lb(t))}Tm(){return window.location.href}Lb(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let n=this.Tm();this.bm!==n&&(this.bm=n,this.oe())}onStart(){this.bm=this.Tm(),this.z.observe()}onStop(){this.z.disconnect()}}return s})(),gv=(()=>{class s extends Qt{constructor(){super(...arguments),this.wt=!0,this.pi=!0,this.wi={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return Y(t)?b(t.selector):!1}submitListener({target:t}){yt(t)&&ke(t)&&Jt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){xt(this.args.selector)||(this.wt=!1)}onStart(){this.wt&&gt(this.wi,this.pi)}onStop(){this.wt&&mt(this.wi,this.pi)}}return j([N("submitListener"),ut()],s.prototype,"submitListener",null),s})(),mv=(()=>{class s extends Qt{constructor(){super(...arguments),this.wt=!0,this.Rm={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.Cm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return Y(t)?b(t.selector):!1}onInit(){xt(this.args.selector)||(this.wt=!1)}mouseleaveListener({target:t}){yt(t)&&ke(t)&&t[this.pc]&&delete t[this.pc]}mouseoverListener({target:t}){if(yt(t)&&ke(t)){let e=ti(t,this.args.selector);e!==null&&!e[this.pc]&&(e[this.pc]=!0,this.onEventCallback({element:e}))}}onStart(){this.wt&&(this.pc=csSymbol("Hovered"),gt(this.Cm,!0),gt(this.Rm,!0))}onStop(){this.wt&&(mt(this.Rm),mt(this.Cm))}}return j([N("mouseleaveListener"),ut()],s.prototype,"mouseleaveListener",null),j([N("mouseoverListener"),ut()],s.prototype,"mouseoverListener",null),s})(),yv=(()=>{class s extends Qt{constructor(){super(...arguments),this.wi={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!Y(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){gt(this.wi)}onStop(){mt(this.wi)}}return j([N("hashChangedListener"),ut()],s.prototype,"hashChangedListener",null),s})(),Ev=(()=>{class s extends Qt{constructor(){super(...arguments),this.gc=!0}validateArgs(t){return Y(t)?b(t.selector):!1}onInit(){if(!xt(this.args.selector)||!Nr.isSupported()){this.gc=!1;return}this.Mt=new Nr({delay:0,trackOnce:!0,reobserve:!0}),this.W=new ue(t=>this.Ru(t),{closest:!0})}Ru(t){for(let e of t)this.Mt.observe(e)}Cu(t,e){if(this.isStarted&&e===Ri.VisibleInViewPort){let i=ti(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.gc=!1)}}onStart(){this.gc&&(this.Mt.start((t,e)=>this.Cu(t,e)),this.W.observe(this.args.selector))}onStop(){this.gc&&(this.Mt.stop(),this.W.disconnect())}}return s})(),Sv=(()=>{class s extends Ut{constructor(t,e,i,n){super(),this.pt=t,this.Iu=e,this.St=i,this.ve=n,this.mc=[],this.mi=0}init(){this.pt.init()}initStates(){this.Pu(),this.mc=[],this.mi=0,this.ou()}ou(){this.ms=D.now()}Ji(){return D.now()-this.ms}onStart(){this.pt.subscribe(s.jt,t=>this.Z(t))}onStop(){this.pt.unsubscribe(s.jt)}onIframeApiError(t){this.Z(t)}Z(t){this.isStarted&&this.mi<s.Jn&&(t.relativeTime=this.Ji(),csArray.prototype.push.call(this.mc,this.ve.anonymize(t)),this.To(),$.counters.networkRequests.count("collected"))}Pu(){this.Iu.removeQueryParams(),this.Iu.setQueryParams(this.St.getRequestParameters())}To(){this.Iu.send({errors:this.mc}),this.mc=[],this.mi+=1}}return s.jt="ApiErrorsService",s.Jn=20,s})(),vv="api-errors",ho=["api-errors:maskUrl"],_v=(()=>{class s{constructor(t,e,i,n,o,c,l){this.pt=t,this.ve=e,this.E=i,this.St=n,this.mt=o,this.S=c,this.te=l}init(){let t=this.te.create(`${this.E.getTrackerUri()}/${vv}`);this.Hs=new Sv(this.pt,t,this.St,this.ve),this.Hs.init(),this.mt.addListener(this.Hs),this.ut()}ut(){this.S.register(ho,t=>{if(!b(t))throw new Lt(ho[0]);this.ve.addUrlMaskingPattern(t)})}onStartTracking(){this.Hs.start()}onAfterNaturalPageView(){this.Hs.initStates()}onArtificialPageViewEnd(t){t&&this.Hs.stop()}onAfterArtificialPageView(t){this.Hs.initStates(),t&&this.Hs.start()}onBeforeSessionRenewal(){this.Hs.stop()}onOptout(){this.Hs.stop()}}return s})(),wv=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.url):!1}execute(t){this.commandsService.applyFromImplementation(ho[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),yh=["networkRequest:maskUrls"],Av=["networkRequest:maskUrls:reset"],Tv=(()=>{class s{constructor(t,e){this.Im=t,this.gt=e}init(){this.Im.register(yh,t=>{if(b(t)){this.gt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)b(e)&&this.gt.addPartialUrlMaskingPattern(e)}),this.Im.register(Av,()=>this.gt.resetPartialUrlMaskingPatterns())}}return s})(),bv=(()=>{class s extends wt{validateArgs(t){return Y(t)?b(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(yh[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),Lc="once per pageview",Rv="always",Cv=(()=>{class s extends Qt{constructor(){super(...arguments),this.Ou=!1,this.Je=!1,this.Eo=!0}validateArgs(t){if(Y(t)){let e=b(t.selector),i=t.frequency?t.frequency===Lc||t.frequency===Rv:!0;return e&&i}return!1}onInit(){Nr.isSupported()&&(this.Je=!0,this.Eo=this.args.frequency?this.args.frequency===Lc:!0,this.W=new ue((t,e)=>{if(e==="initial")for(let i of t)nt.isVisibleInViewportInForeground(i)&&(i[this.Nu]=!0);this.Ru(t)},{closest:!0}),this.Mt=new Nr({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.Je||this.isStarted||(this.Nu=csSymbol("skipElement"),this.Ou=!1,this.Mt.start((t,e)=>this.Cu(t,e)),this.W.observe(this.args.selector))}onStop(){!this.Je||!this.isStarted||(this.W.disconnect(),this.Mt.stop())}Cu(t,e){if(this.isStarted&&e===Ri.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.Nu]){delete i[this.Nu];return}this.Eo&&this.stop(),(!this.Eo||!this.Ou)&&(this.Ou=!0,this.onEventCallback({element:i}))}}}Ru(t){for(let e of t)this.Mt.observe(e)}}return s})(),uo=(()=>{class s extends Qt{constructor(){super(...arguments),this.wu={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return Y(t)&&Rs(t)&&csArray.isArray(t.pageviewTypes)&&_o(t.pageviewTypes,n=>b(n))||(H.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.wu),!0}onInit(){this.xb=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.xb,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),Iv=(()=>{class s extends wt{constructor(){super(...arguments),this.Mu=!1}validateArgs(t){return Y(t)&&b(t.type)&&b(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Mu=!1,!0):(H.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Mu=!0,!0)}execute(t){let e="";this.Mu?e=bl:e=this.Vb(t.urls,t.type),this.commandsService.applyFromImplementation(Tl[0],[e],"BlockAllowListForSRTemplate")}Vb(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),n=>`.*${csString.prototype.trim.call(n)}`),"|"),`^(${i}).*?`}}return s})(),Pv=(()=>{class s{constructor(t){this.S=t,this.Ub={ApiErrorsMaskUrl:wv,NetworkRequestMaskUrls:bv,ArtificialPageview:kl,BlockAllowListForSr:Iv,CustomError:tm,CustomVariable:sm,DataCsEncrypt:rm,DataCsOverride:om,DynamicVariable:pm,EcTransactionAll:_m,EcTransactionCreate:wm,EcTransactionItemsAdd:Am,EcTransactionSend:Tm,ElementUnmasking:bm,EventTriggerRecordingPage:Om,EventTriggerRecordingSession:Nm,PageEvent:Mm,PiiMasking:Dm,RecordingEventTrigger:km,SetPath:Lm,SetQuery:xm,SrmOnlineAssets:SS,Submit:YS},this.jr={AfterPageView:uv,ElementAdded:KS,ElementBecomesVisible:Cv,ElementExist:JS,ElementRemoved:QS,ElementVisibility:Ev,ElementClick:dv,FormSubmit:gv,HashChange:yv,HistoryChange:pv,Mouseover:mv,PageState:tv,BeforePageView:uo}}jb(t){let e=this.Ub[t.name];return e?new e(this.S,t.args):(H.error(`Implementations: template ${t.name} does not exist`),null)}Hb(t){let e=this.jr[t.name];return e?new e(this.S,t.args,t.condition):(H.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:n}of t){let o=this.jb(n);if(!o)continue;if(!o.validateArgs(o.args)){H.implementation(`${n.name} has wrong argument.`);continue}for(let l of i){let h=this.Hb(l);if(!h)continue;if(!h.validateArgs(h.args)){H.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${n.name}`,trigger:h,template:o})}}return e}}return s})(),Ov=(()=>{class s{constructor(t,e,i){this.Bb=t,this.O=i,this.Me={window,document,location,cookies:{}},this.jr=new Set,this.Fb=new Pv(e)}init(){Object.defineProperty(this.Me,"cookies",{get:()=>this.Gb()});let t=this.Fb.parse(this.Bb);for(let{name:e,trigger:i,template:n}of t)i instanceof uo&&n instanceof kl||(this.jr.add(i),i.onEvent(o=>{this.onTriggerEvent(o,n),$.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.jr.forEach(e=>{e.condition&&!Ml(e.condition,this.Me)||(t?this.O.schedule(()=>{e.start()}):e.start())})}stop(){this.jr.forEach(t=>{t.stop()})}onBeforePageView(t){this.jr.forEach(e=>{if(e instanceof uo){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.$b(t),n={...this.Me,...i},o=[];if(fg(e.args)&&b(e.args.iterable)&&e.args.iterable.length>0){let c=Ug(e.args.iterable,n);if(yt(c)){let l=csArray.prototype.map.call(c,h=>({...n,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,n);if(e instanceof Ui){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=qn(e.args,c);l&&e.execute(l)}}Gb(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[n,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[n]=o),e},{})}$b(t){let e={...t};for(let i in e)dt(e[i])&&(L.isMaskedElement(e[i])||L.isMaskedElementChild(e[i]))&&delete e[i];return e}}return j([It("implementationsService.start")],s.prototype,"start",null),j([N()],s.prototype,"onTriggerEvent",null),s})(),Nv=(()=>{class s{constructor(t,e,i){this.Bs=new Ov(t,e,i)}init(){this.Bs.init()}onInitTracking(){this.Bs.start(!0)}onOptout(){this.Bs.stop()}onBeforeSessionRenewal(){this.Bs.stop(),this.Bs.start()}onArtificialPageViewEnd(){this.Bs.stop()}onBeforeArtificialPageView(){this.Bs.start(),this.Bs.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Bs.onBeforePageView("natural")}}return s})(),Mv=["optout"];var Dv=(()=>{class s{constructor(t,e){this.S=t,this.ls=e}init(){this.S.register(Mv,()=>{this.ls.activate()})}}return s})(),vi="_cs_optout",kv=(()=>{class s{constructor(t,e,i){this.E=t,this.D=e,this.Nt=i}get(){return this.E.cookielessTrackingEnabled?this.Nt.getItem(vi):this.D.get(vi)}set(t){this.E.cookielessTrackingEnabled?this.Nt.setItem(vi,t):this.D.set(vi,t,Eo)}}return s})(),xc="1",Lv=(()=>{class s{constructor(t,e,i){this.w=t,this.Lt=e,this.ft=i}init(){!this.isActive()&&this.zb()&&this.activate()}isActive(){return this.ft.get()===xc}activate(){this.w.emitOptout(),this.ft.set(xc)}zb(){return csString.prototype.indexOf.call(this.Lt.href,vi)>0}}return s})(),xv=(()=>{class s{constructor(){this.yc=null,this.qb=1}startInterval(){this.yc=window.csSetInterval(()=>{let t=this.qb++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){$.counters.tasks.flush(t),$.counters.longTasks.flush(t)}clear(){$.counters.tasks.reset(),$.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.yc&&(csClearInterval(this.yc),this.yc=null)}}return s})(),Vv=(()=>{class s{constructor(){this.Wb=["clicktale.net","contentsquare.net","hotjar.com","heap-api.com"],this.bo=!1,this.Ro=null,this.Fs=new xv}onStartTracking(){this.Yb()}Yb(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{if(e.initiatorType!=="script")return!1;let i=csString.prototype.split.call(e.name,"/")[2]||"";return csArray.prototype.some.call(this.Wb,n=>csString.prototype.endsWith.call(i,n))});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize,c=e.duration-i,l=csString.prototype.split.call(e.name,"/")[2];i>=0&&$.counters.downloadTime.add(l,i),n>=0&&$.counters.transferSize.add(l,n),c>=0&&$.counters.evalTime.add(l,c)}),t.length>0&&($.counters.downloadTime.flush(),$.counters.transferSize.flush(),$.counters.evalTime.flush())}Pm(){$.counters.blockingTime.flush(),$.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.Pm(),this.Ro&&csClearTimeout(this.Ro),this.Fs.stopInterval(),this.bo=!0}onBeforeNaturalPageView(){this.Pm()}onAfterNaturalPageView(t){t===vs.Natural?(this.Fs.flush("boot"),this.Fs.startInterval()):(this.Ro&&csClearTimeout(this.Ro),this.Fs.stopInterval(),this.bo=!0)}onInitialDomStart(){this.bo||this.Fs.stopInterval()}onInitialDomDone(){this.bo||(this.bo=!0,this.Fs.flush("initial-dom"),this.Ro=window.csSetTimeout(()=>{this.Fs.flush("post-initial-dom"),this.Fs.startInterval()},5e3))}onOptout(){this.Fs.clear()}}return s})(),Uv=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),jv=(()=>{class s{constructor(){}static init(t){(!this.Du||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Du=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Du.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Du)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(Uv.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;Hv(s.getString("debugLog"),t)&&(n.value=function(...f){return console.log(l,...f),h.bind(this)(...f)})}}}return s})();function Hv(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var Bv=(()=>{class s{constructor(t){this.Xb=t,this.Om=[],this.ku={},this.Kb=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.Hr().catch(o=>{ot.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i.Ae:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.Nm(c,l):n?Promise.resolve(n[c]):i.Nm(c,[])}})}Nm(t,e){let i=++this.Kb;return new Promise((n,o)=>{this.ku[i]=(c,l)=>{delete this.ku[i],c?o(c):n(l)},this.Ae.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.Om,t.toString())}Hr(){try{let t=Vc.toString()+`
`+csArray.prototype.join.call(this.Om,`
`)+`

const klass = (${this.Xb.toString()});

${Vc.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.Ae=new Worker(i),this.Ae.addEventListener("message",n=>{var o,c,l,h,f;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){ot.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(f=(h=this.ku)[n.data.id])===null||f===void 0||f.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.Ae.onerror=i=>e(new Error(i.message)),this.Ae.onmessage=()=>{this.Ae.onmessage=this.Ae.onerror=null,t()}})}}return s})();function Vc(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function fo(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,f=29,u=256,m=u+1+f,y=30,S=19,C=2*m+1,O=15,v=16,w=7,P=256,M=16,T=17,B=18,et=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),at=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Bt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ft=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gt=512,_=new Array((m+2)*2);i(_);let V=new Array(y*2);i(V);let U=new Array(Gt);i(U);let G=new Array(h-l+1);i(G);let pt=new Array(f);i(pt);let Pt=new Array(y);i(Pt);function Te(a,p,g,E,d){this.static_tree=a,this.extra_bits=p,this.extra_base=g,this.elems=E,this.max_length=d,this.has_stree=a&&a.length}let us,xs,Vs;function Ve(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Ue=a=>a<256?U[a]:U[256+(a>>>7)],oe=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},Ot=(a,p,g)=>{a.bi_valid>v-g?(a.bi_buf|=p<<a.bi_valid&65535,oe(a,a.bi_buf),a.bi_buf=p>>v-a.bi_valid,a.bi_valid+=g-v):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=g)},Zt=(a,p,g)=>{Ot(a,g[p*2],g[p*2+1])},Gi=(a,p)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--p>0);return g>>>1},$r=a=>{a.bi_valid===16?(oe(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},zr=(a,p)=>{let g=p.dyn_tree,E=p.max_code,d=p.stat_desc.static_tree,R=p.stat_desc.has_stree,A=p.stat_desc.extra_bits,I=p.stat_desc.extra_base,Q=p.stat_desc.max_length,F,Wt,We,ct,ms,Hs,nr=0;for(ct=0;ct<=O;ct++)a.bl_count[ct]=0;for(g[a.heap[a.heap_max]*2+1]=0,F=a.heap_max+1;F<C;F++)Wt=a.heap[F],ct=g[g[Wt*2+1]*2+1]+1,ct>Q&&(ct=Q,nr++),g[Wt*2+1]=ct,!(Wt>E)&&(a.bl_count[ct]++,ms=0,Wt>=I&&(ms=A[Wt-I]),Hs=g[Wt*2],a.opt_len+=Hs*(ct+ms),R&&(a.static_len+=Hs*(d[Wt*2+1]+ms)));if(nr!==0){do{for(ct=Q-1;a.bl_count[ct]===0;)ct--;a.bl_count[ct]--,a.bl_count[ct+1]+=2,a.bl_count[Q]--,nr-=2}while(nr>0);for(ct=Q;ct!==0;ct--)for(Wt=a.bl_count[ct];Wt!==0;)We=a.heap[--F],!(We>E)&&(g[We*2+1]!==ct&&(a.opt_len+=(ct-g[We*2+1])*g[We*2],g[We*2+1]=ct),Wt--)}},$i=(a,p,g)=>{let E=new Array(O+1),d=0,R,A;for(R=1;R<=O;R++)E[R]=d=d+g[R-1]<<1;for(A=0;A<=p;A++){let I=a[A*2+1];I!==0&&(a[A*2]=Gi(E[I]++,I))}},qr=()=>{let a,p,g,E,d,R=new Array(O+1);for(g=0,E=0;E<f-1;E++)for(pt[E]=g,a=0;a<1<<et[E];a++)G[g++]=E;for(G[g-1]=E,d=0,E=0;E<16;E++)for(Pt[E]=d,a=0;a<1<<at[E];a++)U[d++]=E;for(d>>=7;E<y;E++)for(Pt[E]=d<<7,a=0;a<1<<at[E]-7;a++)U[256+d++]=E;for(p=0;p<=O;p++)R[p]=0;for(a=0;a<=143;)_[a*2+1]=8,a++,R[8]++;for(;a<=255;)_[a*2+1]=9,a++,R[9]++;for(;a<=279;)_[a*2+1]=7,a++,R[7]++;for(;a<=287;)_[a*2+1]=8,a++,R[8]++;for($i(_,m+1,R),a=0;a<y;a++)V[a*2+1]=5,V[a*2]=Gi(a,5);us=new Te(_,et,u+1,m,O),xs=new Te(V,at,0,y,O),Vs=new Te(new Array(0),Bt,0,S,w)},zi=a=>{let p;for(p=0;p<m;p++)a.dyn_ltree[p*2]=0;for(p=0;p<y;p++)a.dyn_dtree[p*2]=0;for(p=0;p<S;p++)a.bl_tree[p*2]=0;a.dyn_ltree[P*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},qi=a=>{a.bi_valid>8?oe(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Wi=(a,p,g,E)=>{qi(a),E&&(oe(a,g),oe(a,~g)),a.pending_buf.set(a.window.subarray(p,p+g),a.pending),a.pending+=g},Wr=(a,p,g,E)=>{let d=p*2,R=g*2;return a[d]<a[R]||a[d]===a[R]&&E[p]<=E[g]},Yi=(a,p,g)=>{let E=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&Wr(p,a.heap[d+1],a.heap[d],a.depth)&&d++,!Wr(p,E,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=E},Yr=(a,p,g)=>{let E,d,R=0,A,I;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],d=a.pending_buf[a.l_buf+R],R++,E===0?Zt(a,d,p):(A=G[d],Zt(a,A+u+1,p),I=et[A],I!==0&&(d-=pt[A],Ot(a,d,I)),E--,A=Ue(E),Zt(a,A,g),I=at[A],I!==0&&(E-=Pt[A],Ot(a,E,I)));while(R<a.last_lit);Zt(a,P,p)},Xi=(a,p)=>{let g=p.dyn_tree,E=p.stat_desc.static_tree,d=p.stat_desc.has_stree,R=p.stat_desc.elems,A,I,Q=-1,F;for(a.heap_len=0,a.heap_max=C,A=0;A<R;A++)g[A*2]!==0?(a.heap[++a.heap_len]=Q=A,a.depth[A]=0):g[A*2+1]=0;for(;a.heap_len<2;)F=a.heap[++a.heap_len]=Q<2?++Q:0,g[F*2]=1,a.depth[F]=0,a.opt_len--,d&&(a.static_len-=E[F*2+1]);for(p.max_code=Q,A=a.heap_len>>1;A>=1;A--)Yi(a,g,A);F=R;do A=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Yi(a,g,1),I=a.heap[1],a.heap[--a.heap_max]=A,a.heap[--a.heap_max]=I,g[F*2]=g[A*2]+g[I*2],a.depth[F]=(a.depth[A]>=a.depth[I]?a.depth[A]:a.depth[I])+1,g[A*2+1]=g[I*2+1]=F,a.heap[1]=F++,Yi(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],zr(a,p),$i(g,Q,a.bl_count)},Xr=(a,p,g)=>{let E,d=-1,R,A=p[0*2+1],I=0,Q=7,F=4;for(A===0&&(Q=138,F=3),p[(g+1)*2+1]=65535,E=0;E<=g;E++)R=A,A=p[(E+1)*2+1],!(++I<Q&&R===A)&&(I<F?a.bl_tree[R*2]+=I:R!==0?(R!==d&&a.bl_tree[R*2]++,a.bl_tree[M*2]++):I<=10?a.bl_tree[T*2]++:a.bl_tree[B*2]++,I=0,d=R,A===0?(Q=138,F=3):R===A?(Q=6,F=3):(Q=7,F=4))},ra=(a,p,g)=>{let E,d=-1,R,A=p[0*2+1],I=0,Q=7,F=4;for(A===0&&(Q=138,F=3),E=0;E<=g;E++)if(R=A,A=p[(E+1)*2+1],!(++I<Q&&R===A)){if(I<F)do Zt(a,R,a.bl_tree);while(--I!==0);else R!==0?(R!==d&&(Zt(a,R,a.bl_tree),I--),Zt(a,M,a.bl_tree),Ot(a,I-3,2)):I<=10?(Zt(a,T,a.bl_tree),Ot(a,I-3,3)):(Zt(a,B,a.bl_tree),Ot(a,I-11,7));I=0,d=R,A===0?(Q=138,F=3):R===A?(Q=6,F=3):(Q=7,F=4)}},bh=a=>{let p;for(Xr(a,a.dyn_ltree,a.l_desc.max_code),Xr(a,a.dyn_dtree,a.d_desc.max_code),Xi(a,a.bl_desc),p=S-1;p>=3&&a.bl_tree[Ft[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Rh=(a,p,g,E)=>{let d;for(Ot(a,p-257,5),Ot(a,g-1,5),Ot(a,E-4,4),d=0;d<E;d++)Ot(a,a.bl_tree[Ft[d]*2+1],3);ra(a,a.dyn_ltree,p-1),ra(a,a.dyn_dtree,g-1)},Ch=a=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<u;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},na=!1,Ih=a=>{na||(qr(),na=!0),a.l_desc=new Ve(a.dyn_ltree,us),a.d_desc=new Ve(a.dyn_dtree,xs),a.bl_desc=new Ve(a.bl_tree,Vs),a.bi_buf=0,a.bi_valid=0,zi(a)},oa=(a,p,g,E)=>{Ot(a,(n<<1)+(E?1:0),3),Wi(a,p,g,!0)},Ph=a=>{Ot(a,o<<1,3),Zt(a,P,_),$r(a)},Oh=(a,p,g,E)=>{let d,R,A=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Ch(a)),Xi(a,a.l_desc),Xi(a,a.d_desc),A=bh(a),d=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=d&&(d=R)):d=R=g+5,g+4<=d&&p!==-1?oa(a,p,g,E):a.strategy===4||R===d?(Ot(a,(o<<1)+(E?1:0),3),Yr(a,_,V)):(Ot(a,(c<<1)+(E?1:0),3),Rh(a,a.l_desc.max_code+1,a.d_desc.max_code+1,A+1),Yr(a,a.dyn_ltree,a.dyn_dtree)),zi(a),E&&qi(a)},Nh=(a,p,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,p===0?a.dyn_ltree[g*2]++:(a.matches++,p--,a.dyn_ltree[(G[g]+u+1)*2]++,a.dyn_dtree[Ue(p)*2]++),a.last_lit===a.lit_bufsize-1);var Mh=Ih,Dh=oa,kh=Oh,Lh=Nh,xh=Ph,Vh={_tr_init:Mh,_tr_stored_block:Dh,_tr_flush_block:kh,_tr_tally:Lh,_tr_align:xh},aa=(a,p,g,E)=>{let d=a&65535|0,R=a>>>16&65535|0,A=0;for(;g!==0;){A=g>2e3?2e3:g,g-=A;do d=d+p[E++]|0,R=R+d|0;while(--A);d%=65521,R%=65521}return d|R<<16|0};let Uh=()=>{let a,p=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;p[g]=a}return p},jh=new Uint32Array(Uh());var je=(a,p,g,E)=>{let d=jh,R=E+g;a^=-1;for(let A=E;A<R;A++)a=a>>>8^d[(a^p[A])&255];return a^-1},Ki={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ca={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Hh,_tr_stored_block:Bh,_tr_flush_block:Fh,_tr_tally:He,_tr_align:Gh}=Vh,{Z_NO_FLUSH:ds,Z_PARTIAL_FLUSH:$h,Z_FULL_FLUSH:zh,Z_FINISH:Be,Z_BLOCK:la,Z_OK:de,Z_STREAM_END:ha,Z_STREAM_ERROR:te,Z_DATA_ERROR:qh,Z_BUF_ERROR:Kr,Z_DEFAULT_COMPRESSION:Wh,Z_FILTERED:Yh,Z_HUFFMAN_ONLY:Ji,Z_RLE:Xh,Z_FIXED:Kh,Z_DEFAULT_STRATEGY:Jh,Z_UNKNOWN:Qh,Z_DEFLATED:Qi}=ca,Zh=9,tu=15,eu=8,Jr=256+1+29,su=30,iu=19,ru=2*Jr+1,nu=15,J=3,Fe=258,ae=Fe+J+1,ou=32,Zi=42,Qr=69,tr=73,er=91,sr=103,fs=113,li=666,At=1,hi=2,ps=3,Us=4,au=3,Ge=(a,p)=>(a.msg=Ki[p],p),ua=a=>(a<<1)-(a>4?9:0),$e=a=>{let p=a.length;for(;--p>=0;)a[p]=0},ze=(a,p,g)=>(p<<a.hash_shift^g)&a.hash_mask,qe=a=>{let p=a.state,g=p.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),a.next_out),a.next_out+=g,p.pending_out+=g,a.total_out+=g,a.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},Nt=(a,p)=>{Fh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,qe(a.strm)},st=(a,p)=>{a.pending_buf[a.pending++]=p},ui=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},cu=(a,p,g,E)=>{let d=a.avail_in;return d>E&&(d=E),d===0?0:(a.avail_in-=d,p.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=aa(a.adler,p,d,g):a.state.wrap===2&&(a.adler=je(a.adler,p,d,g)),a.next_in+=d,a.total_in+=d,d)},da=(a,p)=>{let g=a.max_chain_length,E=a.strstart,d,R,A=a.prev_length,I=a.nice_match,Q=a.strstart>a.w_size-ae?a.strstart-(a.w_size-ae):0,F=a.window,Wt=a.w_mask,We=a.prev,ct=a.strstart+Fe,ms=F[E+A-1],Hs=F[E+A];a.prev_length>=a.good_match&&(g>>=2),I>a.lookahead&&(I=a.lookahead);do if(d=p,!(F[d+A]!==Hs||F[d+A-1]!==ms||F[d]!==F[E]||F[++d]!==F[E+1])){E+=2,d++;do;while(F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&F[++E]===F[++d]&&E<ct);if(R=Fe-(ct-E),E=ct-Fe,R>A){if(a.match_start=p,A=R,R>=I)break;ms=F[E+A-1],Hs=F[E+A]}}while((p=We[p&Wt])>Q&&--g!==0);return A<=a.lookahead?A:a.lookahead},gs=a=>{let p=a.w_size,g,E,d,R,A;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-ae)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,E=a.hash_size,g=E;do d=a.head[--g],a.head[g]=d>=p?d-p:0;while(--E);E=p,g=E;do d=a.prev[--g],a.prev[g]=d>=p?d-p:0;while(--E);R+=p}if(a.strm.avail_in===0)break;if(E=cu(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=J)for(A=a.strstart-a.insert,a.ins_h=a.window[A],a.ins_h=ze(a,a.ins_h,a.window[A+1]);a.insert&&(a.ins_h=ze(a,a.ins_h,a.window[A+J-1]),a.prev[A&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=A,A++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<ae&&a.strm.avail_in!==0)},lu=(a,p)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(gs(a),a.lookahead===0&&p===ds)return At;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,Nt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-ae&&(Nt(a,!1),a.strm.avail_out===0))return At}return a.insert=0,p===Be?(Nt(a,!0),a.strm.avail_out===0?ps:Us):(a.strstart>a.block_start&&(Nt(a,!1),a.strm.avail_out===0),At)},Zr=(a,p)=>{let g,E;for(;;){if(a.lookahead<ae){if(gs(a),a.lookahead<ae&&p===ds)return At;if(a.lookahead===0)break}if(g=0,a.lookahead>=J&&(a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-ae&&(a.match_length=da(a,g)),a.match_length>=J)if(E=He(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=ze(a,a.ins_h,a.window[a.strstart+1]);else E=He(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(Nt(a,!1),a.strm.avail_out===0))return At}return a.insert=a.strstart<J-1?a.strstart:J-1,p===Be?(Nt(a,!0),a.strm.avail_out===0?ps:Us):a.last_lit&&(Nt(a,!1),a.strm.avail_out===0)?At:hi},js=(a,p)=>{let g,E,d;for(;;){if(a.lookahead<ae){if(gs(a),a.lookahead<ae&&p===ds)return At;if(a.lookahead===0)break}if(g=0,a.lookahead>=J&&(a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-ae&&(a.match_length=da(a,g),a.match_length<=5&&(a.strategy===Yh||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-J,E=He(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,E&&(Nt(a,!1),a.strm.avail_out===0))return At}else if(a.match_available){if(E=He(a,0,a.window[a.strstart-1]),E&&Nt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return At}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=He(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,p===Be?(Nt(a,!0),a.strm.avail_out===0?ps:Us):a.last_lit&&(Nt(a,!1),a.strm.avail_out===0)?At:hi},hu=(a,p)=>{let g,E,d,R,A=a.window;for(;;){if(a.lookahead<=Fe){if(gs(a),a.lookahead<=Fe&&p===ds)return At;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(d=a.strstart-1,E=A[d],E===A[++d]&&E===A[++d]&&E===A[++d])){R=a.strstart+Fe;do;while(E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&d<R);a.match_length=Fe-(R-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(g=He(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=He(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(Nt(a,!1),a.strm.avail_out===0))return At}return a.insert=0,p===Be?(Nt(a,!0),a.strm.avail_out===0?ps:Us):a.last_lit&&(Nt(a,!1),a.strm.avail_out===0)?At:hi},uu=(a,p)=>{let g;for(;;){if(a.lookahead===0&&(gs(a),a.lookahead===0)){if(p===ds)return At;break}if(a.match_length=0,g=He(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(Nt(a,!1),a.strm.avail_out===0))return At}return a.insert=0,p===Be?(Nt(a,!0),a.strm.avail_out===0?ps:Us):a.last_lit&&(Nt(a,!1),a.strm.avail_out===0)?At:hi};function fe(a,p,g,E,d){this.good_length=a,this.max_lazy=p,this.nice_length=g,this.max_chain=E,this.func=d}let di=[new fe(0,0,0,0,lu),new fe(4,4,8,4,Zr),new fe(4,5,16,8,Zr),new fe(4,6,32,32,Zr),new fe(4,4,16,16,js),new fe(8,16,32,32,js),new fe(8,16,128,128,js),new fe(8,32,128,256,js),new fe(32,128,258,1024,js),new fe(32,258,258,4096,js)],du=a=>{a.window_size=2*a.w_size,$e(a.head),a.max_lazy_match=di[a.level].max_lazy,a.good_match=di[a.level].good_length,a.nice_match=di[a.level].nice_length,a.max_chain_length=di[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function fu(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Qi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ru*2),this.dyn_dtree=new Uint16Array((2*su+1)*2),this.bl_tree=new Uint16Array((2*iu+1)*2),$e(this.dyn_ltree),$e(this.dyn_dtree),$e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(nu+1),this.heap=new Uint16Array(2*Jr+1),$e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Jr+1),$e(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let fa=a=>{if(!a||!a.state)return Ge(a,te);a.total_in=a.total_out=0,a.data_type=Qh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Zi:fs,a.adler=p.wrap===2?0:1,p.last_flush=ds,Hh(p),de},pa=a=>{let p=fa(a);return p===de&&du(a.state),p},pu=(a,p)=>!a||!a.state||a.state.wrap!==2?te:(a.state.gzhead=p,de),ga=(a,p,g,E,d,R)=>{if(!a)return te;let A=1;if(p===Wh&&(p=6),E<0?(A=0,E=-E):E>15&&(A=2,E-=16),d<1||d>Zh||g!==Qi||E<8||E>15||p<0||p>9||R<0||R>Kh)return Ge(a,te);E===8&&(E=9);let I=new fu;return a.state=I,I.strm=a,I.wrap=A,I.gzhead=null,I.w_bits=E,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=d+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+J-1)/J),I.window=new Uint8Array(I.w_size*2),I.head=new Uint16Array(I.hash_size),I.prev=new Uint16Array(I.w_size),I.lit_bufsize=1<<d+6,I.pending_buf_size=I.lit_bufsize*4,I.pending_buf=new Uint8Array(I.pending_buf_size),I.d_buf=1*I.lit_bufsize,I.l_buf=3*I.lit_bufsize,I.level=p,I.strategy=R,I.method=g,pa(a)},gu=(a,p)=>ga(a,p,Qi,tu,eu,Jh),mu=(a,p)=>{let g,E;if(!a||!a.state||p>la||p<0)return a?Ge(a,te):te;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===li&&p!==Be)return Ge(a,a.avail_out===0?Kr:te);d.strm=a;let R=d.last_flush;if(d.last_flush=p,d.status===Zi)if(d.wrap===2)a.adler=0,st(d,31),st(d,139),st(d,8),d.gzhead?(st(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),st(d,d.gzhead.time&255),st(d,d.gzhead.time>>8&255),st(d,d.gzhead.time>>16&255),st(d,d.gzhead.time>>24&255),st(d,d.level===9?2:d.strategy>=Ji||d.level<2?4:0),st(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(st(d,d.gzhead.extra.length&255),st(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=je(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=Qr):(st(d,0),st(d,0),st(d,0),st(d,0),st(d,0),st(d,d.level===9?2:d.strategy>=Ji||d.level<2?4:0),st(d,au),d.status=fs);else{let A=Qi+(d.w_bits-8<<4)<<8,I=-1;d.strategy>=Ji||d.level<2?I=0:d.level<6?I=1:d.level===6?I=2:I=3,A|=I<<6,d.strstart!==0&&(A|=ou),A+=31-A%31,d.status=fs,ui(d,A),d.strstart!==0&&(ui(d,a.adler>>>16),ui(d,a.adler&65535)),a.adler=1}if(d.status===Qr)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=je(a.adler,d.pending_buf,d.pending-g,g)),qe(a),g=d.pending,d.pending===d.pending_buf_size));)st(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=je(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=tr)}else d.status=tr;if(d.status===tr)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=je(a.adler,d.pending_buf,d.pending-g,g)),qe(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.name.length?E=d.gzhead.name.charCodeAt(d.gzindex++)&255:E=0,st(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=je(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.gzindex=0,d.status=er)}else d.status=er;if(d.status===er)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=je(a.adler,d.pending_buf,d.pending-g,g)),qe(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.comment.length?E=d.gzhead.comment.charCodeAt(d.gzindex++)&255:E=0,st(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=je(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.status=sr)}else d.status=sr;if(d.status===sr&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&qe(a),d.pending+2<=d.pending_buf_size&&(st(d,a.adler&255),st(d,a.adler>>8&255),a.adler=0,d.status=fs)):d.status=fs),d.pending!==0){if(qe(a),a.avail_out===0)return d.last_flush=-1,de}else if(a.avail_in===0&&ua(p)<=ua(R)&&p!==Be)return Ge(a,Kr);if(d.status===li&&a.avail_in!==0)return Ge(a,Kr);if(a.avail_in!==0||d.lookahead!==0||p!==ds&&d.status!==li){let A=d.strategy===Ji?uu(d,p):d.strategy===Xh?hu(d,p):di[d.level].func(d,p);if((A===ps||A===Us)&&(d.status=li),A===At||A===ps)return a.avail_out===0&&(d.last_flush=-1),de;if(A===hi&&(p===$h?Gh(d):p!==la&&(Bh(d,0,0,!1),p===zh&&($e(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),qe(a),a.avail_out===0))return d.last_flush=-1,de}return p!==Be?de:d.wrap<=0?ha:(d.wrap===2?(st(d,a.adler&255),st(d,a.adler>>8&255),st(d,a.adler>>16&255),st(d,a.adler>>24&255),st(d,a.total_in&255),st(d,a.total_in>>8&255),st(d,a.total_in>>16&255),st(d,a.total_in>>24&255)):(ui(d,a.adler>>>16),ui(d,a.adler&65535)),qe(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?de:ha)},yu=a=>{if(!a||!a.state)return te;let p=a.state.status;return p!==Zi&&p!==Qr&&p!==tr&&p!==er&&p!==sr&&p!==fs&&p!==li?Ge(a,te):(a.state=null,p===fs?Ge(a,qh):de)},Eu=(a,p)=>{let g=p.length;if(!a||!a.state)return te;let E=a.state,d=E.wrap;if(d===2||d===1&&E.status!==Zi||E.lookahead)return te;if(d===1&&(a.adler=aa(a.adler,p,g,0)),E.wrap=0,g>=E.w_size){d===0&&($e(E.head),E.strstart=0,E.block_start=0,E.insert=0);let Q=new Uint8Array(E.w_size);Q.set(p.subarray(g-E.w_size,g),0),p=Q,g=E.w_size}let R=a.avail_in,A=a.next_in,I=a.input;for(a.avail_in=g,a.next_in=0,a.input=p,gs(E);E.lookahead>=J;){let Q=E.strstart,F=E.lookahead-(J-1);do E.ins_h=ze(E,E.ins_h,E.window[Q+J-1]),E.prev[Q&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=Q,Q++;while(--F);E.strstart=Q,E.lookahead=J-1,gs(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=J-1,E.match_available=0,a.next_in=A,a.input=I,a.avail_in=R,E.wrap=d,de};var Su=gu,vu=ga,_u=pa,wu=fa,Au=pu,Tu=mu,bu=yu,Ru=Eu,Cu="pako deflate (from Nodeca project)",fi={deflateInit:Su,deflateInit2:vu,deflateReset:_u,deflateResetKeep:wu,deflateSetHeader:Au,deflate:Tu,deflateEnd:bu,deflateSetDictionary:Ru,deflateInfo:Cu};let Iu=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Pu=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)Iu(g,E)&&(a[E]=g[E])}}return a},Ou=a=>{let p=0;for(let E=0,d=a.length;E<d;E++)p+=a[E].length;let g=new Uint8Array(p);for(let E=0,d=0,R=a.length;E<R;E++){let A=a[E];g.set(A,d),d+=A.length}return g},ma={assign:Pu,flattenChunks:Ou};let ya=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ya=!1}let pi=new Uint8Array(256);for(let a=0;a<256;a++)pi[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;pi[254]=pi[254]=1;var Nu=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,g,E,d,R,A=a.length,I=0;for(d=0;d<A;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<A&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),I+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(I),R=0,d=0;R<I;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<A&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),g<128?p[R++]=g:g<2048?(p[R++]=192|g>>>6,p[R++]=128|g&63):g<65536?(p[R++]=224|g>>>12,p[R++]=128|g>>>6&63,p[R++]=128|g&63):(p[R++]=240|g>>>18,p[R++]=128|g>>>12&63,p[R++]=128|g>>>6&63,p[R++]=128|g&63);return p};let Ea=(a,p=a.length)=>{if(p<65534&&a.subarray&&ya)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let g="";for(let E=0;E<p;E++)g+=String.fromCharCode(a[E]);return g};var Mu=(a,p)=>{let g=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let E,d,R=new Array(g*2);for(d=0,E=0;E<g;){let A=a[E++];if(A<128){R[d++]=A;continue}let I=pi[A];if(I>4){R[d++]=65533,E+=I-1;continue}for(A&=I===2?31:I===3?15:7;I>1&&E<g;)A=A<<6|a[E++]&63,I--;if(I>1){R[d++]=65533;continue}A<65536?R[d++]=A:(A-=65536,R[d++]=55296|A>>10&1023,R[d++]=56320|A&1023)}return Ea(R,d)},Du=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let g=p-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?p:g+pi[a[g]]>p?g:p},Sa={string2buf:Nu,buf2string:Mu,utf8border:Du};function ku(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Lu=ku;let va=Object.prototype.toString,{Z_NO_FLUSH:xu,Z_SYNC_FLUSH:Vu,Z_FULL_FLUSH:Uu,Z_FINISH:ju,Z_OK:ir,Z_STREAM_END:Hu,Z_DEFAULT_COMPRESSION:Bu,Z_DEFAULT_STRATEGY:Fu,Z_DEFLATED:Gu}=ca;function rr(a){this.options=ma.assign({level:Bu,method:Gu,chunkSize:16384,windowBits:15,memLevel:8,strategy:Fu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lu,this.strm.avail_out=0;let g=fi.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==ir)throw new Error(Ki[g]);if(p.header&&fi.deflateSetHeader(this.strm,p.header),p.dictionary){let E;if(typeof p.dictionary=="string"?E=Sa.string2buf(p.dictionary):va.call(p.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(p.dictionary):E=p.dictionary,g=fi.deflateSetDictionary(this.strm,E),g!==ir)throw new Error(Ki[g]);this._dict_set=!0}}rr.prototype.push=function(a,p){let g=this.strm,E=this.options.chunkSize,d,R;if(this.ended)return!1;for(p===~~p?R=p:R=p===!0?ju:xu,typeof a=="string"?g.input=Sa.string2buf(a):va.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(R===Vu||R===Uu)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=fi.deflate(g,R),d===Hu)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=fi.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===ir;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},rr.prototype.onData=function(a){this.chunks.push(a)},rr.prototype.onEnd=function(a){a===ir&&(this.result=ma.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function $u(a,p){p=p||{};let g=new rr(p);if(g.push(a,!0),g.err)throw g.msg||Ki[g.err];return g.result}function zu(a,p){return p=p||{},p.gzip=!0,$u(a,p)}return(a,p,g)=>{let E=zu(a);return p==="base64"?E=btoa(Ea(E)):E=E.buffer,g&&g(E),E}}var Fv=(()=>{class s extends eh{constructor(){super(),this.algorithm=Fr.GZIP,this.Jb=fo(),this.compress=(i,n,o)=>this.Mm.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?$v:Gv;this.Mm=new e,Bv.create(e,{getPakoCompressor:fo}).then(i=>{this.Mm=i})}compressSync(t,e){try{return this.Jb(t,e)}catch(i){throw ot.warn(i),i}}}return s})(),Gv=(()=>{class s{constructor(){this.Qb=fo()}compress(t,e){return Promise.resolve(this.Qb(t,e))}}return s})(),$v=(()=>{class s{Zb(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.Zb(o)):n}}return s})(),zv=(()=>{class s extends eh{constructor(){super(...arguments),this.algorithm=Fr.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Eh=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!jv.isCompressionEnabled()?new zv:this.instance=new Fv}}return s})(),qv=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},Wv=5e3,Yv=(()=>{class s extends ll{constructor(t,e,i){super(t,e),this.Br=null,this.t0=(i==null?void 0:i.type)||"json",this.Dm=i==null?void 0:i.cacheMinutes,this.Co=i==null?void 0:i.timeout}onLoad(t){this.Fr=t}onError(t){this.Io=t}onTimeout(t,e){this.tr=t,this.Co=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.Zc(t);let e=Oi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.e0(i,this.t0)}abort(){this.Br&&(this.Br.abort(),this.Br=null)}isInProgress(){return this.Br!==null}e0(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Io)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.tr)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.Fr)===null||o===void 0||o.call(this,this.s0(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Io)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Br=null},n.timeout=(i=this.Co)!==null&&i!==void 0?i:Wv,this.Br=n,n.send()}s0(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}Zc(t){let e;this.Dm?e=`${qv(this.Dm)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),Xv=(()=>{class s{constructor(t){var e;this.Xe={},this.Lu={},this.km=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.ja=t.endpoint,this.Po=t.compressionOpts,this.ae=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.xu=t.contentType,this.worker=!!t.worker,this.ae&&this.ae.recover(this.km)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Xe[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Xe[e]}):this.Xe={}}send(t,e){let i=e||{...this.Xe},n=!("ct"in i),o=this.xu==="application/json"||typeof t!="string"&&!this.i0(t);"ct"in i||(!this.Po||!n?i.ct=Fr.UNCOMPRESSED:i.ct=this.Po.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(i[f])}`).join("&"),h=`${this.ja}?${l}`;if(wr(this.mandatoryParameters,f=>i[f]==null)){ot.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Po&&n&&typeof c=="string"?this.Po.compressor(c,this.Po.compressionOutputType,f=>this.Lm(h,i,f)):this.Lm(h,i,c)}onLoad(t){this.Fr=t}onError(t){this.Io=t}onTimeout(t,e){this.tr=t,this.Co=e}abort(){this.xm&&this.xm()}setRequestHeader(t,e){this.Lu[t]=e}getQueryParams(){return this.Xe}i0(t){return t&&t.byteLength!==void 0}Lm(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this.xu&&n.setRequestHeader("Content-Type",this.xu),n.onload=()=>{if(this.ae&&this.ae.recover(this.km),this.Fr){let c={params:e,responseText:n.responseText,status:n.status};this.Fr(c)}},n.onerror=()=>{this.ae&&this.ae.save({key:o,metadata:e,events:i}),this.Io&&this.Io({params:e})},this.Co&&this.tr&&(n.timeout=this.Co,n.ontimeout=()=>{this.tr()}),this.xm=()=>n.abort(),Object.keys(this.Lu).forEach(c=>{n.setRequestHeader(c,this.Lu[c])}),n.send(i)}}return s})(),Sh=(()=>{class s{constructor(t){this.Vm=t}create(t,e,i){let n=e?{compressor:this.Vm.compress,compressionOutputType:e,compressionType:this.Vm.algorithm}:void 0;return new Xv({endpoint:t,compressionOpts:n,recoveryStorage:i})}}return s})(),Kv=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),Jv=(()=>{class s{constructor(t){this.Vu=t}start(){this.Vu.onEvent(t=>this.Z(t)),this.Vu.start()}stop(){this.Vu.stop()}Z(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;H.warn(e)}}return s})(),Qv=(()=>{class s{constructor(){this.Kt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){gt(this.Kt)}stop(){mt(this.Kt)}onEvent(t){this.V=t}r0(t){if(!t)return!1;let e=t.disposition;return b(t.sourceFile)&&csArray.prototype.some.call(s.n0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.r0(t)&&this.V({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.n0=["contentsquare","cdnssl.clicktale.net"],j([N("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),Zv=(()=>{class s{init(){this.Ec=new Jv(new Qv),this.Ec.start()}onOptout(){this.Ec.stop()}onArtificialPageViewEnd(t){t&&this.Ec.stop()}onAfterArtificialPageView(t){t&&this.Ec.start()}}return s})(),t_=(()=>{class s{constructor(t,e,i){this.E=t,this.R=e,this.w=i}grantReplayConsent(){if(!os.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}os.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!os.isReplayConsentNeeded(this.E))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}os.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),e_=["replay:consent:unanonymized:granted","trackConsentGranted"],s_=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],i_=["replay:consent:startForSession:granted"],r_=["replay:consent:startForSession:withdrawn"],n_=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.Ct=i,this.R=n,this.w=o}init(){this.Um=new t_(this.E,this.R,this.w),this.Ct.setInitialConsent(),this.ut()}ut(){this.S.register(e_,()=>{this.Ct.grantReplayAnonymizationConsent()}),this.S.register(s_,()=>{this.Ct.withdrawReplayAnonymizationConsent()}),this.S.register(i_,()=>{this.Um.grantReplayConsent()}),this.S.register(r_,()=>{this.Um.withdrawReplayConsent()})}onOptout(){this.Ct.removeAllConsents()}onBeforeVisitorRenewal(){this.Ct.removeAllConsents()}onAfterVisitorRenewal(){this.Ct.setInitialConsent()}onAfterVisitorCleared(){this.Ct.setInitialConsent()}}return s})(),ts="_cs_c",Es=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),o_=(()=>{class s{constructor(t,e,i){this.E=t,this.D=e,this.Nt=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.Nt.getItem(ts):t=this.D.get(ts),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.Nt.setItem(ts,csString(t)):this.D.set(ts,csString(t),Eo)}remove(){this.E.cookielessTrackingEnabled?this.Nt.removeItem(ts):this.D.delete(ts)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.D.delete(ts,xr.CURRENT_DOMAIN):this.D.delete(ts,this.D.getRootDomain()))}}return s})(),a_=(()=>{class s{constructor(t,e,i){this.E=t,this.ft=e,this.w=i}setInitialConsent(){let t=this.ft.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===Es.NOT_REQUIRED||!e&&t!==Es.NOT_REQUIRED}handleSubdomainChange(){this.ft.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?Es.NOT_EXPRESSED:Es.NOT_REQUIRED;this.ft.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.ft.set(Es.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.ft.set(Es.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ft.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.ft.get()===Es.GRANTED}getRequestParameters(){return{uc:`${this.ft.get()}`}}}return s})();var c_=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var Uc=512,jc=255,In={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},l_=(()=>{class s{constructor(t,e){this.M=t,this.ft=e,this.ee={},this.Ge={}}set(t,e,i,n){let o,c;if((_t(t)||b(t))&&Number(t)>0&&yt(e)&&yt(i)&&!Ee(e)&&!Ee(i)&&this.c0(n)){let l=this.M.anonymizePII(csString(e)),h=this.M.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Uc),csString.prototype.slice.call(h,0,jc)],c=i!=="",!X(n)||csArray.prototype.indexOf.call(In.SESSION,n)>=0){let f=this.getCustomVariablesSession();c?f[t]=o:delete f[t],this.setCustomVariableSession(f)}(!X(n)||csArray.prototype.indexOf.call(In.PAGE,n)>=0)&&(c?this.ee[t]=o:delete this.ee[t]),X(n)&&csArray.prototype.indexOf.call(In.NEXT_PAGE_ONLY,n)>=0&&(c?this.Ge[t]=o:delete this.Ge[t])}else throw new Lt(jo[0])}getCustomVariablesSession(){let t=this.ft.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Rs(e)?e:{}}setCustomVariableSession(t){this.ft.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ft.remove()}removeCustomVariablesPage(){this.ee={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Ge)this.Ge.hasOwnProperty(i)&&(this.ee[i]=this.Ge[i]);for(let i in this.ee)this.ee.hasOwnProperty(i)&&(t[i]=this.ee[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Hm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Ge).length>0)for(let t in this.Ge)this.Ge[t]===this.ee[t]&&(delete this.ee[t],delete this.Ge[t])}hasCustomVariablesPage(){return this.ee&&!Ln(this.ee)}getCustomVariablesPage(){return this.Hm(this.ee)}Bm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!Yu(i,1,20)||o.length>Uc||c.length>jc)&&delete t[e]}}Hm(t){this.Bm(t);let e=Ln(t)?[]:t;return window.csJSON.stringify(e)}c0(t){return!X(t)||b(t)||_t(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Ge)this.Ge.hasOwnProperty(e)&&(this.ee[e]=this.Ge[e]);for(let e in this.ee)this.ee.hasOwnProperty(e)&&(t[e]=this.ee[e]);return this.Bm(t),t}}return s})(),h_=(()=>{class s{constructor(t,e,i,n){this.Te=t,this.Oo=e,this.Mo=i,this.Ct=n}init(){this.l0()}shouldMaskNonTextElements(){if(this.Te.anonymisationMethod!==ys.replayRecordingMaskedUrlRegexRules)return!1;if(this.Te.isSMB)return this.shouldUseAnonymization();let t=this.Mo.getMatchingRules(this.Oo.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Ct&&!this.Ct.isReplayUnanonymizedAllowedByConsent()){switch(this.Te.anonymisationMethod){case null:case ys.replayRecordingUnmaskedUrlRegex:return!(this.Te.replayRecordingUnmaskedUrlRegex&&this.Te.replayRecordingUnmaskedUrlRegex.test(this.Oo.getAnonymizedUrl()));case ys.replayRecordingUnmaskedUrlRegexRules:return!this.Mo.evaluateUrl(this.Oo.getAnonymizedUrl())}return!0}else{switch(this.Te.anonymisationMethod){case null:case ys.replayRecordingMaskedUrlRegex:return!!(this.Te.replayRecordingMaskedUrlRegex&&this.Te.replayRecordingMaskedUrlRegex.test(this.Oo.getAnonymizedUrl()));case ys.replayRecordingMaskedUrlRegexRules:return this.Mo.evaluateUrl(this.Oo.getAnonymizedUrl())}return!1}}l0(){this.Te.anonymisationMethod===ys.replayRecordingMaskedUrlRegexRules&&this.Te.replayRecordingMaskedUrlRegexRules?this.Mo.setRegexRules(this.Te.replayRecordingMaskedUrlRegexRules):this.Te.anonymisationMethod===ys.replayRecordingUnmaskedUrlRegexRules&&this.Te.replayRecordingUnmaskedUrlRegexRules&&this.Mo.setRegexRules(this.Te.replayRecordingUnmaskedUrlRegexRules)}}return s})();var u_=(()=>{class s extends Ae{constructor(t){super(),this.W=null,this.Sc=null,this.L=null,this.ci=null,this.Fm=["value","checked","src","data","alt"],this.vc={state:L.MaskedElementState.Child},this.u0=e=>{for(let i of e){if(L.isMaskedElement(i.target)||L.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];L.isMaskedElement(o)||L.isMaskedElementChild(o)||dt(o)&&this.Gm(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];nt.isConnected(o)||this.$m(o)}}},this.d0=t}setMaskedElementSettings(t){this.$s=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.$s||(ot.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.$s;(t=this.ci)!==null&&t!==void 0||(this.ci=this.f0()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.p0()),this.W.observe(o)),c.length!==0&&((i=this.Sc)!==null&&i!==void 0||(this.Sc=this.g0(l)),this.Sc.observe(c)),(n=this.L)!==null&&n!==void 0||(this.L=new we(this.u0,(h,f)=>f==="added"&&this.m0(h))),this.L.observe(),csSetTimeout(this.d0)}onStop(){var t,e,i;this.W&&(this.$m(document),this.W.disconnect()),(t=this.Sc)===null||t===void 0||t.disconnect(),(e=this.L)===null||e===void 0||e.disconnect(),(i=this.ci)===null||i===void 0||i.disconnect()}f0(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}p0(){return new ue(t=>{csArray.prototype.forEach.call(t,e=>{this.y0(e)?this.Gm(e):(this.E0(e),this.S0(e))})})}g0(t){return new ue(e=>{csArray.prototype.forEach.call(e,i=>this.v0(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=L.getMaskedElementDetails(t.target);if(i.state!==L.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:L.MaskedElementState.Parent,width:e.width,height:e.height};L.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:z(t.target),width:e.width,height:e.height})}S0(t){!this.ci||!dt(t)||Lr(t)||this.ci.observe(t)}y0(t){let e=csNodeparentNode.apply(t);return e?L.isMaskedElement(e)||L.isMaskedElementChild(e):Pi(t)?L.isMaskedElement(t.host)||L.isMaskedElementChild(t.host):!1}m0(t){(L.isMaskedElement(t.host)||L.isMaskedElementChild(t.host))&&L.setMaskedElementProperty(t,this.vc)}$m(t){ne(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{L.unsetMaskedElementProperty(i)})}E0(t){let e=t.getBoundingClientRect(),i={state:L.MaskedElementState.Parent,width:e.width,height:e.height};L.setMaskedElementProperty(t,i),this._0(t),ne(t).visitAll(n=>n!==t&&L.setMaskedElementProperty(n,this.vc))}Gm(t){L.setMaskedElementProperty(t,this.vc),ne(t).visitAll(e=>e!==t&&L.setMaskedElementProperty(e,this.vc))}_0(t){var e;let i=(e=rt.getProperty(t,L.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Fm.length;n+=1){let o=this.Fm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&L.setMaskedAttributeProperty(t,i)}v0(t,e){var i;let n=(i=rt.getProperty(t,L.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Jt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&L.setMaskedAttributeProperty(t,n)}}return xe([N()],s.prototype,"resizeObserverCallback",null),s})(),d_=(()=>{class s{constructor(){this.ju=0,this.j=!1,this.zm="data-cs-capture",this.Ai=t=>{for(let e of t){if(me.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];me.isWhitelistedElement(n)||dt(n)&&this.qm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];nt.isConnected(n)||this.Wm(n)}}}}start(){this.ju++,!this.j&&(this.j=!0,this.w0())}w0(){this.W||(this.W=new ue(e=>K(e,i=>this.qm(i))));let t=this.Hu?`[${this.zm}], ${this.Hu}`:`[${this.zm}]`;this.W.observe(t),this.L||(this.L=new we(this.Ai,(e,i)=>i==="added"&&this.A0(e))),this.L.observe()}stop(){this.j&&(this.ju--,this.ju===0&&(this.j=!1,this.T0()))}T0(){this.W&&(this.Wm(document),this.W.disconnect()),this.L&&this.L.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(xt(t))this.Hu=t;else if(e)throw new Lt("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Hu}qm(t){ne(t).visitAll(e=>{me.whitelistElement(e)})}A0(t){me.isWhitelistedElement(t.host)&&me.whitelistElement(t)}Wm(t){ne(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{me.removeWhitelistElement(i)})}}return s})();var f_=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var p_=(()=>{class s{constructor(){this.Jm=255,this.D0="****",this.k0="data-cs-hide-title",this.L0="data-heap-redact-text",this._c={value:!1,onNextPageviewOnly:!1}}getRequestParameters(){return{t:this.getPageTitle()}}getPageTitle(){return this._c.value||this.x0()?this.D0:this.V0(window.document.title)}setHidePageTitle(t){this._c={value:!0,onNextPageviewOnly:t}}resetHidePageTitle(){this._c={value:!1,onNextPageviewOnly:!1}}updateStateOnAfterPageview(){this._c.onNextPageviewOnly&&this.resetHidePageTitle()}x0(){let t=window.csquerySelector[document.nodeType].call(document,"head > title");return t===null?!1:t.getAttribute(this.k0)!==null||t.getAttribute(this.L0)!==null}V0(t){return t.length>this.Jm?csString.prototype.substring.call(t,0,this.Jm):t}}return s})();var g_=(()=>{class s{constructor(t,e){this.tt=t,this.gt=e,this.Bu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.gt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Bu=!0}disableRemoveQueryString(){this.Bu=!1}get(){let t=this.Bu?this.tt.removeQueryString(this.Qm()):this.Qm();return this.tt.anonymizeUrl(t,{maskingPatterns:this.gt.getUrlMaskingPatterns()})}set(t){this.Zm=t}Qm(){if(this.Zm)return this.Zm;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function Hc(s,r,t){if(!X(r)&&!X(t))return s.href;let e=X(r)?vh(r):s.pathname,i=X(t)?_h(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function vh(s){return Rt(s,"/")?s:`/${s}`}function _h(s){return Rt(s,"?")||s===""?s:`?${s}`}var Pn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),m_=(()=>{class s{constructor(t,e){this.Lt=t,this.tt=e,this.U0=10}overridePath(t,e){if(t===""){this.Gr=void 0;return}let i=this.ty(e);i&&(this.Fu=i),this.Gr=e?this.ey(t,e):t}overrideQuery(t,e){let i=this.ty(e);i&&(this.Gu=i),this.Do=e?this.ey(t,e):t}computeOverriddenUrl(t){return this.j0(t)?this.getAnonymizedUrl():t}H0(t){return(typeof t=="string"||typeof t=="number")&&t in Pn}j0(t){let e=this.fa(this.Lt.href);return this.fa(t)===e}fa(t){return vf(t,"/")?csString.prototype.slice.call(t,0,-1):t}ty(t){return X(t==null?void 0:t.lifespan)&&this.H0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}B0(){return this.Fu&&this.Fu in Pn}F0(){return this.Gu&&this.Gu in Pn}cleanupOverrideLifespan(){this.B0()&&(this.Gr=void 0,this.Fu=void 0),this.F0()&&(this.Do=void 0,this.Gu=void 0)}getAnonymizedUrl(){let t=Hc(this.Lt,this.Gr,this.Do);return this.tt.anonymizeUrl(t)}getUrl(){return Hc(this.Lt,this.Gr,this.Do)}getAnonymizedPathAndQuery(){let t=X(this.Gr)?vh(this.Gr):this.Lt.pathname,e=X(this.Do)?_h(this.Do):this.Lt.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Lt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}ey(t,e){return this.G0(e)?this.$0(t):this.z0(e)?this.q0(t):t}z0(t){return!!t.decodeURI}q0(t){return this.sy(t,1,!1)}G0(t){return!!t.decodeURIDeep}$0(t){return this.sy(t,this.U0,!0)}sy(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&H.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),y_=(()=>{class s{constructor(t,e){this.S=t,this.Ts=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ts.updateDynamicFields("emitDebugEvents",t)})}}return s})();var Bc=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.N=e,this.R=i,this.iy=n,this.zs=o}getRequestParameters(){var t;let e={...Oo(),...this.E.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.N.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.iy)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.iy.getSubProjectId()}`),this.W0(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}W0(t){if(!this.zs)return;let e=this.zs.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function E_(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function S_(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var v_=(()=>{class s{constructor(){this.Y0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:E_(),Attributes:S_()};this.$s=L.getComputedSelectorSettings(t,this.$s)}init(){this.X0()}setMaskedElementSettingsFromCommand(t){if(t=L.sanitizeSelectorUserInput(t),!L.isSelectorUserInput(t))throw new Lt(Ho[0]);this.$u(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.$u(e)}getMaskedElementSettings(t){return t?this.ry(this.Y0):this.$s}X0(){var t,e,i,n,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{b(h.attr)&&b(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.$u(l)}$u(t){this.$s=this.ry(t)}ry(t){return L.getComputedSelectorSettings(t,this.$s)}}return s})(),__=60*1e3,w_=30*1e3,A_=(()=>{class s{constructor(t,e){this.R=t,this.N=e,this.zu=!1,this.K0=Vr(()=>this.R.refreshSession(),w_)}onSessionExpired(t){this.J0=t}isSessionValid(){return this.zu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.N.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.N.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.K0():this.Q0()&&(this.ny=D.now(),this.renewSession(!1))}renewSession(t){this.zu=!0,this.J0(t),this.zu=!1}Q0(){return!document.hidden&&(!X(this.ny)||D.now()-this.ny>__)}}return s})(),T_=(()=>{class s{constructor(){this.W=null,this.L=null,this.j=!1,this.Ai=t=>{for(let e of t)if(ss.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!ss.isEditableNode(n)){if(Ar(n)||_d(n)){ss.markEditableNode(n);continue}dt(n)&&this.oy(n)}}}}start(){this.j||(this.j=!0,this.W=new ue(t=>K(t,e=>{this.oy(e)})),this.W.observe("[contenteditable]"),this.L=new we(this.Ai,(t,e)=>e==="added"&&this.Z0(t)),this.L.observe())}stop(){var t,e;this.j&&(this.j=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.L)===null||e===void 0||e.disconnect(),this.L=null)}oy(t){ne(t).visitAll(e=>{ss.markEditableNode(e)})}Z0(t){ss.isEditableNode(t.host)&&ss.markEditableNode(t)}}return s})();var sa=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),b_=(()=>{class s extends sa{constructor(t){super(),this.eR=t,this.fi=[{boundElement:document,type:"touchstart",listener:e=>this.Z(e)},{boundElement:document,type:"touchmove",listener:e=>this.Z(e)},{boundElement:document,type:"touchend",listener:e=>this.Z(e)}],this.ko=new so,this.ko.onGesture((e,i)=>this.Ch(e,i))}Ch(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.fi,t=>gt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.fi,t=>mt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Z(t){this.eR.tryToExecute("process gesture event",()=>{if(this.ko.isValidTouchEvent(t))switch(t.type){case"touchstart":this.ko.processActionDown(t);break;case"touchmove":this.ko.processActionMove();break;case"touchend":this.ko.processActionUp(t);break}})()}static isSwipe(t){return t.type===Tt.FLICK||t.type===Tt.DRAG}}return s})();var R_=(()=>{class s{constructor(t){this.yt=t}on(t,e){return i=>{this.yt.hasValidEventTarget(i)&&this._R(i,t)&&e(i)}}_R(t,e){let i=Ct(t);return Jt.call(i,e)}isMatchesSelectorSupported(){return!!Jt}}return s})(),C_=(()=>{class s extends Ut{constructor(){super(),this.dy=0}onStart(){H.isPerfLoggingActive()&&(this.Lo=window.csSetInterval(()=>this.fy(),s.wR))}onStop(){H.isPerfLoggingActive()&&(this.fy(),csClearInterval(this.Lo))}fy(){this.dy>=s.AR||$.counters.methodPerformance.flush()&&this.dy++}}return s.wR=5e3,s.AR=5,s})(),I_=(()=>{class s{constructor(){}init(){this.Ac=new C_}onStartTracking(){this.Ac.start()}onOptout(){this.Ac.stop()}onArtificialPageViewEnd(t){t&&this.Ac.stop()}onAfterArtificialPageView(t){t&&this.Ac.start()}}return s})();var P_=["hpd"],O_=["hrfs","hsd","hsp","hss","hsh","hpp","hps","hph"],N_=["sendHeapContext"],M_=(()=>{class s{constructor(t,e){this.fr=t,this.S=e}init(){this.S.register(N_,t=>{let e=this.NR(t);e&&this.fr.setHeapPageViewProps(e)})}onAfterNaturalPageView(){this.fr.resetHeapPageViewProps()}onAfterArtificialPageView(){this.fr.resetHeapPageViewProps()}NR(t){if(!Y(t)){H.error("heapPvProps must be an object");return}let e={};for(let i of P_){let n=t[i];if(!b(n)||n.length===0){H.error(`heapPvProps.${i} is required and must be a non-empty string`);return}e[i]=n}for(let i of O_){let n=t[i];if(n!=null&&!b(n)){H.error(`heapPvProps.${i} must be a string, undefined or null`);return}e[i]=n||void 0}return D_(e)}}return s})();function D_(s){return cl(s,r=>r===void 0)}var k_=(()=>{class s{getRequestParameters(){if(!this.Ti)return{};let t={hr:this.Ti.hrfs,hl:L_(this.Ti),hpd:this.Ti.hpd,hpp:this.Ti.hpp,hpq:this.Ti.hps,hph:this.Ti.hph};return x_(t)}setHeapPageViewProps(t){this.Ti=t}resetHeapPageViewProps(){this.Ti=void 0}}return s})();function L_(s){let{hsd:r,hsp:t,hss:e,hsh:i}=s;return r?csString.prototype.concat.call(r,t||"",e||"",i||""):void 0}function x_(s){return cl(s,r=>!r)}var wh=(()=>{class s{constructor(){this.jR=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.rd=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return wr(this.jR,n=>Ir(i,n))}canCollect(t,e){return this.HR(t,e)&&this.BR(e)}HR(t,e){return t>=400||t>=200&&t<300&&this.rd.statusCodes.has(t)&&this.FR(e)}FR(t){return wr(this.rd.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}BR(t){return _o(this.rd.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),V_=(()=>{class s extends wh{constructor(){super(),this.j=!1,this.Wr=null,this.GR=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.V=t}start(){this.j||this.$R()&&(this.zR(),this.Wr&&this.Wr.activate(),this.j=!0)}stop(){this.j&&(this.Wr&&this.Wr.deactivate(),this.j=!1)}$R(){return!!window.fetch&&typeof window.fetch=="function"}qR(t){if(t[0]&&typeof t[0].clone=="function"){let e=Qs(t);return e[0]=t[0].clone(),e}return t}zR(){this.Wr||(this.Wr=Kt({target:window,methodName:"fetch",hook:this.GR,hookPrepareArgs:this.qR,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let n=e[0],o=e[1],c=new Request(n,o);if(!b(c.url))return;let l=D.now(),h;try{h=await t}catch(y){if(this.WR(y)||this.wy(y)||this.YR(y)||this.XR(y))return;throw y}let[f,u]=csString.prototype.split.call(c.url,"?"),m=he(f);if(h&&super.canCollect(h.status,m)){let y={library:i,method:c.method,url:m,queryParameters:u,requestTime:l,responseTime:D.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.Ay(c.headers),responseHeaders:this.Ay(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(y.responseHeaders))try{y.responseBody=await h.clone().text()}catch(S){if(this.wy(S))return}super.isValidBodyType(y.requestHeaders)&&(y.requestBody=await c.text()),this.V(y)}}WR(t){return t instanceof TypeError}wy(t){return t instanceof DOMException&&t.name==="AbortError"}XR(t){return t instanceof DOMException&&t.name==="TimeoutError"}YR(t){return t instanceof DOMException&&csArray.prototype.some.call(s.KR,e=>e===t.name)}Ay(t){let e={};return t.forEach((i,n)=>{i&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(i))}),e}}return s.KR=["NoModificationAllowedError","InvalidStateError","OperationError"],j([N("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),U_=0,j_=(()=>{class s extends wh{constructor(){super(),this.se=csSymbol("ApiCall"),this.j=!1,this.Yr=null,this.Xr=null,this.Rc=null,this.JR=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.QR=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.ZR=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.V=t}start(){this.j||(this.bu(),this.Yr&&this.Yr.activate(),this.Xr&&this.Xr.activate(),this.Rc&&this.Rc.activate(),this.j=!0)}stop(){this.j&&(this.Yr&&this.Yr.deactivate(),this.Xr&&this.Xr.deactivate(),this.j=!1)}bu(){this.Yr||(this.Yr=Kt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.JR,options:{withCallerName:!0}})),this.Xr||(this.Xr=Kt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.QR})),this.Rc||(this.Rc=Kt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.ZR}))}interceptOpen(t,e,i){if(!e[1]||!b(e[1]))return;let[n,o]=csString.prototype.split.call(e[1],"?");t[this.se]={library:i,requestTime:D.now(),method:e[0],url:he(n),queryParameters:o,statusCode:U_,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.se]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.se].url)&&(t[this.se].responseTime=D.now(),t[this.se].statusCode=t.status,t[this.se].responseHeaders=this.tC(t.getAllResponseHeaders()),super.isValidBodyType(t[this.se].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.se].responseBody=t.responseText),this.V(t[this.se]))}interceptSetRequestHeader(t,e){if(!t[this.se])return;let i=e[0],n=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||n.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),n=csString.prototype.trim.call(n),t[this.se].requestHeaders[i]?t[this.se].requestHeaders[i]+=`, ${n}`:t[this.se].requestHeaders[i]=n)}interceptSend(t,e){t[this.se]&&super.isValidBodyType(t[this.se].requestHeaders)&&typeof e[0]=="string"&&(t[this.se].requestBody=e[0])}tC(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[n,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(o))}),e}}return j([N("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),j([N("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),j([N("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),j([N("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),H_=["startDataCollection","data-collection:start"],B_=["data-collection:stop"],F_=(()=>{class s{constructor(t,e){this.ns=t,this.S=e}init(){this.S.register(H_,()=>{this.ns.startDataCollection()}),this.S.register(B_,()=>{this.ns.stopDataCollection()})}}return s})(),On={fromSessionRenewal:!1,isRenewedVisitor:!1},G_=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.ls=i,this.lt=n,this.ir=o,this.F=c,this.Ty=!1,this.by=0,this.nd=!0,this.Ry=!1,this.qs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=On)=>{l&&this.qs||!this.Ty?this.eC(l,h):this.sC()}}isDataCollectionStarted(){return this.qs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=On){this.iC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.nd=!1}allowStartDataCollection({fromSessionRenewal:t}=On){this.nd=!0,this.Ry&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.qs&&(this.qs=!1,this.w.emitArtificialPageViewEnd(!0),this.ir.stop())}sC(){this.qs||(this.qs=!0,this.F.isSessionValid()?(this.F.refreshSession(),this.ir.start(ws.Artificial)):this.F.renewSession(!1))}iC(t,e){return e&&!this.qs?!1:t?!0:this.E.startMode===Cr.Manual?!1:!Kn(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}eC(t,e){if(this.ls.isActive()||(this.Ry=!0,this.rC()&&(this.by++,this.by<2))||!this.nd||this.qs&&!t)return;this.Ty=!0,this.qs=!0,this.lt.init();let i=t?ws.Renewal:ws.Natural;this.ir.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};nt.onDocumentLoaded(n)}rC(){return Kn(this.E)&&this.E.isCsSideloadingHeap()}}return s})(),$_=(()=>{class s{constructor(t){this.od=t}buildApiErrors(t,e){let i=this.od.collectDataPoints(t,e);if(i===null)return null;let n=this.nC(t,i);if(e){let o=this.oC(t,i);return{apiError:n,detailedApiError:o}}return{apiError:n}}oC(t,e){let i=this.Cy(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Cy(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}nC(t,e){let i=this.Cy(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),z_=(()=>{class s extends sa{constructor(t,e,i){super(),this.Cc=t,this.Ic=e,this.od=i,this.ad=0,this.aC=new $_(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.ad++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.ad--,super.unsubscribe(t)}init(){let t=this.od.computeApiErrorCollectionOptions();this.Cc.setCollectionOptions(t),this.Cc.onEvent(e=>this.Iy(e)),this.Ic.setCollectionOptions(t),this.Ic.onEvent(e=>this.Iy(e))}onStartTracking(){this.Cc.start(),this.Ic.start()}onStopTracking(){this.Cc.stop(),this.Ic.stop()}Iy(t){let e=this.aC.buildApiErrors(t,this.ad!==0);if(e)for(let i in this.subscriptions){let n=this.subscriptions[i];n.hasOwnProperty("detailedEvent")?e.detailedApiError&&n(e.detailedApiError):n(e.apiError)}}}return s})(),q_=(()=>{class s{constructor(t,e,i=!1){this.gt=t,this.tt=e,this.wn=i}addUrlMaskingPattern(t){this.gt.addUrlMaskingPattern(t)}anonymize(t){let e=this.tt.removeQueryString(t.url),i={maskingPatterns:this.gt.getUrlMaskingPatterns(),partialMaskingPatterns:this.gt.getPartialUrlMaskingPatterns(),maskNames:this.wn};return{...t,url:this.tt.anonymizeUrl(e,i),library:t.library?this.tt.anonymizeUrl(t.library,i):void 0}}}return s})(),W_=(()=>{class s{constructor(){this.cC=64e3,this.lC=5e3,this.hC=2e3,this.Py=8e3,this.Ms=!!self.TextEncoder,this.Ms&&(this.uC=new TextEncoder)}Uo(t){return this.uC.encode(t).byteLength}Oy(t,e,i){let n=0;t[e]&&(n+=this.Uo(t[e]),n>this.Py&&(n=0,t[e]=lt.ELLIPSIS)),t[i]&&(n+=this.Uo(csJSON.stringify(t[i])),n>this.Py&&(t[i]=s.truncatedObjectMarker))}dC(t){t.queryParameters&&this.Uo(t.queryParameters)>this.hC&&(t.queryParameters=lt.ELLIPSIS)}fC(t){t.requestBody&&this.Uo(t.requestBody)>this.cC&&(t.requestBody=lt.ELLIPSIS),t.responseBody&&this.Uo(t.responseBody)>this.lC&&(t.responseBody=lt.ELLIPSIS)}truncate(t){this.Ms?(this.dC(t),this.fC(t),this.Oy(t,"customResponseHeaders","plainCustomResponseHeaders"),this.Oy(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[lt.ELLIPSIS]:lt.ELLIPSIS},s})(),Y_=(()=>{let s;return function(r){function t(n){let o="[",c="]",l=[];for(let h=0;h<n.length;++h)if(n[h]===o)csArray.prototype.push.call(l,n[h]);else if(n[h]===c)if(csString.prototype.indexOf.call(n,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(n){if(!n)return!0;if(!t(n))return!1;let o=csString.prototype.split.call(n,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let f=csString.prototype.split.call(c,".");return f[0].length===0&&csArray.prototype.shift.call(f),csArray.prototype.every.call(f,u=>{let m=/^\-?\d+$/.exec(u);return m?parseInt(m[0],10)>=0:u==="$"||/\w+/.test(u)})})}r.isValidJSONPath=e;function i(n,o){if(!n)return;let c=csString.prototype.split.call(n,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,f=>{if(f[0]==="'"||f[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(f,1,f.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(f,"."),u=>u.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let f of l)if(h[f]!==void 0)h=h[f];else return;return h}r.getJSONPathValue=i}(s||(s={})),s})(),X_=(()=>{class s{constructor(){this.pC=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.pC.has(t)}}return s})(),K_=(()=>{class s{constructor(){this.gC=64e3,this.mC=100,this.nt={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.Ny=new X_}yC(t){return t.length<=this.gC}EC(t){let e=t["content-type"];return e!==void 0&&(Rt(e,"application/json")||Rt(e,"application/graphql"))}SC(t,e){return t&&this.yC(t)&&this.EC(e)}Pc(t,e,i,n){let o=n==="request"?this.vC:this._C;if(o!==void 0||this.SC(e,i)){if(o===void 0)try{o=csJSON.parse(e),n==="request"?this.vC=o:this._C=o}catch{return}let c=Y_.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!Rs(c))){let l=b(c)?c:csJSON.stringify(c);return lt.truncate(l,this.mC,lt.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,n;return(e.type==="request-response"||e.type==="response")&&(i=this.Pc(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(n=this.Pc(e.path,t.requestBody,t.requestHeaders,"request")),X(i)||X(n)}collectBodyAttribute(t,e,i){let n;(e.type==="request-response"||e.type==="response")&&(n=this.Pc(e.path,t.responseBody,t.responseHeaders,"response"),n&&(e.encrypted?this.nt.responseBodyAttributes[e.path]=n:(n=i(n),this.nt.plainResponseBodyAttributes[e.path]=n))),(e.type==="request-response"||e.type==="request")&&(n=this.Pc(e.path,t.requestBody,t.requestHeaders,"request"),n&&(e.encrypted?n&&(this.nt.requestBodyAttributes[e.path]=n):(n=i(n),this.nt.plainRequestBodyAttributes[e.path]=n)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.nt.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.nt.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let n=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[n]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.nt.customResponseHeaders[n]=t.responseHeaders[n]:this.nt.plainCustomResponseHeaders[n]=i(t.responseHeaders[n])),t.requestHeaders[n]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.nt.customRequestHeaders[n]=t.requestHeaders[n]:this.nt.plainCustomRequestHeaders[n]=i(t.requestHeaders[n]))}collectStandardHeaders(t){if(!(Object.keys(this.nt.standardRequestHeaders).length>0||Object.keys(this.nt.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.Ny.isValidStandardHeader(e)&&(this.nt.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.Ny.isValidStandardHeader(e)&&(this.nt.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.nt.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.nt.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.nt.collectRequestBody=!0)}getCollectedDataPoints(){return this.nt}}return s})(),Ei=(()=>{let s;return function(r){r.CONTENTSQUARE="contentsquare.net",r.CLICKTALE="clicktale.net",r.FAKE_TRACKER="fake-tracker.content-square.fr",r.HEAP_API="heap-api.com",r.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),J_=(()=>{class s{constructor(t,e){this.Oc=t,this.M=e}collectDataPoints(t,e){this.nt=new K_;let i=!1;if(this.Oc.collectionRules)for(let n of this.Oc.collectionRules)this.wC(n,t)&&this.AC(n,t)&&this.TC(n,t)&&(i=!0,this.bC(t,n,e));return i||(i=this.RC(t)),i&&e&&this.Oc.collectStandardHeaders&&this.nt.collectStandardHeaders(t),i?this.nt.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Oc.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let n=[Ei.CONTENTSQUARE,Ei.CLICKTALE,Ei.HEAP_API,Ei.HEAP_ANALYTICS];return csArray.prototype.push.call(n,Ei.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}wC(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}AC(t,e){return t.bodyContent?this.nt.isBodyContentMatching(e,t.bodyContent):!0}TC(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,n=>n.primary);return i===void 0?!0:this.nt.isBodyAttributeValueFound(e,i)}RC(t){return t.statusCode>=400}bC(t,e,i){e.bodyContent&&this.nt.collectBodyContent(e.bodyContent);let n=Ms(e.bodyAttributePaths,o=>o.primary===1);if(n&&this.nt.collectBodyAttribute(t,n,o=>this.M.anonymizePII(o)),i){this.nt.setCollectQueryParam(e.collectQueryParam),this.nt.setCollectResponseBody(e.collectResponseBody),this.nt.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.nt.collectCustomHeaders(t,c,l=>this.M.anonymizePII(l));let o=Ii(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.nt.collectBodyAttribute(t,c,l=>this.M.anonymizePII(l))}}}return s})();var Q_=20,Z_="Custom Error:",tw="https://cserror.com/texterror.js",ew=(()=>{class s extends Ut{constructor(t,e,i,n,o,c){super(),this.Xs=t,this.ud=e,this.St=i,this.Se=n,this.Si=o,this.C=c,this.Mc=[],this.ji=0,this.rr=[]}initStates(){this.ms=D.now(),this.ud.removeQueryParams(),this.ud.setQueryParams(this.St.getRequestParameters()),this.Mc=[],this.ji=0}onStart(){this.Xs.subscribe(s.jt,t=>this.Z(t)),this.ld()}onStop(){this.Xs.unsubscribe(s.jt)}onIframeJavascriptError(t){this.Z(t)}trackCustomError(t){let e={errorType:"jsError",message:`${Z_} ${t}`,lineno:1,colno:1,filename:tw};this.jo(e)}jo(t){if(this.isStarted){let e=this.Z(t);e&&this.Si.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.rr,t)}ld(){this.isStarted&&(csArray.prototype.forEach.call(this.rr,t=>this.jo(t)),this.rr=[])}Z(t){if(this.isStarted&&this.ji<Q_){let e={...t,pageUrl:this.C.getAnonymizedUrl(),rt:this.Ji()};return this.Se.anonymize(e),csArray.prototype.push.call(this.Mc,e),this.To(),e}return null}Ji(){return D.now()-this.ms}To(){this.ud.send({errors:this.Mc}),this.Mc=[],this.ji+=1}}return s.jt="JavaScriptErrorsService",s})(),sw="errors",iw=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f){this.Xs=t,this.Se=e,this.E=i,this.St=n,this.mt=o,this.S=c,this.Si=l,this.C=h,this.te=f}init(){let t=this.te.create(`${this.E.getTrackerUri()}/${sw}`);this.Ks=new ew(this.Xs,t,this.St,this.Se,this.Si,this.C),this.mt.addListener(this.Ks),this.ut()}ut(){this.E.jsCustomErrorsEnabled&&!this.E.customErrors.enabled&&this.S.register(Ll,t=>{this.Ks.trackCustomError(t)})}onStartTracking(){this.Ks.start()}onAfterNaturalPageView(){this.Ks.initStates()}onArtificialPageViewEnd(t){t&&this.Ks.stop()}onAfterArtificialPageView(t){this.Ks.initStates(),t&&this.Ks.start()}onBeforeSessionRenewal(){this.Ks.stop()}onOptout(){this.Ks.stop()}}return s})(),rw=(()=>{class s extends sa{constructor(){super(),this.z=new Ql(t=>this.errorListener(t))}onStartTracking(){this.z.observe()}onStopTracking(){this.z.disconnect()}errorListener(t){let e=this.OC(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}NC(t){return t=t!=null?t:"[NO ERROR MESSAGE]",lt.truncate(t,s.Ih,lt.ELLIPSIS)}MC(t){return!t||se(t)?"":lt.truncate(t,s.Ph,lt.ELLIPSIS)}OC(t){return{errorType:"jsError",message:this.NC(t.message),filename:this.MC(t.filename),lineno:t.lineno,colno:t.colno}}}return s.Ih=1024,s.Ph=150,j([N("Event handler type: error")],s.prototype,"errorListener",null),s})(),nw="CS_ANONYMIZED_VALUE",ow=(()=>{class s{constructor(t,e){this.M=t,this.C=e}anonymize(t){return b(t.message)&&(t.message=this.DC(t.message),t.message=this.M.anonymizePII(t.message)),b(t.filename)&&(t.filename=this.C.computeOverriddenUrl(t.filename)),t}DC(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${nw}'`)}}return s})();var aw=(()=>{class s{constructor(t){this.S=t}init(){this.$y(s.fI,dl),this.$y(s.pI,ul)}$y(t,e){this.S.register([t],(i,n)=>{!b(i)||!(b(n)||Le(n))||H.error(n,`${e}${i}`)})}}return s.pI="logSnippetError",s.fI="logImplementationSnippetError",s})(),cw=["hidePageTitle"],lw=["resetHidePageTitle"],hw="onNextPageviewOnly",uw=(()=>{class s{constructor(t,e){this.fe=t,this.S=e}init(){this.S.register(cw,t=>{let e=t===hw;this.fe.setHidePageTitle(e)}),this.S.register(lw,()=>this.fe.resetHidePageTitle())}onAfterNaturalPageView(){this.fe.updateStateOnAfterPageview()}onAfterArtificialPageView(){this.fe.updateStateOnAfterPageview()}}return s})(),dw=(()=>{class s{constructor(t,e){this.Gt=t,this.E=e,this.zy=!1}enableRecordingContext(t,e,i){this.zy=!0,this.Ur=t,this.R=e,this.oo=i}getRecordingContext(){var t,e,i;if(!this.zy)return{isRecording:!1,recordingStartTimestamp:0,etrState:re.ETR_OFF,etrStatus:ee.ETR_DISABLED,collectState:k.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.Ur.isRecording(),useAnonymization:this.Gt.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Ur.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Ur.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Ur.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?re.ETR_ON:re.ETR_OFF,etrStatus:this.oo.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:k.ANALYTICS_ONLY}}}return s})(),Di=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var fw=(()=>{class s extends Ut{constructor(t,e,i,n,o,c){super(),this._e=t,this.lt=e,this.Wt=i,this.pr=n,this.rn=o,this.it=c}onStart(){var t,e,i;this.Wt.start(),this._e.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this._e.startIdentifier(),(e=this.pr)===null||e===void 0||e.start(),(i=this.rn)===null||i===void 0||i.start()}onStop(){var t,e;this.Wt.stop(),this._e.stopIdentifier(),(t=this.pr)===null||t===void 0||t.stop(),(e=this.rn)===null||e===void 0||e.stop()}}return s})(),pw=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.lt=e,this.re=i,this.Wt=n,this.On=o,this.ht=c,this.Nn=Po(this.On)}getSensitiveStatus(){var t,e;return{started:this.re.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Wt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ht)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.re.isStarted,i=this.it.shouldUseAnonymization();return e?L.isMaskedElement(t)||L.isMaskedElementChild(t)?Xt.MASKED:ky.shouldEncrypt(t)?Xt.ENCRYPTED:ss.isEditableNode(t)?Xt.ANONYMIZED:i?me.isWhitelistedElement(t)?Xt.CAPTURED:Xt.ANONYMIZED:Xt.CAPTURED:Xt.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.re.isStarted)return Xt.ANONYMIZED;let i=this.it.shouldUseAnonymization();return L.isMaskedAttribute(t,e)?Xt.MASKED:i?ri(t)||me.isWhitelistedElement(t)||this.Nn.has(e)?Xt.CAPTURED:Xt.ANONYMIZED:Xt.CAPTURED}}return s})(),gw=(()=>{class s{constructor(t){this.F=t}onAfterVisitorRenewal(){this.F.renewSession(!0)}}return s})(),mw=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),Fc=(()=>{let s;return function(r){function t(u,m){for(let y of u)if(i(y,m))return!0;return!1}r.isUrlMatching=t;function e(u,m){if(b(m)){for(let y of u)if(i(y,m))return!0}else if(Sr(m)){for(let y of u)if(i(y,csString(m)))return!0}return!1}r.isMatching=e;function i(u,m){let y=n(u,m);return u.negate?!y:y}function n(u,m){switch(u.rule_type==="date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(m=(new csDate(m).valueOf()/1e3).toFixed(0)),u.match_operation){case"exact":switch(u.rule_type){case"string":return b(u.pattern)?csString.prototype.toLowerCase.call(m)===csString.prototype.toLowerCase.call(u.pattern):!1;case"boolean":return m===u.pattern||m===csString(u.pattern);case"number":return yt(m)?Number(m)===Number(u.pattern):!1;default:return m===u.pattern}case"starts_with":return b(u.pattern)?csString.prototype.indexOf.call(m,u.pattern)===0:!1;case"ends_with":return b(u.pattern)?ii(m,u.pattern):!1;case"contains":return b(u.pattern)?csString.prototype.indexOf.call(m,u.pattern)!==-1:!1;case"regex":if(!b(u.pattern))return!1;try{return new csRegExp(u.pattern).test(m)}catch(y){return H.warn(`targeting.matchOperation.regex invalid ${y==null?void 0:y.message}`),!1}case"simple":return b(u.pattern)?f(m)===f(u.pattern):!1;case"greater_than":return Number(m)>Number(u.pattern);case"less_than":return Number(m)<Number(u.pattern);case"exact_date":{let y=Number(u.pattern);if(!_t(y))return!1;let S=new csDate(y*1e3);return new csDate(m).toDateString()===S.toDateString()}case"exact_days_ago":return o(u,m);case"more_than_days_ago":return c(u,m);case"less_than_days_ago":return l(u,m);case"unknown":return h(m);default:return H.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function o(u,m){let y=new csDate,S=y.setDate(y.getDate()-Number(u.pattern)),C=new csDate(S);return new csDate(m).toDateString()===C.toDateString()}function c(u,m){let y=Number(u.pattern);if(!_t(y))return!1;let S=Number(y)+1,C=new csDate,O=new csDate(C);return O.setDate(C.getDate()-S),new csDate(m).getTime()<=O.getTime()}function l(u,m){let y=Number(u.pattern);if(!_t(y))return!1;if(y===0)return o(u,m);let S=new csDate,C=new csDate(S);return C.setDate(S.getDate()-y),new csDate(m).getTime()>=C.getTime()}function h(u){return yt(u)?b(u)?csString.prototype.trim.call(u)==="":Sr(u)?u===!0:_t(u)?u!==0:!1:!0}function f(u){let m=Rt(u,"http://")||Rt(u,"https://")?u:`https://${u}`,y=fl(m);return y!==null?csString.prototype.replace.call(y.host,/^www./,""):u}}(s||(s={})),s})(),Nn={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===mw.URL},yw=(()=>{class s{constructor(){this.Wy=new No,this.Yy=[],this.Xy=[]}setTargetingRules(t){this.Wy.setRegexRules(csArray.prototype.filter.call(t,Nn.isURL));for(let e of t)Nn.isLegacyURL(e)?csArray.prototype.push.call(this.Yy,e):Nn.isLegacyTrigger(e)&&csArray.prototype.push.call(this.Xy,e)}matchUrl(t){return Fc.isUrlMatching(this.Yy,t)||this.Wy.evaluateUrl(t)}matchTrigger(t){return Fc.isMatching(this.Xy,t)}}return s})(),Ew=(()=>{class s extends Ut{constructor(t,e,i){super(),this.Ky=t,this.md=e,this.C=i}init(){this.yd=new yw,this.Ky&&this.yd.setTargetingRules(this.Ky)}onStart(){}checkTargetingRules(){let t=this.C.getAnonymizedUrl();this.md(this.Ed(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.md(this.Ed(t,"url"))}onExternalEvent(t){this.isStarted&&this.md(this.Ed(t.name,"trigger"))}Ed(t,e){var i,n;return e==="url"&&b(t)&&(!((i=this.yd)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.yd)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),Sw={MATCHED:{[k.ANALYTICS_ONLY]:k.ANALYTICS_ONLY_RULES_TARGETING,[k.RECORDING_GLOBAL_SAMPLING]:k.RECORDING_RULES_TARGETING,[k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:k.RECORDING_RULES_TARGETING},MISSED:{[k.ANALYTICS_ONLY]:k.ANALYTICS_ONLY_RULES_TARGETING,[k.RECORDING_GLOBAL_SAMPLING]:k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},vw=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.bt=i,this.J=n,this.C=o,this.R=c,this.ns=l,this.nr=!1,this.qo=(h=!1)=>{this.nr&&this.E.isSMB&&this.ns.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===Cr.Automatic&&this.ns.startDataCollection({fromSessionRenewal:h})},this.vI=h=>{this.nr||(this.nr=h,this.Jy(),this.qo())}}init(){this.E.isSMB&&this.ns.disableStartDataCollection(),this.nn=new Ew(this.E.recordTargetingRules,this.vI,this.C),this.J.addListener(this.nn),this.nn.init()}start(){this.nn.start()}stop(){this.nn.stop()}maybeStartDataCollection(t){if(t){this.qo(t);return}if(this._I()){this.nr=!0,this.qo(),this.stop();return}this.nn.checkTargetingRules()}onAfterArtificialPageView(){this.nn.checkTargetingRules()}onCollectStateChange(t){if(this.Qy(t)){this.stop();return}let e=t===k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.nr&&e||csSetTimeout(()=>this.Zy(t),0)}onStartTracking(){this.Jy()}_I(){let t=this.R.getSession();return!!(t&&this.Qy(t.collectState))}Qy(t){return t===k.RECORDING_RULES_TARGETING||t===k.ANALYTICS_ONLY_RULES_TARGETING}Jy(){var t;if(this.nr){let e=this.R.getSession(),i=this.bt.getInitialCollectState();this.Zy((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.ns.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}Zy(t){let e=Sw[this.nr?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,re.ETR_OFF)}}return s})(),Ah=(()=>{class s{constructor(){this.tE=new Set,this.eE=[],this.Sd=new Set,this.vd=[]}addUrlMaskingPattern(t){if(this.tE.has(t))return;this.tE.add(t);let e=Ha(t);csArray.prototype.push.call(this.eE,e)}getUrlMaskingPatterns(){return this.eE}resetPartialUrlMaskingPatterns(){this.Sd.clear(),this.vd=[]}addPartialUrlMaskingPattern(t){if(this.Sd.has(t))return;this.Sd.add(t);let e=Ha(t);csArray.prototype.push.call(this.vd,e)}getPartialUrlMaskingPatterns(){return this.vd}}return s})(),_w=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this.R=i,this.ms=D.now()}resetStartTime(){this.ms=D.now()}getSessionData(){let{projectId:t}=this.E,e=this.N.getVisitor();e==null&&H.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.R.getSession();o===null&&H.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:D.now()-this.ms}}}return s})(),ww=["clearSession"],Aw=["extendSession"],Tw=["extendSessionV2"],bw=["getSessionData"],Rw=["session:start:newVisitor"],Cw=["session:clear:visitor"],Iw=(()=>{class s{constructor(t,e,i,n){this.E=t,this.N=e,this.R=i,this.S=n}init(){this._d=new _w(this.E,this.N,this.R),this.S.register(ww,()=>this.R.removeSession()),this.S.register(Aw,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.isHeapSideloadsCs()&&this.S.register(Tw,()=>this.R.extendSession(),{disableApplyPending:!0}),this.S.register(bw,()=>this._d.getSessionData(),{disableApplyPending:!0}),this.S.register(Rw,()=>this.N.renewVisitor()),this.S.register(Cw,()=>{this.N.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.N.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this._d.resetStartTime()}onAfterArtificialPageView(){this._d.resetStartTime()}onOptout(){this.N.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),Pw=(()=>{class s{constructor(t,e,i,n,o,c,l,h,f,u,m,y,S,C,O,v,w,P,M,T,B,et,at,Bt,Ft,Gt,_,V,U,G,pt,Pt,Te,us,xs,Vs,Ve){this.St=t,this.an=e,this.pe=i,this.N=n,this.R=o,this.F=c,this.Os=l,this.w=h,this.S=f,this.gl=u,this.E=m,this.ml=y,this.ls=S,this.Tn=C,this.Ct=O,this.M=v,this.Q=w,this.tt=P,this.C=M,this.wI=T,this.J=B,this.mt=et,this.At=at,this.sE=Bt,this.qt=Ft,this.AI=Gt,this.O=_,this.te=V,this.D=U,this.Nt=G,this.K=pt,this.bt=Pt,this.lt=Te,this.fe=us,this.rs=xs,this.es=Vs,this.ss=Ve,this.TI=Ue=>{this.w.emitBeforeSessionRenewal(),this.cn(!0,Ue),this.w.emitAfterSessionRenewal()},this.bI=Ue=>{this.w.emitBeforeSessionRenewal(),this.bt.refreshQuota(oe=>{oe!==k.QUOTA_REACHED&&(this.cn(!0,Ue),this.w.emitAfterSessionRenewal())})}}start(){if(this.ml.init(),this.ls.init(),this.ls.isActive())return;let t,e,i,n,o,c,l,h,f,u,m,y,S,C,O,v,w,P,M;this.O.schedule(()=>{O=new gw(this.F),y=new R_(this.Q),S=new u_(()=>{}),v=new d_,M=new T_;let T=new fw(S,this.lt,v,P,M,this.wd());C=new pw(this.wd(),this.lt,T,v,this.E.whitelistedAttributes,w);let B=new im(this.w,this.S,this.lt,T,v,w,P);B.init(),this.w.addListener(B),t=new WS(this.E,this.an,this.N,this.Q,y,this.S,this.F,new b_(H),this.mt,this.te,this.J,C,this._t,this.es,this.ss),e=new dm(this.S,this.R,this.E,this.St,this.pe,this.M),m=new dw(C,this.E);let et=null,at=new Wg;i=new hv(this.N,this.R,this.S,this.mt,et,this.E,at,m),n=new vm(this.E,this.an,this.N,this.S,this.M,this.F,this.C),this.E.isHeapSideloadsCs()&&(this.fe||(this.fe=new p_),this.iE=new uw(this.fe,this.S),this.w.addListener(this.iE),this.iE.init());let Bt;if(this.E.isHeapSideloadsCs()){Bt=new k_;let Gt=new M_(Bt,this.S);this.w.addListener(Gt),Gt.init()}this.ir=new Zg(this.E,this.S,this.w,this.an,this.N,this.R,this.Os,this.Ct,this.At,this.C,this.qt,at,this.J,this.fe,Bt),this.rE=new Iw(this.E,this.N,this.R,this.S),this.ns=new G_(this.E,this.w,this.ls,this.lt,this.ir,this.F),new F_(this.ns,this.S).init(),l=new Pm(this.E,this.S,this.pe,this.an,this.J),h=new aw(this.S),f=new I_}),this.E.apiErrors.enabled&&this.O.schedule(()=>{this.gt=new Ah,this.RI=new Tv(this.S,this.gt),this.RI.init()}),this.E.apiErrors.enabled&&this.O.schedule(()=>{var T,B;let et=new J_(this.E.apiErrors,this.M);this.pt=new z_(new j_,new V_,et),this.ve=new q_(this.gt,this.tt,!!(!((B=(T=this.E)===null||T===void 0?void 0:T.experimental)===null||B===void 0)&&B.anonymizeNameInUrls)),this.Nr=new W_;let at=new _v(this.pt,this.ve,this.E,this.an,this.mt,this.S,this.te);at.init(),this.w.addListener(at)}),this.E.jsErrorsEnabled&&this.O.schedule(()=>{this.Xs=new rw,this.Se=new ow(this.M,this.C);let T=new iw(this.Xs,this.Se,this.E,this.an,this.mt,this.S,this.J,this.C,this.te);T.init(),this.w.addListener(T)}),this.O.schedule(()=>{this.Tn.init()}),this.O.schedule(()=>{i.init()}),this.O.schedule(()=>{e.init()}),this.O.schedule(()=>{n.init()}),this.O.schedule(()=>{this.sE.init()}),this.O.schedule(()=>{this.ir.init()}),this.O.schedule(()=>{this.rE.init()}),this.O.schedule(()=>{l.init()}),this.O.schedule(()=>{this.wI.init()}),this.O.schedule(()=>{h.init()}),this.O.schedule(()=>{f.init()}),this.O.schedule(()=>{this.AI.init()}),this.O.schedule(()=>{this.w.addListener(this.rE),this.w.addListener(this.gl),this.w.addListener(t),this.w.addListener(this.Tn),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.sE),this.w.addListener(this.ir),this.w.addListener(l),this.w.addListener(e),this.w.addListener(f),this.w.addListener(O)}),Di.isRecordingSupported()&&this.O.schedule(()=>{let T=new ES(m,this.R,this.E,this.St,this.S,this.M,this.F,S,this.Se,this.pt,this.ve,this.gt,this.w,this.J,this.mt,this.qt,this.te,this.tt,this.Nr,this.wd(),this.Kr,w);T.init(),this.w.addListener(T),i.setRecordingService(T.recordingService)}),this.O.schedule(()=>{var T;let B,et}),this.O.schedule(()=>{t.init()}),this.O.schedule(()=>{this.E.isQuotaEnabled()?this.F.onSessionExpired(T=>{this.bI(T)}):this.F.onSessionExpired(T=>{this.TI(T)}),this.cn()})}cn(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.Wo||(this.Wo=new vw(this.E,this.w,this.bt,this.J,this.C,this.R,this.ns),this.w.addListener(this.Wo),this.Wo.init(),this.Wo.start(),this.S.start(),(i=this._t)===null||i===void 0||i.start()),this.Wo.maybeStartDataCollection(t);return}this.S.start(),(n=this._t)===null||n===void 0||n.start(),this.ns.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}wd(){if(this.it)return this.it;let t=new No;return this.it=new h_(this.E,this.C,t,this.Ct),this.it.init(),this.it.shouldUseAnonymization()&&$.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var Th=(()=>{class s{constructor(t){this.configuration=t}}return s})(),Ow=(()=>{class s extends Th{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.Ad=i,this.C=n,this.Td=o,this.bd=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.bd=!0,this.Td.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===k.QUOTA_REACHED||t.collectState===k.RECORDING_RULES_TARGETING||t.collectState===k.RECORDING_TEMPORARILY)&&(t.collectState=k.ANALYTICS_ONLY),t}computeInitialCollectState(){return os.isReplayConsentNeeded(this.configuration)?k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Vc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Vc()}Vc(){if(!Di.isRecordingSupported())return k.ANALYTICS_ONLY;let t=k.ANALYTICS_ONLY,e=re.ETR_OFF;return Cs.percentage()<this.configuration.replayRecordingRate||this.Ad.isForceReplayRecorded()?t=k.RECORDING_GLOBAL_SAMPLING:this.bd&&this.Td.evaluateUrl(this.C.getAnonymizedUrl())&&(t=k.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=re.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!Di.isRecordingSupported())return k.ANALYTICS_ONLY;if(os.isRecordingBlockedByConsent(t))return t.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===k.RECORDING_GLOBAL_SAMPLING)return k.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?re.ETR_ON:re.ETR_OFF;return this.bd&&this.Td.evaluateUrl(this.C.getAnonymizedUrl())?(this.w.emitCollectStateChange(k.RECORDING_URL_SAMPLING,e),k.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(k.ANALYTICS_ONLY,e),k.ANALYTICS_ONLY)}isReplayRecorded(t){return os.isRecordingBlockedByConsent(t)?!1:t.collectState===k.RECORDING_TEMPORARILY||t.collectState===k.RECORDING_GLOBAL_SAMPLING||t.collectState===k.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return k.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),ce="_cs_s",po=18e5,Mn=".",Nw=13,pr=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),Mw=(()=>{class s{constructor(t,e,i){this.E=t,this.D=e,this.K=i,this.ne=null,this.Rd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Al(e):null}getRawSession(t){if(t){let f=this.Cd();return zn(f)}let{sessionString:e,status:i}=this.CI(),n=zn(e);if(i!==pr.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.Cd();if(!o)return null;let c=csString.prototype.split.call(o,Mn);if(!s.nE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.II(h),n}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}set(t,e=po){var i;let n=D.now()+e,o=$p(t);o+=`${Mn}${n}`,this.PI(o,n),this.E.cookielessTrackingEnabled?this.K.setItem(ce,o):(this.D.set(ce,o,e),(i=this.Ni)===null||i===void 0||i.call(this,ce,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(ce):(this.D.delete(ce),(t=this.Mi)===null||t===void 0||t.call(this,ce)),this.OI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.D.delete(ce,xr.CURRENT_DOMAIN):this.D.delete(ce,this.D.getRootDomain()),this.set(t))}isValid(t){return t!==null&&ko(t)}PI(t,e){this.ne={sessionString:t,expires:e}}CI(){return this.ne?this.ne&&D.now()<=this.ne.expires?{sessionString:this.ne.sessionString,status:pr.FOUND}:{sessionString:this.ne.sessionString,status:pr.EXPIRED}:{sessionString:this.Cd(),status:pr.NOT_FOUND}}OI(){this.ne=null}II(t){this.ne&&(this.ne.expires=t,this.Rd=!0)}isCacheRefreshed(){return this.Rd}resetCacheRefreshed(){this.Rd=!1}Cd(){if(this.E.cookielessTrackingEnabled){let e=this.K.getItem(ce);return!e||this.oE(e)?null:e}let t=this.D.get(ce);return!t||this.oE(t)?null:t}oE(t){let e=csString.prototype.split.call(t,Mn);if(!s.nE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&D.now()>i}static nE(t){return t[t.length-1].length===Nw}}return s})(),Dw=(()=>{class s extends Th{constructor(t,e,i){super(t),this.configuration=t,this.Yo=e,this.w=i,this.NI=k.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.aE=t,this.Xo=void 0,this.MI()}init(t){this.DI();let e=vt.get(ce);e!==null&&ko(e)?t(this.canCollect(zp(e))):this.refreshQuota(i=>{t(i!==k.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==k.QUOTA_REACHED}computeInitialCollectState(t){return this.Xo?(this.w.emitCollectStateChange(this.Xo,this.configuration.malkaEtrEnabled?re.ETR_ON:re.ETR_OFF),this.Xo):(H.warn("Quota file error computeInitialCollectState() called before quota answered"),k.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===k.QUOTA_REACHED?k.QUOTA_REACHED:!Di.isRecordingSupported()&&this.isReplayRecorded(t)?k.ANALYTICS_ONLY:t.collectState===k.RECORDING_RULES_TARGETING?k.RECORDING_RULES_TARGETING:t.collectState===k.ANALYTICS_ONLY_RULES_TARGETING?k.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===k.RECORDING_GLOBAL_SAMPLING?k.RECORDING_GLOBAL_SAMPLING:k.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===k.RECORDING_GLOBAL_SAMPLING||t.collectState===k.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Xo||k.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return k.ANALYTICS_ONLY}Ko(t){this.Xo=t,this.aE&&this.aE(t)}DI(){this.Yo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Yo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Yo.onLoad(t=>this.quotaFileHandler(t))}MI(){this.Yo.isInProgress()||this.Yo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.kI(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;H.warn(e),this.Ko(this.NI)}kI(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Cs.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Di.isRecordingSupported()?this.Ko(k.RECORDING_GLOBAL_SAMPLING):this.Ko(k.ANALYTICS_ONLY):e&&!i?this.Ko(k.ANALYTICS_ONLY):this.Ko(k.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return k.ANALYTICS_ONLY}}return j([N("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),j([N("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})();var kw=(()=>{class s{constructor(t,e,i,n,o){this.N=t,this.R=e,this._s=i,this.At=n,this.E=o}get(){return{exclusion:this._s.getAppliedTrackingDraw(),visitor:this.N.getVisitor(),session:this.R.getSession(),cvars:this.At.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this._s.exclude(this.E),this.N.removeVisitor(),this.R.removeSession(),this.At.removeCustomVariablesSession()}include(t){this._s.removeExclusion(),this.N.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.At.setCustomVariableSession(t.cvars):this.At.removeCustomVariablesSession()}}return s})();var ia=60*1e3,Lw=60*ia,xw=4*Lw-ia,zs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),Vw=(()=>{class s{constructor(t,e,i,n,o){this.Re=t,this.bt=e,this.w=i,this.HI=n,this.BI=o,this.Jo=null,this.Pd=0,this.Qo=zs.NO}setDynamicVariablesService(t){this.FI=t}createOrUpdateSession(){this.Od(),this.GI=D.now(),this.Pd=0;let t=this.hE();t===null?(t=this.$I(),this.Vc(t),this.w.emitSessionCreated()):(t=this.bt.sanitizeSessionCollectState(t),this.zI(t),t.collectState=this.bt.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.bt.getInitialCollectState(),t.collectState=this.bt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Qo=zs.GRANTED}withdrawnReplayRecording(t){t.collectState=this.bt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Qo=zs.WITHDRAWN}Vc(t){this.Qo===zs.WITHDRAWN?(t.collectState=this.bt.getRecordingConsentWithdrawn(),this.setSession(t)):this.Qo===zs.GRANTED?t.collectState=this.bt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.bt.computeInitialCollectState(t),this.Qo=zs.NO}$I(){return{pageNumber:1,collectState:this.bt.getInitialCollectState(),replayConsent:this.HI?$n.NOT_EXPRESSED:$n.UNNECESSARY,etrStatus:ee.ETR_NOT_SAVED_SESSION}}zI(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.bt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===k.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Re.get()}hE(){return this.Re.get(!0)}doesSessionExist(){return this.Re.get()!==null}setSession(t){this.Re.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.hE();t&&this.setSession(t)}removeSession(){this.Re.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.qI(t);return this.WI(e)}WI(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Bp(i)){let n=Fp[i]||i;csArray.prototype.push.call(e,n)}}),e}qI(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.BI&&csArray.prototype.push.call(e,k.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Re.getRawSession();return this.Re.isValid(t)}handleSubdomainChange(){this.Re.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Re.isCacheRefreshed();return e&&t&&this.Re.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Jo||this.uE()}extendSession(){let t=this.getSession();return t===null?(H.warn("extendSession is trying to extend an expired session"),this.Od(),!1):(this.setSession(t),!0)}uE(){if(this.YI()){this.Od();return}this.extendSession()&&(this.XI(),this.KI())}KI(){this.Jo=window.csSetTimeout(()=>{this.uE()},po-ia)}YI(){return xw-(D.now()+po-this.GI)<0}Od(){this.Jo&&(window.csClearTimeout(this.Jo),this.Jo=null)}XI(){this.Pd+=1,this.FI.trackDynamicVariable("session_expiry_update",this.Pd)}}return s})();var Uw=(()=>{class s{constructor(t,e,i){this.N=t,this.R=e,this.ZI=i}handle(){this.N.hasAllowSubdomainsChanged()&&(this.N.handleSubdomainChange(),this.R.handleSubdomainChange(),this.ZI.handleSubdomainChange())}}return s})(),Dn="_cs_inc",jw=(()=>{class s{constructor(t,e){this.Lt=t,this.D=e}isForceIncluded(){return this.tP()||this.eP()}isForceReplayRecorded(){return this.sP(k.RECORDING_GLOBAL_SAMPLING)}tP(){return this.D.get(Dn)!==null}sP(t){return this.D.get(Dn)===t}eP(){return csString.prototype.indexOf.call(this.Lt.href,Dn)>0}}return s})(),Hw=(()=>{class s{constructor(t,e,i){this.E=t,this.N=e,this._s=i}clear(){this.iP()&&(this.dE=this.N.getVisitor(),this.N.removeVisitor()),this.rP()&&this._s.removeExclusion()}iP(){return this.N.doesVisitorExist()&&this.N.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}rP(){return this._s.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.dE&&this.N.setVisitor(this.dE)}}return s})(),Bw=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.N=e,this._s=i,this.fE=n,this.nP=o,this.oP=c,this.aP=l,this.Ad=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.aP)===null||e===void 0||e.start(()=>this.kd(t)):(i=this.oP)===null||i===void 0||i.applyUpToDate(()=>this.kd(t)):this.kd(t)}kd(t){this.nP.handle(),this.fE.clear(),this.cP()?(this.fE.restoreClearedVisitor(),t(!0)):(this._s.exclude(this.E),t(!1))}cP(){let t=Cs.boolean(this.E.sampleRate);return this.Ad.isForceIncluded()||!this._s.isExcluded()&&this.N.doesVisitorExist()||!this._s.isExcluded()&&t}}return s})(),Fw=(()=>{class s{constructor(t,e,i,n){this.E=t,this.ft=e,this.w=i,this.R=n,this.lP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.hP(),(t=this.R)===null||t===void 0||t.removeSession()),this.uP(e),this.setVisitor(e)}hP(){return{id:f_.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:Ta(),lastVisitTimestamp:0,hitTimestamp:0,expires:D.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}uP(t){let e=Ta();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.pE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ft.get()}setVisitor(t){this.ft.set(t)}doesVisitorExist(){return this.ft.get()!==null}resetVisitor(){this.gE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.ft.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.ft.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.pE===void 0?!1:t.visitsCount!==this.pE}dP(){return!X(this.mE)||D.now()-this.mE>this.lP}renewVisitor(){this.dP()?(this.mE=D.now(),this.gE(),this.w.emitAfterVisitorRenewal()):H.warn("session:start:newVisitor is trying to renew visitor under time limit")}gE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),pe="_cs_id",Gw=(()=>{class s{constructor(t,e,i){this.E=t,this.D=e,this.K=i}onCookieToSet(t){this.Ni=t}onCookieToRemove(t){this.Mi=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.K.getItem(pe):t=this.D.get(pe),t?(Vp(t)||H.warn(`Invalid visitor string: ${t}`),Lp(t)):null}set(t){var e;let i=xp(t);if(this.E.cookielessTrackingEnabled)this.K.setItem(pe,i);else{let n=new csDate(t.expires);this.D.set(pe,i,n),(e=this.Ni)===null||e===void 0||e.call(this,pe,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.K.removeItem(pe):(this.D.delete(pe),(t=this.Mi)===null||t===void 0||t.call(this,pe))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.D.delete(pe,xr.CURRENT_DOMAIN):this.D.delete(pe,this.D.getRootDomain()),this.set(t))}}return s})(),$w=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Oi=e,this.Rs=i,this.O=n,this.w=o,this.K=c}initWithQuota(){if(!this.E.collectionEnabled){this.yE();return}let t=new Yv(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.bt=new Dw(this.E,t,this.w),this.bt.init(e=>{e?this.init():this.yE()})}fP(){this.O.schedule(()=>{this.M=new ni,this.tt=new ip(this.M),this.C=new m_(window.location,this.tt),this.D=new xr(this.E,this.C,this.Oi),this.D.init(),this.Nt=new Kv,this.S=new wp([_p.UXA]),this.J=new Ap,this.lt=new v_,this.Ct=new a_(this.E,new o_(this.E,this.D,this.Nt),this.w)})}yE(){}init(){_i.isSupported()&&_i.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,f,u,m,y,S,C,O,v,w,P,M,T,B,et,at,Bt,Ft,Gt,_,V,U;this.fP();let G=new Vv;this.w.addListener(G),this.O.schedule(()=>{m=new jw(window.location,this.D),new Zv().init(),y=Eh.create(),u=new Sh(y),this.bt===void 0&&(this.bt=new Ow(this.E,this.w,m,this.C,new No),this.bt.init())}),this.O.schedule(()=>{t=new Mw(this.E,this.D,this.K),e=new Vw(t,this.bt,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new Gw(this.E,this.D,this.K),n=new Fw(this.E,i,this.w,e),this.Rs.setContext(n,e)}),this.O.schedule(()=>{c=new Uw(n,e,this.Ct),l=new Wp(this.E,this.D,this.K),h=new Jp(window.location,l),f=new Kp(h),O=new Hw(this.E,n,h),Ft=new Dp(De,this.E);let pt;T=new gp(Ft,this.E.isChild,pt),B=new mp(Ft),et=new yp(Ft),at=new Sp,Bt=new ap(T,B,et,at),v=new vp(this.S,Bt),w=new tg(this.C),P=new Qp(w,this.S);let Pt=new Yp(this.E,this.D,this.K);Gt=new l_(this.M,Pt),M=new em(this.S,Gt);let Te=new kw(n,e,h,Gt,this.E)}),this.O.schedule(()=>{let pt=new Bw(this.E,n,h,O,c,S,o,m);this.E.implementations&&(_=new Nv(this.E.implementations,this.S,this.O),_.init(),this.w.addListener(_)),pt.compute(Pt=>{this.O.schedule(()=>{var Te,us,xs,Vs;v.init();let Ve=new n_(this.E,this.S,this.Ct,e,this.w),Ue=new kv(this.E,this.D,this.Nt),oe=new Lv(this.w,window.location,Ue),Ot=new Dv(this.S,oe),Zt=new y_(this.S,this.E),Gi=new g_(this.tt,new Ah),$r=new A_(e,n),zr,$i,qr,zi=new Bc(this.E,n,e,C),qi=new Bc(this.E,n,e,C,$i);Pt?(this.w.emitInitTracking(),new Pw(zi,qi,y,n,e,$r,Gi,this.w,this.S,v,this.E,Ot,oe,Ve,this.Ct,this.M,Ft,this.tt,this.C,Zt,this.J,Bt,Gt,M,w,P,this.O,u,this.D,this.Nt,this.K,this.bt,this.lt,qr,zr,V,U).start()):new Xp(this.w,this.S,v,Ot,oe,f,Ve).start()})})})}}return s})(),_s=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(w){let P=w.source,M=w.data;if(c(M)){let T=()=>{let B=n(t,M);m(B,()=>P.postMessage("csBundleLoaded",w.origin))};e=M.token,v(i.loadBundle),l(w.origin)&&T()}}};function n(w,P){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(w,"{version}",P.version),"{token}",P.token),"{domain}",P.domain)}function o(){return e}r.getToken=o;function c(w){return w&&w.type==="csBundleInjection"&&l(w.domain)&&f(w.version)&&h(w.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(w){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(w)||r.hjDomainRegex.test(w)}r.isAuthorizedDomain=l;function h(w){return/^[a-zA-Z0-9]+$/.test(w)}r.isAuthorizedToken=h;function f(w){return/^[a-zA-Z0-9\.]+$/.test(w)}r.isAuthorizedTagVersion=f;function u(){let w=window.opener||window.parent;return window!==w&&window.addEventListener}r.isActivable=u;function m(w,P){let M=document.createElement("script");M.type="text/javascript",M.async=!0,M.src=w,M.onload=P,M.charset="utf-8",document.head.appendChild(M)}r.addScript=m;function y(w){let P=document.createElement("link");P.rel="stylesheet",P.href=w,document.head.appendChild(P)}r.addStyle=y;function S(w){return`${w}?cb=${new csDate().getTime()}`}r.addCacheBusting=S;function C(){O(i.loadBundle)}r.waitForBundleInjection=C;function O(w){window.addEventListener("message",w,!1)}r.listen=O;function v(w){window.removeEventListener("message",w,!1)}r.removeListener=v}(s||(s={})),s})(),Gc="_hp_ved",zw=18e5,qw="/js/ved.js",Ww="/css/ved.css",Yw="/js/ved.css",Xw=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),Kw=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var kn=(()=>{let s;return function(r){let t=!1,e;function i(m){return e+m}function n(){let m=[i(Ww),i(Yw)];csArray.prototype.forEach.call(m,y=>{_s.addStyle(y)})}function o(m){let y=new csRegExp("(^|;)[ ]*"+m+"=([^;]*)"),S=y.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(m,y,S){let C=encodeURIComponent(m)+"="+encodeURIComponent(y),O=new csDate;O.setTime(O.getTime()+S);let v=C+"; expires="+O.toUTCString()+"; path=/";document.cookie=v}function l(){c(Gc,"on",zw)}function h(){return o(Gc)==="on"}r.isVLCookieEnabled=h;function f(m){window.heapV=Object.assign({},window.heap,{source:m==null?void 0:m.source,uri:e,loadArgs:m==null?void 0:m.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=f;function u(m,y){var S;if(e=m,y){let C={type:Xw.StatusUpdate,value:Kw.ReceivedInitMessage},O={targetOrigin:y==null?void 0:y.origin};(S=y==null?void 0:y.source)===null||S===void 0||S.postMessage(C,O)}t||(t=!0,l(),f(y),window.heapV&&(_s.addScript(i(qw)),n()))}r.init=u}(s||(s={})),s})(),Jw=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,_s.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(T){var B;T.origin===l&&((B=T.data)===null||B===void 0?void 0:B.message)==="init"&&T.source&&(kn.init(l,T),w(h.initHeapVisualLabeler))},ping(T){typeof T.data=="string"&&T.data==="ping"&&m(T.origin)&&(c=T.origin,o=_s.hjDomainRegex.test(T.origin)?i:T.origin,w(h.ping),v(h.insertMessageScript),y(_s.addCacheBusting("utils.js")))},insertMessageScript:P(T=>{typeof T.data=="string"&&T.data!=="ping"&&(w(h.insertMessageScript),y(T.data))})};function f(){return _s.getToken()}r.getToken=f;function u(){return window!==t&&window.addEventListener}r.isActivable=u;function m(T){return csArray.prototype.some.call(n,B=>B.test(T))}r.isAuthorizedDomain=m;function y(T,B){let et=document.createElement("script");et.type="text/javascript",et.async=!0;let at=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");et.src=`${at}/${e}/${T}`,et.onload=B,et.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(et),S(T)}function S(T){csString.prototype.includes.call(T,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(T,"&mode=")[1])}function C(){v(h.ping),_s.waitForBundleInjection()}r.waitForConnection=C;function O(T){l=T,v(h.initHeapVisualLabeler),kn.isVLCookieEnabled()&&kn.init(l)}r.waitForHeapVisualLabeler=O;function v(T){window.addEventListener("message",T,!1)}r.listen=v;function w(T){window.removeEventListener("message",T,!1)}r.removeListener=w;function P(T){return function(B){B.origin===c&&T(B)}}r.secureListener=P;function M(T){c&&t.postMessage(T,c)}r.post=M}(s||(s={})),s})();var gr=window.CSFrameCommunication||Jw,Qw=(()=>{class s extends Mo{constructor(t){super(),this.O=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.O.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.O.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){H.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return j([It("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var Zw=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let v=window.CSJavascriptBridge.getVersion();if(_t(v))return v}catch{H.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(v,w){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(v,csJSON.stringify(w))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(v){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(v))}r.addUserProperties=c;function l(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}r.sendAnalysisEvent=l;function h(v){if(window.CSJavascriptBridge.sendSREvent)for(let w of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(w))}r.sendSREvent=h;function f(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}r.sendLog=f;function u(){window.CSJavascriptBridge.optIn()}r.sendOptIn=u;function m(){window.CSJavascriptBridge.optOut()}r.sendOptOut=m;function y(v,w){window.CSJavascriptBridge.sendDynamicVar(v,w)}r.sendDynamicVariable=y;function S(v,w,P){window.CSJavascriptBridge.sendTransaction(v,w,P)}r.sendTransaction=S;function C(v,w){if(window.CSJavascriptBridge.sendAssets){let P=csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(P,w||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,P=>P.assetId))}r.sendAssets=C;function O(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}r.sendNativeSREvent=O}(s||(s={})),s})();var tA=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.Rs=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new c_,l=new oh(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new Jf(this.Rt,this.E);h.init();let f=new Zf(this.E,h);if(this.Rt.isTopWindowTracker()&&f.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&H.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){H.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Xf();let m=new Qw(l),y=new $w(this.E,h,this.Rs,l,m,c);this.E.isQuotaEnabled()?y.initWithQuota():y.init()}let u=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(m){return L.isMaskedElement(m)||L.isMaskedElementChild(m)},isAttributeSensitive(m,y){return L.isMaskedAttribute(m,y)},getSensitiveAttributes(m){return Ii(m.attributes,y=>L.isMaskedAttribute(m,y.name))}},Console:{warn(m){u&&console.warn("cs.tracking.warning",m)},error(m){u&&console.error("cs.tracking.error",m)}},Version:hl},window.CSFrameCommunication||(window.CSFrameCommunication=gr,gr.isActivable()&&gr.waitForConnection(),this.E.isCsCrosswritingHeap()&&gr.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return j([It("main.start"),N("main.start")],s.prototype,"start",null),s})(),eA=(()=>{class s{constructor(){}send(t,e,i=ft.warn){let n={message:t,errorCode:e,level:i};Zw.sendLog(n)}}return s})();function sA(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),$.counters.availableFeatures.set(s)})}var iA=(()=>{class s{constructor(t,e,i){this.X=t,this.M=e,this.gO=i,this.vt=[],this.mO=Oo().v,sA()}flush(){this.vt.length!==0&&(this.X.send({m:csArray.prototype.map.call(this.vt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.gO,v:this.mO}),this.vt=[])}push(t){csArray.prototype.push.call(this.vt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,j([td(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function rA(s,r){let t=s.validationRate/10,e=Cs.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Eh.create(r.isTopWindowTracker()),l=new Sh(o).create(s.getMetricsUri()),h=new ni,f=new iA(l,h,s.projectId);$.setService(f)}catch(o){H.warn(`Error initializing metrics: ${o.message}`)}}function nA(){var s;hd();let r=new Ef(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Sf(window,r);t.init();let e=new $f;if(Xu(H),zf(),H.computeIsActive(r.validationRate),t.isTopWindowTracker()){let o=new jf(r,e);H.setStrategy(o)}else if(t.isInWebViewContext()){let n=new eA;H.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Ns(window,"MutationObserver")),Qd(),rA(r,t),new tA(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{qf(nA)}catch{}});})();

// signature-ed96c04cd3366048342714ed6ed1a9ab6a2d4c338325da5ad37a8a7202a6b61a